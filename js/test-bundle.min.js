// peggy 5.0.6
//
// https://peggyjs.org/
//
// Copyright (c) 2025- the Peggy authors
// Licensed under the MIT License.

"use strict";(()=>{var F=(a,t)=>()=>(t||a((t={exports:{}}).exports,t),t.exports);var os=F((Ev,ki)=>{function ji(){var a=[].slice.call(arguments);function t(e,o){Object.keys(o).forEach(function(r){~a.indexOf(r)||(e[r]=o[r])})}return function(){for(var o=[].slice.call(arguments),r=0,s={};r<o.length;r++)t(s,o[r]);return s}}ki.exports=sr;function sr(a,t,e){var o=ji("name","message","stack","constructor","toJSON"),r=o(t||{});this.message=a||"Unspecified AssertionError",this.showDiff=!1;for(var s in r)this[s]=r[s];if(e=e||sr,Error.captureStackTrace)Error.captureStackTrace(this,e);else try{throw new Error}catch(n){this.stack=n.stack}}sr.prototype=Object.create(Error.prototype);sr.prototype.name="AssertionError";sr.prototype.constructor=sr;sr.prototype.toJSON=function(a){var t=ji("constructor","toJSON","stack"),e=t({name:this.name},this);return a!==!1&&this.stack&&(e.stack=this.stack),e}});var Wi=F((Pv,Gi)=>{"use strict";function Ui(a,t){return typeof a>"u"||a===null?!1:t in Object(a)}function Bi(a){var t=a.replace(/([^\\])\[/g,"$1.["),e=t.match(/(\\\.|[^.]+?)+/g);return e.map(function(r){if(r==="constructor"||r==="__proto__"||r==="prototype")return{};var s=/^\[(\d+)\]$/,n=s.exec(r),c=null;return n?c={i:parseFloat(n[1])}:c={p:r.replace(/\\([.[\]])/g,"$1")},c})}function Di(a,t,e){var o=a,r=null;e=typeof e>"u"?t.length:e;for(var s=0;s<e;s++){var n=t[s];o&&(typeof n.p>"u"?o=o[n.i]:o=o[n.p],s===e-1&&(r=o))}return r}function Wg(a,t,e){for(var o=a,r=e.length,s=null,n=0;n<r;n++){var c=null,l=null;if(s=e[n],n===r-1)c=typeof s.p>"u"?s.i:s.p,o[c]=t;else if(typeof s.p<"u"&&o[s.p])o=o[s.p];else if(typeof s.i<"u"&&o[s.i])o=o[s.i];else{var h=e[n+1];c=typeof s.p>"u"?s.i:s.p,l=typeof h.p>"u"?[]:{},o[c]=l,o=o[c]}}}function zi(a,t){var e=Bi(t),o=e[e.length-1],r={parent:e.length>1?Di(a,e,e.length-1):a,name:o.p||o.i,value:Di(a,e)};return r.exists=Ui(r.parent,r.name),r}function Vg(a,t){var e=zi(a,t);return e.value}function Kg(a,t,e){var o=Bi(t);return Wg(a,e,o),a}Gi.exports={hasProperty:Ui,getPathInfo:zi,getPathValue:Vg,setPathValue:Kg}});var vt=F((_v,Vi)=>{Vi.exports=function(t,e,o){var r=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)r[e]=o;else return r[e]}});var Hi=F((Cv,Ki)=>{var Hg=vt();Ki.exports=function(t,e){var o=Hg(t,"negate"),r=e[0];return o?!r:r}});var oa=F((is,cs)=>{(function(a,t){typeof is=="object"&&typeof cs<"u"?cs.exports=t():typeof define=="function"&&define.amd?define(t):(a=typeof globalThis<"u"?globalThis:a||self,a.typeDetect=t())})(is,function(){"use strict";var a=typeof Promise=="function",t=function(ve){if(typeof globalThis=="object")return globalThis;Object.defineProperty(ve,"typeDetectGlobalObject",{get:function(){return this},configurable:!0});var Se=typeDetectGlobalObject;return delete ve.typeDetectGlobalObject,Se}(Object.prototype),e=typeof Symbol<"u",o=typeof Map<"u",r=typeof Set<"u",s=typeof WeakMap<"u",n=typeof WeakSet<"u",c=typeof DataView<"u",l=e&&typeof Symbol.iterator<"u",h=e&&typeof Symbol.toStringTag<"u",b=r&&typeof Set.prototype.entries=="function",T=o&&typeof Map.prototype.entries=="function",A=b&&Object.getPrototypeOf(new Set().entries()),P=T&&Object.getPrototypeOf(new Map().entries()),H=l&&typeof Array.prototype[Symbol.iterator]=="function",me=H&&Object.getPrototypeOf([][Symbol.iterator]()),ye=l&&typeof String.prototype[Symbol.iterator]=="function",_e=ye&&Object.getPrototypeOf(""[Symbol.iterator]()),ie=8,ne=-1;function Pe(ve){var Se=typeof ve;if(Se!=="object")return Se;if(ve===null)return"null";if(ve===t)return"global";if(Array.isArray(ve)&&(h===!1||!(Symbol.toStringTag in ve)))return"Array";if(typeof window=="object"&&window!==null){if(typeof window.location=="object"&&ve===window.location)return"Location";if(typeof window.document=="object"&&ve===window.document)return"Document";if(typeof window.navigator=="object"){if(typeof window.navigator.mimeTypes=="object"&&ve===window.navigator.mimeTypes)return"MimeTypeArray";if(typeof window.navigator.plugins=="object"&&ve===window.navigator.plugins)return"PluginArray"}if((typeof window.HTMLElement=="function"||typeof window.HTMLElement=="object")&&ve instanceof window.HTMLElement){if(ve.tagName==="BLOCKQUOTE")return"HTMLQuoteElement";if(ve.tagName==="TD")return"HTMLTableDataCellElement";if(ve.tagName==="TH")return"HTMLTableHeaderCellElement"}}var je=h&&ve[Symbol.toStringTag];if(typeof je=="string")return je;var fe=Object.getPrototypeOf(ve);return fe===RegExp.prototype?"RegExp":fe===Date.prototype?"Date":a&&fe===Promise.prototype?"Promise":r&&fe===Set.prototype?"Set":o&&fe===Map.prototype?"Map":n&&fe===WeakSet.prototype?"WeakSet":s&&fe===WeakMap.prototype?"WeakMap":c&&fe===DataView.prototype?"DataView":o&&fe===P?"Map Iterator":r&&fe===A?"Set Iterator":H&&fe===me?"Array Iterator":ye&&fe===_e?"String Iterator":fe===null?"Object":Object.prototype.toString.call(ve).slice(ie,ne)}return Pe})});var Yi=F(($v,Ji)=>{var Jg=os(),ls=vt(),Yg=oa();Ji.exports=function(t,e){var o=ls(t,"message"),r=ls(t,"ssfi");o=o?o+": ":"",t=ls(t,"object"),e=e.map(function(c){return c.toLowerCase()}),e.sort();var s=e.map(function(c,l){var h=~["a","e","i","o","u"].indexOf(c.charAt(0))?"an":"a",b=e.length>1&&l===e.length-1?"or ":"";return b+h+" "+c}).join(", "),n=Yg(t).toLowerCase();if(!e.some(function(c){return n===c}))throw new Jg(o+"object tested must be "+s+", but "+n+" given",void 0,r)}});var us=F((Ov,Qi)=>{Qi.exports=function(t,e){return e.length>4?e[4]:t._obj}});var en=F((qv,Zi)=>{"use strict";var Qg=Function.prototype.toString,Zg=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\s\(\/]+)/,Xg=512;function eb(a){if(typeof a!="function")return null;var t="";if(typeof Function.prototype.name>"u"&&typeof a.name>"u"){var e=Qg.call(a);if(e.indexOf("(")>Xg)return t;var o=e.match(Zg);o&&(t=o[1])}else t=a.name;return t}Zi.exports=eb});var Xi=F(()=>{});var tc=F((tn,ec)=>{(function(a,t){typeof tn=="object"&&typeof ec<"u"?t(tn):typeof define=="function"&&define.amd?define(["exports"],t):(a=typeof globalThis<"u"?globalThis:a||self,t(a.loupe={}))})(tn,function(a){"use strict";function t(_){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(C){return typeof C}:t=function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},t(_)}function e(_,C){return o(_)||r(_,C)||s(_,C)||c()}function o(_){if(Array.isArray(_))return _}function r(_,C){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(_)))){var W=[],ue=!0,we=!1,Ce=void 0;try{for(var ke=_[Symbol.iterator](),ze;!(ue=(ze=ke.next()).done)&&(W.push(ze.value),!(C&&W.length===C));ue=!0);}catch(ut){we=!0,Ce=ut}finally{try{!ue&&ke.return!=null&&ke.return()}finally{if(we)throw Ce}}return W}}function s(_,C){if(_){if(typeof _=="string")return n(_,C);var W=Object.prototype.toString.call(_).slice(8,-1);if(W==="Object"&&_.constructor&&(W=_.constructor.name),W==="Map"||W==="Set")return Array.from(_);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return n(_,C)}}function n(_,C){(C==null||C>_.length)&&(C=_.length);for(var W=0,ue=new Array(C);W<C;W++)ue[W]=_[W];return ue}function c(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},h={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},b="\u2026";function T(_,C){var W=l[h[C]]||l[C];return W?"\x1B[".concat(W[0],"m").concat(String(_),"\x1B[").concat(W[1],"m"):String(_)}function A(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},C=_.showHidden,W=C===void 0?!1:C,ue=_.depth,we=ue===void 0?2:ue,Ce=_.colors,ke=Ce===void 0?!1:Ce,ze=_.customInspect,ut=ze===void 0?!0:ze,st=_.showProxy,mt=st===void 0?!1:st,Ct=_.maxArrayLength,Xr=Ct===void 0?1/0:Ct,ar=_.breakLength,Ut=ar===void 0?1/0:ar,Bt=_.seen,zn=Bt===void 0?[]:Bt,za=_.truncate,Gn=za===void 0?1/0:za,Ga=_.stylize,Wn=Ga===void 0?String:Ga,ea={showHidden:!!W,depth:Number(we),colors:!!ke,customInspect:!!ut,showProxy:!!mt,maxArrayLength:Number(Xr),breakLength:Number(Ut),truncate:Number(Gn),seen:zn,stylize:Wn};return ea.colors&&(ea.stylize=T),ea}function P(_,C){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b;_=String(_);var ue=W.length,we=_.length;return ue>C&&we>ue?W:we>C&&we>ue?"".concat(_.slice(0,C-ue)).concat(W):_}function H(_,C,W){var ue=arguments.length>3&&arguments[3]!==void 0?arguments[3]:", ";W=W||C.inspect;var we=_.length;if(we===0)return"";for(var Ce=C.truncate,ke="",ze="",ut="",st=0;st<we;st+=1){var mt=st+1===_.length,Ct=st+2===_.length;ut="".concat(b,"(").concat(_.length-st,")");var Xr=_[st];C.truncate=Ce-ke.length-(mt?0:ue.length);var ar=ze||W(Xr,C)+(mt?"":ue),Ut=ke.length+ar.length,Bt=Ut+ut.length;if(mt&&Ut>Ce&&ke.length+ut.length<=Ce||!mt&&!Ct&&Bt>Ce||(ze=mt?"":W(_[st+1],C)+(Ct?"":ue),!mt&&Ct&&Bt>Ce&&Ut+ze.length>Ce))break;if(ke+=ar,!mt&&!Ct&&Ut+ze.length>=Ce){ut="".concat(b,"(").concat(_.length-st-1,")");break}ut=""}return"".concat(ke).concat(ut)}function me(_){return _.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?_:JSON.stringify(_).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}function ye(_,C){var W=e(_,2),ue=W[0],we=W[1];return C.truncate-=2,typeof ue=="string"?ue=me(ue):typeof ue!="number"&&(ue="[".concat(C.inspect(ue,C),"]")),C.truncate-=ue.length,we=C.inspect(we,C),"".concat(ue,": ").concat(we)}function _e(_,C){var W=Object.keys(_).slice(_.length);if(!_.length&&!W.length)return"[]";C.truncate-=4;var ue=H(_,C);C.truncate-=ue.length;var we="";return W.length&&(we=H(W.map(function(Ce){return[Ce,_[Ce]]}),C,ye)),"[ ".concat(ue).concat(we?", ".concat(we):""," ]")}var ie=Function.prototype.toString,ne=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\s\(\/]+)/,Pe=512;function ve(_){if(typeof _!="function")return null;var C="";if(typeof Function.prototype.name>"u"&&typeof _.name>"u"){var W=ie.call(_);if(W.indexOf("(")>Pe)return C;var ue=W.match(ne);ue&&(C=ue[1])}else C=_.name;return C}var Se=ve,je=function(C){return typeof Buffer=="function"&&C instanceof Buffer?"Buffer":C[Symbol.toStringTag]?C[Symbol.toStringTag]:Se(C.constructor)};function fe(_,C){var W=je(_);C.truncate-=W.length+4;var ue=Object.keys(_).slice(_.length);if(!_.length&&!ue.length)return"".concat(W,"[]");for(var we="",Ce=0;Ce<_.length;Ce++){var ke="".concat(C.stylize(P(_[Ce],C.truncate),"number")).concat(Ce===_.length-1?"":", ");if(C.truncate-=ke.length,_[Ce]!==_.length&&C.truncate<=3){we+="".concat(b,"(").concat(_.length-_[Ce]+1,")");break}we+=ke}var ze="";return ue.length&&(ze=H(ue.map(function(ut){return[ut,_[ut]]}),C,ye)),"".concat(W,"[ ").concat(we).concat(ze?", ".concat(ze):""," ]")}function x(_,C){var W=_.toJSON();if(W===null)return"Invalid Date";var ue=W.split("T"),we=ue[0];return C.stylize("".concat(we,"T").concat(P(ue[1],C.truncate-we.length-1)),"date")}function q(_,C){var W=Se(_);return W?C.stylize("[Function ".concat(P(W,C.truncate-11),"]"),"special"):C.stylize("[Function]","special")}function J(_,C){var W=e(_,2),ue=W[0],we=W[1];return C.truncate-=4,ue=C.inspect(ue,C),C.truncate-=ue.length,we=C.inspect(we,C),"".concat(ue," => ").concat(we)}function j(_){var C=[];return _.forEach(function(W,ue){C.push([ue,W])}),C}function B(_,C){var W=_.size-1;return W<=0?"Map{}":(C.truncate-=7,"Map{ ".concat(H(j(_),C,J)," }"))}var te=Number.isNaN||function(_){return _!==_};function Q(_,C){return te(_)?C.stylize("NaN","number"):_===1/0?C.stylize("Infinity","number"):_===-1/0?C.stylize("-Infinity","number"):_===0?C.stylize(1/_===1/0?"+0":"-0","number"):C.stylize(P(_,C.truncate),"number")}function U(_,C){var W=P(_.toString(),C.truncate-1);return W!==b&&(W+="n"),C.stylize(W,"bigint")}function Re(_,C){var W=_.toString().split("/")[2],ue=C.truncate-(2+W.length),we=_.source;return C.stylize("/".concat(P(we,ue),"/").concat(W),"regexp")}function Z(_){var C=[];return _.forEach(function(W){C.push(W)}),C}function y(_,C){return _.size===0?"Set{}":(C.truncate-=7,"Set{ ".concat(H(Z(_),C)," }"))}var E=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),N={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},R=16,Y=4;function D(_){return N[_]||"\\u".concat("0000".concat(_.charCodeAt(0).toString(R)).slice(-Y))}function k(_,C){return E.test(_)&&(_=_.replace(E,D)),C.stylize("'".concat(P(_,C.truncate-2),"'"),"string")}function L(_){return"description"in Symbol.prototype?_.description?"Symbol(".concat(_.description,")"):"Symbol()":_.toString()}var K=function(){return"Promise{\u2026}"};try{var X=process.binding("util"),se=X.getPromiseDetails,pe=X.kPending,he=X.kRejected;Array.isArray(se(Promise.resolve()))&&(K=function(C,W){var ue=se(C),we=e(ue,2),Ce=we[0],ke=we[1];return Ce===pe?"Promise{<pending>}":"Promise".concat(Ce===he?"!":"","{").concat(W.inspect(ke,W),"}")})}catch{}var oe=K;function xe(_,C){var W=Object.getOwnPropertyNames(_),ue=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(_):[];if(W.length===0&&ue.length===0)return"{}";if(C.truncate-=4,C.seen=C.seen||[],C.seen.indexOf(_)>=0)return"[Circular]";C.seen.push(_);var we=H(W.map(function(ze){return[ze,_[ze]]}),C,ye),Ce=H(ue.map(function(ze){return[ze,_[ze]]}),C,ye);C.seen.pop();var ke="";return we&&Ce&&(ke=", "),"{ ".concat(we).concat(ke).concat(Ce," }")}var Me=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function He(_,C){var W="";return Me&&Me in _&&(W=_[Me]),W=W||Se(_.constructor),(!W||W==="_class")&&(W="<Anonymous Class>"),C.truncate-=W.length,"".concat(W).concat(xe(_,C))}function O(_,C){return _.length===0?"Arguments[]":(C.truncate-=13,"Arguments[ ".concat(H(_,C)," ]"))}var be=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description"];function Le(_,C){var W=Object.getOwnPropertyNames(_).filter(function(ke){return be.indexOf(ke)===-1}),ue=_.name;C.truncate-=ue.length;var we="";typeof _.message=="string"?we=P(_.message,C.truncate):W.unshift("message"),we=we?": ".concat(we):"",C.truncate-=we.length+5;var Ce=H(W.map(function(ke){return[ke,_[ke]]}),C,ye);return"".concat(ue).concat(we).concat(Ce?" { ".concat(Ce," }"):"")}function tt(_,C){var W=e(_,2),ue=W[0],we=W[1];return C.truncate-=3,we?"".concat(C.stylize(ue,"yellow"),"=").concat(C.stylize('"'.concat(we,'"'),"string")):"".concat(C.stylize(ue,"yellow"))}function Ve(_,C){return H(_,C,Te,`
`)}function Te(_,C){var W=_.getAttributeNames(),ue=_.tagName.toLowerCase(),we=C.stylize("<".concat(ue),"special"),Ce=C.stylize(">","special"),ke=C.stylize("</".concat(ue,">"),"special");C.truncate-=ue.length*2+5;var ze="";W.length>0&&(ze+=" ",ze+=H(W.map(function(mt){return[mt,_.getAttribute(mt)]}),C,tt," ")),C.truncate-=ze.length;var ut=C.truncate,st=Ve(_.children,C);return st&&st.length>ut&&(st="".concat(b,"(").concat(_.children.length,")")),"".concat(we).concat(ze).concat(Ce).concat(st).concat(ke)}var Qe=typeof Symbol=="function"&&typeof Symbol.for=="function",jt=Qe?Symbol.for("chai/inspect"):"@@chai/inspect",kt=!1;try{var ka=Xi();kt=ka.inspect?ka.inspect.custom:!1}catch{kt=!1}function Da(){this.key="chai/loupe__"+Math.random()+Date.now()}Da.prototype={get:function(C){return C[this.key]},has:function(C){return this.key in C},set:function(C,W){Object.isExtensible(C)&&Object.defineProperty(C,this.key,{value:W,configurable:!0})}};var Sr=new(typeof WeakMap=="function"?WeakMap:Da),Tr={},Ua={undefined:function(C,W){return W.stylize("undefined","undefined")},null:function(C,W){return W.stylize(null,"null")},boolean:function(C,W){return W.stylize(C,"boolean")},Boolean:function(C,W){return W.stylize(C,"boolean")},number:Q,Number:Q,bigint:U,BigInt:U,string:k,String:k,function:q,Function:q,symbol:L,Symbol:L,Array:_e,Date:x,Map:B,Set:y,RegExp:Re,Promise:oe,WeakSet:function(C,W){return W.stylize("WeakSet{\u2026}","special")},WeakMap:function(C,W){return W.stylize("WeakMap{\u2026}","special")},Arguments:O,Int8Array:fe,Uint8Array:fe,Uint8ClampedArray:fe,Int16Array:fe,Uint16Array:fe,Int32Array:fe,Uint32Array:fe,Float32Array:fe,Float64Array:fe,Generator:function(){return""},DataView:function(){return""},ArrayBuffer:function(){return""},Error:Le,HTMLCollection:Ve,NodeList:Ve},Bn=function(C,W,ue){return jt in C&&typeof C[jt]=="function"?C[jt](W):kt&&kt in C&&typeof C[kt]=="function"?C[kt](W.depth,W):"inspect"in C&&typeof C.inspect=="function"?C.inspect(W.depth,W):"constructor"in C&&Sr.has(C.constructor)?Sr.get(C.constructor)(C,W):Tr[ue]?Tr[ue](C,W):""},Er=Object.prototype.toString;function Dt(_,C){C=A(C),C.inspect=Dt;var W=C,ue=W.customInspect,we=_===null?"null":t(_);if(we==="object"&&(we=Er.call(_).slice(8,-1)),Ua[we])return Ua[we](_,C);if(ue&&_){var Ce=Bn(_,C,we);if(Ce)return typeof Ce=="string"?Ce:Dt(Ce,C)}var ke=_?Object.getPrototypeOf(_):!1;return ke===Object.prototype||ke===null?xe(_,C):_&&typeof HTMLElement=="function"&&_ instanceof HTMLElement?Te(_,C):"constructor"in _?_.constructor!==Object?He(_,C):xe(_,C):_===Object(_)?xe(_,C):C.stylize(String(_),we)}function Ba(_,C){return Sr.has(_)?!1:(Sr.set(_,C),!0)}function Pr(_,C){return _ in Tr?!1:(Tr[_]=C,!0)}var _r=jt;a.custom=_r,a.default=Dt,a.inspect=Dt,a.registerConstructor=Ba,a.registerStringTag=Pr,Object.defineProperty(a,"__esModule",{value:!0})})});var or=F((Lv,rc)=>{rc.exports={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null}});var rn=F((Fv,nc)=>{var Mv=en(),tb=tc(),ac=or();nc.exports=rb;function rb(a,t,e,o){var r={colors:o,depth:typeof e>"u"?2:e,showHidden:t,truncate:ac.truncateThreshold?ac.truncateThreshold:1/0};return tb.inspect(a,r)}});var fs=F((Nv,oc)=>{var ab=rn(),sc=or();oc.exports=function(t){var e=ab(t),o=Object.prototype.toString.call(t);if(sc.truncateThreshold&&e.length>=sc.truncateThreshold){if(o==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(o==="[object Array]")return"[ Array("+t.length+") ]";if(o==="[object Object]"){var r=Object.keys(t),s=r.length>2?r.splice(0,2).join(", ")+", ...":r.join(", ");return"{ Object ("+s+") }"}else return e}else return e}});var cc=F((jv,ic)=>{var ps=vt(),nb=us(),ds=fs();ic.exports=function(t,e){var o=ps(t,"negate"),r=ps(t,"object"),s=e[3],n=nb(t,e),c=o?e[2]:e[1],l=ps(t,"message");return typeof c=="function"&&(c=c()),c=c||"",c=c.replace(/#\{this\}/g,function(){return ds(r)}).replace(/#\{act\}/g,function(){return ds(n)}).replace(/#\{exp\}/g,function(){return ds(s)}),l?l+": "+c:c}});var Wt=F((kv,lc)=>{lc.exports=function(t,e,o){var r=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),o=arguments.length===3?o:!0;for(var s in r)(o||s!=="object"&&s!=="ssfi"&&s!=="lockSsfi"&&s!="message")&&(e.__flags[s]=r[s])}});var wc=F((Dv,gs)=>{"use strict";var uc=oa();function yc(){this._key="chai/deep-eql__"+Math.random()+Date.now()}yc.prototype={get:function(t){return t[this._key]},set:function(t,e){Object.isExtensible(t)&&Object.defineProperty(t,this._key,{value:e,configurable:!0})}};var ms=typeof WeakMap=="function"?WeakMap:yc;function fc(a,t,e){if(!e||Rr(a)||Rr(t))return null;var o=e.get(a);if(o){var r=o.get(t);if(typeof r=="boolean")return r}return null}function an(a,t,e,o){if(!(!e||Rr(a)||Rr(t))){var r=e.get(a);r?r.set(t,o):(r=new ms,r.set(t,o),e.set(a,r))}}gs.exports=nn;gs.exports.MemoizeMap=ms;function nn(a,t,e){if(e&&e.comparator)return pc(a,t,e);var o=xc(a,t);return o!==null?o:pc(a,t,e)}function xc(a,t){return a===t?a!==0||1/a===1/t:a!==a&&t!==t?!0:Rr(a)||Rr(t)?!1:null}function pc(a,t,e){e=e||{},e.memoize=e.memoize===!1?!1:e.memoize||new ms;var o=e&&e.comparator,r=fc(a,t,e.memoize);if(r!==null)return r;var s=fc(t,a,e.memoize);if(s!==null)return s;if(o){var n=o(a,t);if(n===!1||n===!0)return an(a,t,e.memoize,n),n;var c=xc(a,t);if(c!==null)return c}var l=uc(a);if(l!==uc(t))return an(a,t,e.memoize,!1),!1;an(a,t,e.memoize,!0);var h=sb(a,t,l,e);return an(a,t,e.memoize,h),h}function sb(a,t,e,o){switch(e){case"String":case"Number":case"Boolean":case"Date":return nn(a.valueOf(),t.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return a===t;case"Error":return vc(a,t,["name","message","code"],o);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return ir(a,t,o);case"RegExp":return ob(a,t);case"Generator":return ib(a,t,o);case"DataView":return ir(new Uint8Array(a.buffer),new Uint8Array(t.buffer),o);case"ArrayBuffer":return ir(new Uint8Array(a),new Uint8Array(t),o);case"Set":return dc(a,t,o);case"Map":return dc(a,t,o);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return a.equals(t);case"Temporal.Duration":return a.total("nanoseconds")===t.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return a.toString()===t.toString();default:return lb(a,t,o)}}function ob(a,t){return a.toString()===t.toString()}function dc(a,t,e){try{if(a.size!==t.size)return!1;if(a.size===0)return!0}catch{return!1}var o=[],r=[];return a.forEach(function(n,c){o.push([n,c])}),t.forEach(function(n,c){r.push([n,c])}),ir(o.sort(),r.sort(),e)}function ir(a,t,e){var o=a.length;if(o!==t.length)return!1;if(o===0)return!0;for(var r=-1;++r<o;)if(nn(a[r],t[r],e)===!1)return!1;return!0}function ib(a,t,e){return ir(hs(a),hs(t),e)}function cb(a){return typeof Symbol<"u"&&typeof a=="object"&&typeof Symbol.iterator<"u"&&typeof a[Symbol.iterator]=="function"}function hc(a){if(cb(a))try{return hs(a[Symbol.iterator]())}catch{return[]}return[]}function hs(a){for(var t=a.next(),e=[t.value];t.done===!1;)t=a.next(),e.push(t.value);return e}function mc(a){var t=[];for(var e in a)t.push(e);return t}function gc(a){for(var t=[],e=Object.getOwnPropertySymbols(a),o=0;o<e.length;o+=1){var r=e[o];Object.getOwnPropertyDescriptor(a,r).enumerable&&t.push(r)}return t}function vc(a,t,e,o){var r=e.length;if(r===0)return!0;for(var s=0;s<r;s+=1)if(nn(a[e[s]],t[e[s]],o)===!1)return!1;return!0}function lb(a,t,e){var o=mc(a),r=mc(t),s=gc(a),n=gc(t);if(o=o.concat(s),r=r.concat(n),o.length&&o.length===r.length)return ir(bc(o).sort(),bc(r).sort())===!1?!1:vc(a,t,o,e);var c=hc(a),l=hc(t);return c.length&&c.length===l.length?(c.sort(),l.sort(),ir(c,l,e)):o.length===0&&c.length===0&&r.length===0&&l.length===0}function Rr(a){return a===null||typeof a!="object"}function bc(a){return a.map(function(e){return typeof e=="symbol"?e.toString():e})}});var ia=F((Uv,Ac)=>{var ub=or();Ac.exports=function(){return ub.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}});var Ec=F((Bv,Tc)=>{var fb=Vt(),Sc=vt(),pb=ia(),db=Wt();Tc.exports=function(t,e,o){o=o===void 0?function(){}:o,Object.defineProperty(t,e,{get:function r(){!pb()&&!Sc(this,"lockSsfi")&&Sc(this,"ssfi",r);var s=o.call(this);if(s!==void 0)return s;var n=new fb.Assertion;return db(this,n),n},configurable:!0})}});var ca=F((zv,Pc)=>{var hb=Object.getOwnPropertyDescriptor(function(){},"length");Pc.exports=function(t,e,o){return hb.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(o?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}});var Cc=F((Gv,_c)=>{_c.exports=function(t){var e=Object.getOwnPropertyNames(t);function o(s){e.indexOf(s)===-1&&e.push(s)}for(var r=Object.getPrototypeOf(t);r!==null;)Object.getOwnPropertyNames(r).forEach(o),r=Object.getPrototypeOf(r);return e}});var la=F((Wv,qc)=>{var mb=or(),$c=vt(),gb=Cc(),bb=ia();var Oc=["__flags","__methods","_obj","assert"];qc.exports=function(t,e){return bb()?new Proxy(t,{get:function o(r,s){if(typeof s=="string"&&mb.proxyExcludedKeys.indexOf(s)===-1&&!Reflect.has(r,s)){if(e)throw Error("Invalid Chai property: "+e+"."+s+'. See docs for proper usage of "'+e+'".');var n=null,c=4;throw gb(r).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&Oc.indexOf(l)===-1){var h=yb(s,l,c);h<c&&(n=l,c=h)}}),Error(n!==null?"Invalid Chai property: "+s+'. Did you mean "'+n+'"?':"Invalid Chai property: "+s)}return Oc.indexOf(s)===-1&&!$c(r,"lockSsfi")&&$c(r,"ssfi",o),Reflect.get(r,s)}}):t};function yb(a,t,e){if(Math.abs(a.length-t.length)>=e)return e;for(var o=[],r=0;r<=a.length;r++)o[r]=Array(t.length+1).fill(0),o[r][0]=r;for(var s=0;s<t.length;s++)o[0][s]=s;for(var r=1;r<=a.length;r++)for(var n=a.charCodeAt(r-1),s=1;s<=t.length;s++){if(Math.abs(r-s)>=e){o[r][s]=e;continue}o[r][s]=Math.min(o[r-1][s]+1,o[r][s-1]+1,o[r-1][s-1]+(n===t.charCodeAt(s-1)?0:1))}return o[a.length][t.length]}});var Lc=F((Vv,Ic)=>{var xb=ca(),vb=Vt(),Rc=vt(),wb=la(),Ab=Wt();Ic.exports=function(t,e,o){var r=function(){Rc(this,"lockSsfi")||Rc(this,"ssfi",r);var s=o.apply(this,arguments);if(s!==void 0)return s;var n=new vb.Assertion;return Ab(this,n),n};xb(r,e,!1),t[e]=wb(r,e)}});var Fc=F((Kv,Mc)=>{var Sb=Vt(),ua=vt(),Tb=ia(),Eb=Wt();Mc.exports=function(t,e,o){var r=Object.getOwnPropertyDescriptor(t,e),s=function(){};r&&typeof r.get=="function"&&(s=r.get),Object.defineProperty(t,e,{get:function n(){!Tb()&&!ua(this,"lockSsfi")&&ua(this,"ssfi",n);var c=ua(this,"lockSsfi");ua(this,"lockSsfi",!0);var l=o(s).call(this);if(ua(this,"lockSsfi",c),l!==void 0)return l;var h=new Sb.Assertion;return Eb(this,h),h},configurable:!0})}});var jc=F((Hv,Nc)=>{var Pb=ca(),_b=Vt(),fa=vt(),Cb=la(),$b=Wt();Nc.exports=function(t,e,o){var r=t[e],s=function(){throw new Error(e+" is not a function")};r&&typeof r=="function"&&(s=r);var n=function(){fa(this,"lockSsfi")||fa(this,"ssfi",n);var c=fa(this,"lockSsfi");fa(this,"lockSsfi",!0);var l=o(s).apply(this,arguments);if(fa(this,"lockSsfi",c),l!==void 0)return l;var h=new _b.Assertion;return $b(this,h),h};Pb(n,e,!1),t[e]=Cb(n,e)}});var zc=F((Jv,Bc)=>{var Ob=ca(),qb=Vt(),kc=vt(),Rb=la(),Dc=Wt();var Ib=typeof Object.setPrototypeOf=="function",Uc=function(){},Lb=Object.getOwnPropertyNames(Uc).filter(function(a){var t=Object.getOwnPropertyDescriptor(Uc,a);return typeof t!="object"?!0:!t.configurable}),Mb=Function.prototype.call,Fb=Function.prototype.apply;Bc.exports=function(t,e,o,r){typeof r!="function"&&(r=function(){});var s={method:o,chainingBehavior:r};t.__methods||(t.__methods={}),t.__methods[e]=s,Object.defineProperty(t,e,{get:function(){s.chainingBehavior.call(this);var c=function(){kc(this,"lockSsfi")||kc(this,"ssfi",c);var b=s.method.apply(this,arguments);if(b!==void 0)return b;var T=new qb.Assertion;return Dc(this,T),T};if(Ob(c,e,!0),Ib){var l=Object.create(this);l.call=Mb,l.apply=Fb,Object.setPrototypeOf(c,l)}else{var h=Object.getOwnPropertyNames(t);h.forEach(function(b){if(Lb.indexOf(b)===-1){var T=Object.getOwnPropertyDescriptor(t,b);Object.defineProperty(c,b,T)}})}return Dc(this,c),Rb(c)},configurable:!0})}});var Kc=F((Yv,Vc)=>{var Gc=Vt(),Wc=Wt();Vc.exports=function(t,e,o,r){var s=t.__methods[e],n=s.chainingBehavior;s.chainingBehavior=function(){var h=r(n).call(this);if(h!==void 0)return h;var b=new Gc.Assertion;return Wc(this,b),b};var c=s.method;s.method=function(){var h=o(c).apply(this,arguments);if(h!==void 0)return h;var b=new Gc.Assertion;return Wc(this,b),b}}});var Yc=F((Qv,Jc)=>{var Hc=rn();Jc.exports=function(t,e){return Hc(t)<Hc(e)?-1:1}});var bs=F((Zv,Qc)=>{Qc.exports=function(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}});var Xc=F((Xv,Zc)=>{var Nb=bs();Zc.exports=function(t){return Object.keys(t).concat(Nb(t))}});var tl=F((ew,el)=>{"use strict";var ys=en();function jb(a,t){return t instanceof Error&&a===t}function kb(a,t){return t instanceof Error?a.constructor===t.constructor||a instanceof t.constructor:t.prototype instanceof Error||t===Error?a.constructor===t||a instanceof t:!1}function Db(a,t){var e=typeof a=="string"?a:a.message;return t instanceof RegExp?t.test(e):typeof t=="string"?e.indexOf(t)!==-1:!1}function Ub(a){var t=a;if(a instanceof Error)t=ys(a.constructor);else if(typeof a=="function"&&(t=ys(a),t==="")){var e=ys(new a);t=e||t}return t}function Bb(a){var t="";return a&&a.message?t=a.message:typeof a=="string"&&(t=a),t}el.exports={compatibleInstance:jb,compatibleConstructor:kb,compatibleMessage:Db,getMessage:Bb,getConstructorName:Ub}});var al=F((tw,rl)=>{function zb(a){return a!==a}rl.exports=Number.isNaN||zb});var ol=F((rw,sl)=>{var Gb=oa(),nl=vt();function Wb(a){var t=Gb(a),e=["Array","Object","function"];return e.indexOf(t)!==-1}sl.exports=function(t,e){var o=nl(t,"operator"),r=nl(t,"negate"),s=e[3],n=r?e[2]:e[1];if(o)return o;if(typeof n=="function"&&(n=n()),n=n||"",!!n&&!/\shave\s/.test(n)){var c=Wb(s);return/\snot\s/.test(n)?c?"notDeepStrictEqual":"notStrictEqual":c?"deepStrictEqual":"strictEqual"}}});var cl=F(Ue=>{var il=Wi();Ue.test=Hi();Ue.type=oa();Ue.expectTypes=Yi();Ue.getMessage=cc();Ue.getActual=us();Ue.inspect=rn();Ue.objDisplay=fs();Ue.flag=vt();Ue.transferFlags=Wt();Ue.eql=wc();Ue.getPathInfo=il.getPathInfo;Ue.hasProperty=il.hasProperty;Ue.getName=en();Ue.addProperty=Ec();Ue.addMethod=Lc();Ue.overwriteProperty=Fc();Ue.overwriteMethod=jc();Ue.addChainableMethod=zc();Ue.overwriteChainableMethod=Kc();Ue.compareByInspect=Yc();Ue.getOwnEnumerablePropertySymbols=bs();Ue.getOwnEnumerableProperties=Xc();Ue.checkError=tl();Ue.proxify=la();Ue.addLengthGuard=ca();Ue.isProxyEnabled=ia();Ue.isNaN=al();Ue.getOperator=ol()});var ul=F((nw,ll)=>{var cr=or();ll.exports=function(a,t){var e=a.AssertionError,o=t.flag;a.Assertion=r;function r(s,n,c,l){return o(this,"ssfi",c||r),o(this,"lockSsfi",l),o(this,"object",s),o(this,"message",n),o(this,"eql",cr.deepEqual||t.eql),t.proxify(this)}Object.defineProperty(r,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),cr.includeStack},set:function(s){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),cr.includeStack=s}}),Object.defineProperty(r,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),cr.showDiff},set:function(s){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),cr.showDiff=s}}),r.addProperty=function(s,n){t.addProperty(this.prototype,s,n)},r.addMethod=function(s,n){t.addMethod(this.prototype,s,n)},r.addChainableMethod=function(s,n,c){t.addChainableMethod(this.prototype,s,n,c)},r.overwriteProperty=function(s,n){t.overwriteProperty(this.prototype,s,n)},r.overwriteMethod=function(s,n){t.overwriteMethod(this.prototype,s,n)},r.overwriteChainableMethod=function(s,n,c){t.overwriteChainableMethod(this.prototype,s,n,c)},r.prototype.assert=function(s,n,c,l,h,b){var T=t.test(this,arguments);if(b!==!1&&(b=!0),l===void 0&&h===void 0&&(b=!1),cr.showDiff!==!0&&(b=!1),!T){n=t.getMessage(this,arguments);var A=t.getActual(this,arguments),P={actual:A,expected:l,showDiff:b},H=t.getOperator(this,arguments);throw H&&(P.operator=H),new e(n,P,cr.includeStack?this.assert:o(this,"ssfi"))}};Object.defineProperty(r.prototype,"_obj",{get:function(){return o(this,"object")},set:function(s){o(this,"object",s)}})}});var pl=F((sw,fl)=>{fl.exports=function(a,t){var e=a.Assertion,o=a.AssertionError,r=t.flag;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(y){e.addProperty(y)}),e.addProperty("not",function(){r(this,"negate",!0)}),e.addProperty("deep",function(){r(this,"deep",!0)}),e.addProperty("nested",function(){r(this,"nested",!0)}),e.addProperty("own",function(){r(this,"own",!0)}),e.addProperty("ordered",function(){r(this,"ordered",!0)}),e.addProperty("any",function(){r(this,"any",!0),r(this,"all",!1)}),e.addProperty("all",function(){r(this,"all",!0),r(this,"any",!1)});function s(y,E){E&&r(this,"message",E),y=y.toLowerCase();var N=r(this,"object"),R=~["a","e","i","o","u"].indexOf(y.charAt(0))?"an ":"a ";this.assert(y===t.type(N).toLowerCase(),"expected #{this} to be "+R+y,"expected #{this} not to be "+R+y)}e.addChainableMethod("an",s),e.addChainableMethod("a",s);function n(y,E){return t.isNaN(y)&&t.isNaN(E)||y===E}function c(){r(this,"contains",!0)}function l(y,E){E&&r(this,"message",E);var N=r(this,"object"),R=t.type(N).toLowerCase(),Y=r(this,"message"),D=r(this,"negate"),k=r(this,"ssfi"),L=r(this,"deep"),K=L?"deep ":"",X=L?r(this,"eql"):n;Y=Y?Y+": ":"";var se=!1;switch(R){case"string":se=N.indexOf(y)!==-1;break;case"weakset":if(L)throw new o(Y+"unable to use .deep.include with WeakSet",void 0,k);se=N.has(y);break;case"map":N.forEach(function(xe){se=se||X(xe,y)});break;case"set":L?N.forEach(function(xe){se=se||X(xe,y)}):se=N.has(y);break;case"array":L?se=N.some(function(xe){return X(xe,y)}):se=N.indexOf(y)!==-1;break;default:if(y!==Object(y))throw new o(Y+"the given combination of arguments ("+R+" and "+t.type(y).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+t.type(y).toLowerCase(),void 0,k);var pe=Object.keys(y),he=null,oe=0;if(pe.forEach(function(xe){var Me=new e(N);if(t.transferFlags(this,Me,!0),r(Me,"lockSsfi",!0),!D||pe.length===1){Me.property(xe,y[xe]);return}try{Me.property(xe,y[xe])}catch(He){if(!t.checkError.compatibleConstructor(He,o))throw He;he===null&&(he=He),oe++}},this),D&&pe.length>1&&oe===pe.length)throw he;return}this.assert(se,"expected #{this} to "+K+"include "+t.inspect(y),"expected #{this} to not "+K+"include "+t.inspect(y))}e.addChainableMethod("include",l,c),e.addChainableMethod("contain",l,c),e.addChainableMethod("contains",l,c),e.addChainableMethod("includes",l,c),e.addProperty("ok",function(){this.assert(r(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")}),e.addProperty("true",function(){this.assert(r(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!r(this,"negate"))}),e.addProperty("false",function(){this.assert(r(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!r(this,"negate"))}),e.addProperty("null",function(){this.assert(r(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")}),e.addProperty("undefined",function(){this.assert(r(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")}),e.addProperty("NaN",function(){this.assert(t.isNaN(r(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function h(){var y=r(this,"object");this.assert(y!=null,"expected #{this} to exist","expected #{this} to not exist")}e.addProperty("exist",h),e.addProperty("exists",h),e.addProperty("empty",function(){var y=r(this,"object"),E=r(this,"ssfi"),N=r(this,"message"),R;switch(N=N?N+": ":"",t.type(y).toLowerCase()){case"array":case"string":R=y.length;break;case"map":case"set":R=y.size;break;case"weakmap":case"weakset":throw new o(N+".empty was passed a weak collection",void 0,E);case"function":var Y=N+".empty was passed a function "+t.getName(y);throw new o(Y.trim(),void 0,E);default:if(y!==Object(y))throw new o(N+".empty was passed non-string primitive "+t.inspect(y),void 0,E);R=Object.keys(y).length}this.assert(R===0,"expected #{this} to be empty","expected #{this} not to be empty")});function b(){var y=r(this,"object"),E=t.type(y);this.assert(E==="Arguments","expected #{this} to be arguments but got "+E,"expected #{this} to not be arguments")}e.addProperty("arguments",b),e.addProperty("Arguments",b);function T(y,E){E&&r(this,"message",E);var N=r(this,"object");if(r(this,"deep")){var R=r(this,"lockSsfi");r(this,"lockSsfi",!0),this.eql(y),r(this,"lockSsfi",R)}else this.assert(y===N,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",y,this._obj,!0)}e.addMethod("equal",T),e.addMethod("equals",T),e.addMethod("eq",T);function A(y,E){E&&r(this,"message",E);var N=r(this,"eql");this.assert(N(y,r(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",y,this._obj,!0)}e.addMethod("eql",A),e.addMethod("eqls",A);function P(y,E){E&&r(this,"message",E);var N=r(this,"object"),R=r(this,"doLength"),Y=r(this,"message"),D=Y?Y+": ":"",k=r(this,"ssfi"),L=t.type(N).toLowerCase(),K=t.type(y).toLowerCase(),X,se=!0;if(R&&L!=="map"&&L!=="set"&&new e(N,Y,k,!0).to.have.property("length"),!R&&L==="date"&&K!=="date")X=D+"the argument to above must be a date";else if(K!=="number"&&(R||L==="number"))X=D+"the argument to above must be a number";else if(!R&&L!=="date"&&L!=="number"){var pe=L==="string"?"'"+N+"'":N;X=D+"expected "+pe+" to be a number or a date"}else se=!1;if(se)throw new o(X,void 0,k);if(R){var he="length",oe;L==="map"||L==="set"?(he="size",oe=N.size):oe=N.length,this.assert(oe>y,"expected #{this} to have a "+he+" above #{exp} but got #{act}","expected #{this} to not have a "+he+" above #{exp}",y,oe)}else this.assert(N>y,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",y)}e.addMethod("above",P),e.addMethod("gt",P),e.addMethod("greaterThan",P);function H(y,E){E&&r(this,"message",E);var N=r(this,"object"),R=r(this,"doLength"),Y=r(this,"message"),D=Y?Y+": ":"",k=r(this,"ssfi"),L=t.type(N).toLowerCase(),K=t.type(y).toLowerCase(),X,se=!0;if(R&&L!=="map"&&L!=="set"&&new e(N,Y,k,!0).to.have.property("length"),!R&&L==="date"&&K!=="date")X=D+"the argument to least must be a date";else if(K!=="number"&&(R||L==="number"))X=D+"the argument to least must be a number";else if(!R&&L!=="date"&&L!=="number"){var pe=L==="string"?"'"+N+"'":N;X=D+"expected "+pe+" to be a number or a date"}else se=!1;if(se)throw new o(X,void 0,k);if(R){var he="length",oe;L==="map"||L==="set"?(he="size",oe=N.size):oe=N.length,this.assert(oe>=y,"expected #{this} to have a "+he+" at least #{exp} but got #{act}","expected #{this} to have a "+he+" below #{exp}",y,oe)}else this.assert(N>=y,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",y)}e.addMethod("least",H),e.addMethod("gte",H),e.addMethod("greaterThanOrEqual",H);function me(y,E){E&&r(this,"message",E);var N=r(this,"object"),R=r(this,"doLength"),Y=r(this,"message"),D=Y?Y+": ":"",k=r(this,"ssfi"),L=t.type(N).toLowerCase(),K=t.type(y).toLowerCase(),X,se=!0;if(R&&L!=="map"&&L!=="set"&&new e(N,Y,k,!0).to.have.property("length"),!R&&L==="date"&&K!=="date")X=D+"the argument to below must be a date";else if(K!=="number"&&(R||L==="number"))X=D+"the argument to below must be a number";else if(!R&&L!=="date"&&L!=="number"){var pe=L==="string"?"'"+N+"'":N;X=D+"expected "+pe+" to be a number or a date"}else se=!1;if(se)throw new o(X,void 0,k);if(R){var he="length",oe;L==="map"||L==="set"?(he="size",oe=N.size):oe=N.length,this.assert(oe<y,"expected #{this} to have a "+he+" below #{exp} but got #{act}","expected #{this} to not have a "+he+" below #{exp}",y,oe)}else this.assert(N<y,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",y)}e.addMethod("below",me),e.addMethod("lt",me),e.addMethod("lessThan",me);function ye(y,E){E&&r(this,"message",E);var N=r(this,"object"),R=r(this,"doLength"),Y=r(this,"message"),D=Y?Y+": ":"",k=r(this,"ssfi"),L=t.type(N).toLowerCase(),K=t.type(y).toLowerCase(),X,se=!0;if(R&&L!=="map"&&L!=="set"&&new e(N,Y,k,!0).to.have.property("length"),!R&&L==="date"&&K!=="date")X=D+"the argument to most must be a date";else if(K!=="number"&&(R||L==="number"))X=D+"the argument to most must be a number";else if(!R&&L!=="date"&&L!=="number"){var pe=L==="string"?"'"+N+"'":N;X=D+"expected "+pe+" to be a number or a date"}else se=!1;if(se)throw new o(X,void 0,k);if(R){var he="length",oe;L==="map"||L==="set"?(he="size",oe=N.size):oe=N.length,this.assert(oe<=y,"expected #{this} to have a "+he+" at most #{exp} but got #{act}","expected #{this} to have a "+he+" above #{exp}",y,oe)}else this.assert(N<=y,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",y)}e.addMethod("most",ye),e.addMethod("lte",ye),e.addMethod("lessThanOrEqual",ye),e.addMethod("within",function(y,E,N){N&&r(this,"message",N);var R=r(this,"object"),Y=r(this,"doLength"),D=r(this,"message"),k=D?D+": ":"",L=r(this,"ssfi"),K=t.type(R).toLowerCase(),X=t.type(y).toLowerCase(),se=t.type(E).toLowerCase(),pe,he=!0,oe=X==="date"&&se==="date"?y.toISOString()+".."+E.toISOString():y+".."+E;if(Y&&K!=="map"&&K!=="set"&&new e(R,D,L,!0).to.have.property("length"),!Y&&K==="date"&&(X!=="date"||se!=="date"))pe=k+"the arguments to within must be dates";else if((X!=="number"||se!=="number")&&(Y||K==="number"))pe=k+"the arguments to within must be numbers";else if(!Y&&K!=="date"&&K!=="number"){var xe=K==="string"?"'"+R+"'":R;pe=k+"expected "+xe+" to be a number or a date"}else he=!1;if(he)throw new o(pe,void 0,L);if(Y){var Me="length",He;K==="map"||K==="set"?(Me="size",He=R.size):He=R.length,this.assert(He>=y&&He<=E,"expected #{this} to have a "+Me+" within "+oe,"expected #{this} to not have a "+Me+" within "+oe)}else this.assert(R>=y&&R<=E,"expected #{this} to be within "+oe,"expected #{this} to not be within "+oe)});function _e(y,E){E&&r(this,"message",E);var N=r(this,"object"),R=r(this,"ssfi"),Y=r(this,"message");try{var D=N instanceof y}catch(L){throw L instanceof TypeError?(Y=Y?Y+": ":"",new o(Y+"The instanceof assertion needs a constructor but "+t.type(y)+" was given.",void 0,R)):L}var k=t.getName(y);k===null&&(k="an unnamed constructor"),this.assert(D,"expected #{this} to be an instance of "+k,"expected #{this} to not be an instance of "+k)}e.addMethod("instanceof",_e),e.addMethod("instanceOf",_e);function ie(y,E,N){N&&r(this,"message",N);var R=r(this,"nested"),Y=r(this,"own"),D=r(this,"message"),k=r(this,"object"),L=r(this,"ssfi"),K=typeof y;if(D=D?D+": ":"",R){if(K!=="string")throw new o(D+"the argument to property must be a string when using nested syntax",void 0,L)}else if(K!=="string"&&K!=="number"&&K!=="symbol")throw new o(D+"the argument to property must be a string, number, or symbol",void 0,L);if(R&&Y)throw new o(D+'The "nested" and "own" flags cannot be combined.',void 0,L);if(k==null)throw new o(D+"Target cannot be null or undefined.",void 0,L);var X=r(this,"deep"),se=r(this,"negate"),pe=R?t.getPathInfo(k,y):null,he=R?pe.value:k[y],oe=X?r(this,"eql"):(He,O)=>He===O,xe="";X&&(xe+="deep "),Y&&(xe+="own "),R&&(xe+="nested "),xe+="property ";var Me;Y?Me=Object.prototype.hasOwnProperty.call(k,y):R?Me=pe.exists:Me=t.hasProperty(k,y),(!se||arguments.length===1)&&this.assert(Me,"expected #{this} to have "+xe+t.inspect(y),"expected #{this} to not have "+xe+t.inspect(y)),arguments.length>1&&this.assert(Me&&oe(E,he),"expected #{this} to have "+xe+t.inspect(y)+" of #{exp}, but got #{act}","expected #{this} to not have "+xe+t.inspect(y)+" of #{act}",E,he),r(this,"object",he)}e.addMethod("property",ie);function ne(y,E,N){r(this,"own",!0),ie.apply(this,arguments)}e.addMethod("ownProperty",ne),e.addMethod("haveOwnProperty",ne);function Pe(y,E,N){typeof E=="string"&&(N=E,E=null),N&&r(this,"message",N);var R=r(this,"object"),Y=Object.getOwnPropertyDescriptor(Object(R),y),D=r(this,"eql");Y&&E?this.assert(D(E,Y),"expected the own property descriptor for "+t.inspect(y)+" on #{this} to match "+t.inspect(E)+", got "+t.inspect(Y),"expected the own property descriptor for "+t.inspect(y)+" on #{this} to not match "+t.inspect(E),E,Y,!0):this.assert(Y,"expected #{this} to have an own property descriptor for "+t.inspect(y),"expected #{this} to not have an own property descriptor for "+t.inspect(y)),r(this,"object",Y)}e.addMethod("ownPropertyDescriptor",Pe),e.addMethod("haveOwnPropertyDescriptor",Pe);function ve(){r(this,"doLength",!0)}function Se(y,E){E&&r(this,"message",E);var N=r(this,"object"),R=t.type(N).toLowerCase(),Y=r(this,"message"),D=r(this,"ssfi"),k="length",L;switch(R){case"map":case"set":k="size",L=N.size;break;default:new e(N,Y,D,!0).to.have.property("length"),L=N.length}this.assert(L==y,"expected #{this} to have a "+k+" of #{exp} but got #{act}","expected #{this} to not have a "+k+" of #{act}",y,L)}e.addChainableMethod("length",Se,ve),e.addChainableMethod("lengthOf",Se,ve);function je(y,E){E&&r(this,"message",E);var N=r(this,"object");this.assert(y.exec(N),"expected #{this} to match "+y,"expected #{this} not to match "+y)}e.addMethod("match",je),e.addMethod("matches",je),e.addMethod("string",function(y,E){E&&r(this,"message",E);var N=r(this,"object"),R=r(this,"message"),Y=r(this,"ssfi");new e(N,R,Y,!0).is.a("string"),this.assert(~N.indexOf(y),"expected #{this} to contain "+t.inspect(y),"expected #{this} to not contain "+t.inspect(y))});function fe(y){var E=r(this,"object"),N=t.type(E),R=t.type(y),Y=r(this,"ssfi"),D=r(this,"deep"),k,L="",K,X=!0,se=r(this,"message");se=se?se+": ":"";var pe=se+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(N==="Map"||N==="Set")L=D?"deeply ":"",K=[],E.forEach(function(be,Le){K.push(Le)}),R!=="Array"&&(y=Array.prototype.slice.call(arguments));else{switch(K=t.getOwnEnumerableProperties(E),R){case"Array":if(arguments.length>1)throw new o(pe,void 0,Y);break;case"Object":if(arguments.length>1)throw new o(pe,void 0,Y);y=Object.keys(y);break;default:y=Array.prototype.slice.call(arguments)}y=y.map(function(be){return typeof be=="symbol"?be:String(be)})}if(!y.length)throw new o(se+"keys required",void 0,Y);var he=y.length,oe=r(this,"any"),xe=r(this,"all"),Me=y,He=D?r(this,"eql"):(be,Le)=>be===Le;if(!oe&&!xe&&(xe=!0),oe&&(X=Me.some(function(be){return K.some(function(Le){return He(be,Le)})})),xe&&(X=Me.every(function(be){return K.some(function(Le){return He(be,Le)})}),r(this,"contains")||(X=X&&y.length==K.length)),he>1){y=y.map(function(be){return t.inspect(be)});var O=y.pop();xe&&(k=y.join(", ")+", and "+O),oe&&(k=y.join(", ")+", or "+O)}else k=t.inspect(y[0]);k=(he>1?"keys ":"key ")+k,k=(r(this,"contains")?"contain ":"have ")+k,this.assert(X,"expected #{this} to "+L+k,"expected #{this} to not "+L+k,Me.slice(0).sort(t.compareByInspect),K.sort(t.compareByInspect),!0)}e.addMethod("keys",fe),e.addMethod("key",fe);function x(y,E,N){N&&r(this,"message",N);var R=r(this,"object"),Y=r(this,"ssfi"),D=r(this,"message"),k=r(this,"negate")||!1;new e(R,D,Y,!0).is.a("function"),(y instanceof RegExp||typeof y=="string")&&(E=y,y=null);var L;try{R()}catch(O){L=O}var K=y===void 0&&E===void 0,X=!!(y&&E),se=!1,pe=!1;if(K||!K&&!k){var he="an error";y instanceof Error?he="#{exp}":y&&(he=t.checkError.getConstructorName(y)),this.assert(L,"expected #{this} to throw "+he,"expected #{this} to not throw an error but #{act} was thrown",y&&y.toString(),L instanceof Error?L.toString():typeof L=="string"?L:L&&t.checkError.getConstructorName(L))}if(y&&L){if(y instanceof Error){var oe=t.checkError.compatibleInstance(L,y);oe===k&&(X&&k?se=!0:this.assert(k,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(L&&!k?" but #{act} was thrown":""),y.toString(),L.toString()))}var xe=t.checkError.compatibleConstructor(L,y);xe===k&&(X&&k?se=!0:this.assert(k,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(L?" but #{act} was thrown":""),y instanceof Error?y.toString():y&&t.checkError.getConstructorName(y),L instanceof Error?L.toString():L&&t.checkError.getConstructorName(L)))}if(L&&E!==void 0&&E!==null){var Me="including";E instanceof RegExp&&(Me="matching");var He=t.checkError.compatibleMessage(L,E);He===k&&(X&&k?pe=!0:this.assert(k,"expected #{this} to throw error "+Me+" #{exp} but got #{act}","expected #{this} to throw error not "+Me+" #{exp}",E,t.checkError.getMessage(L)))}se&&pe&&this.assert(k,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(L?" but #{act} was thrown":""),y instanceof Error?y.toString():y&&t.checkError.getConstructorName(y),L instanceof Error?L.toString():L&&t.checkError.getConstructorName(L)),r(this,"object",L)}e.addMethod("throw",x),e.addMethod("throws",x),e.addMethod("Throw",x);function q(y,E){E&&r(this,"message",E);var N=r(this,"object"),R=r(this,"itself"),Y=typeof N=="function"&&!R?N.prototype[y]:N[y];this.assert(typeof Y=="function","expected #{this} to respond to "+t.inspect(y),"expected #{this} to not respond to "+t.inspect(y))}e.addMethod("respondTo",q),e.addMethod("respondsTo",q),e.addProperty("itself",function(){r(this,"itself",!0)});function J(y,E){E&&r(this,"message",E);var N=r(this,"object"),R=y(N);this.assert(R,"expected #{this} to satisfy "+t.objDisplay(y),"expected #{this} to not satisfy"+t.objDisplay(y),!r(this,"negate"),R)}e.addMethod("satisfy",J),e.addMethod("satisfies",J);function j(y,E,N){N&&r(this,"message",N);var R=r(this,"object"),Y=r(this,"message"),D=r(this,"ssfi");if(new e(R,Y,D,!0).is.a("number"),typeof y!="number"||typeof E!="number"){Y=Y?Y+": ":"";var k=E===void 0?", and a delta is required":"";throw new o(Y+"the arguments to closeTo or approximately must be numbers"+k,void 0,D)}this.assert(Math.abs(R-y)<=E,"expected #{this} to be close to "+y+" +/- "+E,"expected #{this} not to be close to "+y+" +/- "+E)}e.addMethod("closeTo",j),e.addMethod("approximately",j);function B(y,E,N,R,Y){if(!R){if(y.length!==E.length)return!1;E=E.slice()}return y.every(function(D,k){if(Y)return N?N(D,E[k]):D===E[k];if(!N){var L=E.indexOf(D);return L===-1?!1:(R||E.splice(L,1),!0)}return E.some(function(K,X){return N(D,K)?(R||E.splice(X,1),!0):!1})})}e.addMethod("members",function(y,E){E&&r(this,"message",E);var N=r(this,"object"),R=r(this,"message"),Y=r(this,"ssfi");new e(N,R,Y,!0).to.be.an("array"),new e(y,R,Y,!0).to.be.an("array");var D=r(this,"contains"),k=r(this,"ordered"),L,K,X;D?(L=k?"an ordered superset":"a superset",K="expected #{this} to be "+L+" of #{exp}",X="expected #{this} to not be "+L+" of #{exp}"):(L=k?"ordered members":"members",K="expected #{this} to have the same "+L+" as #{exp}",X="expected #{this} to not have the same "+L+" as #{exp}");var se=r(this,"deep")?r(this,"eql"):void 0;this.assert(B(y,N,se,D,k),K,X,y,N,!0)});function te(y,E){E&&r(this,"message",E);var N=r(this,"object"),R=r(this,"message"),Y=r(this,"ssfi"),D=r(this,"contains"),k=r(this,"deep"),L=r(this,"eql");new e(y,R,Y,!0).to.be.an("array"),D?this.assert(y.some(function(K){return N.indexOf(K)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",y,N):k?this.assert(y.some(function(K){return L(N,K)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",y,N):this.assert(y.indexOf(N)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",y,N)}e.addMethod("oneOf",te);function Q(y,E,N){N&&r(this,"message",N);var R=r(this,"object"),Y=r(this,"message"),D=r(this,"ssfi");new e(R,Y,D,!0).is.a("function");var k;E?(new e(y,Y,D,!0).to.have.property(E),k=y[E]):(new e(y,Y,D,!0).is.a("function"),k=y()),R();var L=E==null?y():y[E],K=E==null?k:"."+E;r(this,"deltaMsgObj",K),r(this,"initialDeltaValue",k),r(this,"finalDeltaValue",L),r(this,"deltaBehavior","change"),r(this,"realDelta",L!==k),this.assert(k!==L,"expected "+K+" to change","expected "+K+" to not change")}e.addMethod("change",Q),e.addMethod("changes",Q);function U(y,E,N){N&&r(this,"message",N);var R=r(this,"object"),Y=r(this,"message"),D=r(this,"ssfi");new e(R,Y,D,!0).is.a("function");var k;E?(new e(y,Y,D,!0).to.have.property(E),k=y[E]):(new e(y,Y,D,!0).is.a("function"),k=y()),new e(k,Y,D,!0).is.a("number"),R();var L=E==null?y():y[E],K=E==null?k:"."+E;r(this,"deltaMsgObj",K),r(this,"initialDeltaValue",k),r(this,"finalDeltaValue",L),r(this,"deltaBehavior","increase"),r(this,"realDelta",L-k),this.assert(L-k>0,"expected "+K+" to increase","expected "+K+" to not increase")}e.addMethod("increase",U),e.addMethod("increases",U);function Re(y,E,N){N&&r(this,"message",N);var R=r(this,"object"),Y=r(this,"message"),D=r(this,"ssfi");new e(R,Y,D,!0).is.a("function");var k;E?(new e(y,Y,D,!0).to.have.property(E),k=y[E]):(new e(y,Y,D,!0).is.a("function"),k=y()),new e(k,Y,D,!0).is.a("number"),R();var L=E==null?y():y[E],K=E==null?k:"."+E;r(this,"deltaMsgObj",K),r(this,"initialDeltaValue",k),r(this,"finalDeltaValue",L),r(this,"deltaBehavior","decrease"),r(this,"realDelta",k-L),this.assert(L-k<0,"expected "+K+" to decrease","expected "+K+" to not decrease")}e.addMethod("decrease",Re),e.addMethod("decreases",Re);function Z(y,E){E&&r(this,"message",E);var N=r(this,"deltaMsgObj"),R=r(this,"initialDeltaValue"),Y=r(this,"finalDeltaValue"),D=r(this,"deltaBehavior"),k=r(this,"realDelta"),L;D==="change"?L=Math.abs(Y-R)===Math.abs(y):L=k===Math.abs(y),this.assert(L,"expected "+N+" to "+D+" by "+y,"expected "+N+" to not "+D+" by "+y)}e.addMethod("by",Z),e.addProperty("extensible",function(){var y=r(this,"object"),E=y===Object(y)&&Object.isExtensible(y);this.assert(E,"expected #{this} to be extensible","expected #{this} to not be extensible")}),e.addProperty("sealed",function(){var y=r(this,"object"),E=y===Object(y)?Object.isSealed(y):!0;this.assert(E,"expected #{this} to be sealed","expected #{this} to not be sealed")}),e.addProperty("frozen",function(){var y=r(this,"object"),E=y===Object(y)?Object.isFrozen(y):!0;this.assert(E,"expected #{this} to be frozen","expected #{this} to not be frozen")}),e.addProperty("finite",function(y){var E=r(this,"object");this.assert(typeof E=="number"&&isFinite(E),"expected #{this} to be a finite number","expected #{this} to not be a finite number")})}});var hl=F((ow,dl)=>{dl.exports=function(a,t){a.expect=function(e,o){return new a.Assertion(e,o)},a.expect.fail=function(e,o,r,s){throw arguments.length<2&&(r=e,e=void 0),r=r||"expect.fail()",new a.AssertionError(r,{actual:e,expected:o,operator:s},a.expect.fail)}}});var gl=F((iw,ml)=>{ml.exports=function(a,t){var e=a.Assertion;function o(){function r(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new e(this.valueOf(),null,r):new e(this,null,r)}function s(c){Object.defineProperty(this,"should",{value:c,enumerable:!0,configurable:!0,writable:!0})}Object.defineProperty(Object.prototype,"should",{set:s,get:r,configurable:!0});var n={};return n.fail=function(c,l,h,b){throw arguments.length<2&&(h=c,c=void 0),h=h||"should.fail()",new a.AssertionError(h,{actual:c,expected:l,operator:b},n.fail)},n.equal=function(c,l,h){new e(c,h).to.equal(l)},n.Throw=function(c,l,h,b){new e(c,b).to.Throw(l,h)},n.exist=function(c,l){new e(c,l).to.exist},n.not={},n.not.equal=function(c,l,h){new e(c,h).to.not.equal(l)},n.not.Throw=function(c,l,h,b){new e(c,b).to.not.Throw(l,h)},n.not.exist=function(c,l){new e(c,l).to.not.exist},n.throw=n.Throw,n.not.throw=n.not.Throw,n}a.should=o,a.Should=o}});var yl=F((cw,bl)=>{bl.exports=function(a,t){var e=a.Assertion,o=t.flag;var r=a.assert=function(s,n){var c=new e(null,null,a.assert,!0);c.assert(s,n,"[ negation message unavailable ]")};r.fail=function(s,n,c,l){throw arguments.length<2&&(c=s,s=void 0),c=c||"assert.fail()",new a.AssertionError(c,{actual:s,expected:n,operator:l},r.fail)},r.isOk=function(s,n){new e(s,n,r.isOk,!0).is.ok},r.isNotOk=function(s,n){new e(s,n,r.isNotOk,!0).is.not.ok},r.equal=function(s,n,c){var l=new e(s,c,r.equal,!0);l.assert(n==o(l,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",n,s,!0)},r.notEqual=function(s,n,c){var l=new e(s,c,r.notEqual,!0);l.assert(n!=o(l,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",n,s,!0)},r.strictEqual=function(s,n,c){new e(s,c,r.strictEqual,!0).to.equal(n)},r.notStrictEqual=function(s,n,c){new e(s,c,r.notStrictEqual,!0).to.not.equal(n)},r.deepEqual=r.deepStrictEqual=function(s,n,c){new e(s,c,r.deepEqual,!0).to.eql(n)},r.notDeepEqual=function(s,n,c){new e(s,c,r.notDeepEqual,!0).to.not.eql(n)},r.isAbove=function(s,n,c){new e(s,c,r.isAbove,!0).to.be.above(n)},r.isAtLeast=function(s,n,c){new e(s,c,r.isAtLeast,!0).to.be.least(n)},r.isBelow=function(s,n,c){new e(s,c,r.isBelow,!0).to.be.below(n)},r.isAtMost=function(s,n,c){new e(s,c,r.isAtMost,!0).to.be.most(n)},r.isTrue=function(s,n){new e(s,n,r.isTrue,!0).is.true},r.isNotTrue=function(s,n){new e(s,n,r.isNotTrue,!0).to.not.equal(!0)},r.isFalse=function(s,n){new e(s,n,r.isFalse,!0).is.false},r.isNotFalse=function(s,n){new e(s,n,r.isNotFalse,!0).to.not.equal(!1)},r.isNull=function(s,n){new e(s,n,r.isNull,!0).to.equal(null)},r.isNotNull=function(s,n){new e(s,n,r.isNotNull,!0).to.not.equal(null)},r.isNaN=function(s,n){new e(s,n,r.isNaN,!0).to.be.NaN},r.isNotNaN=function(s,n){new e(s,n,r.isNotNaN,!0).not.to.be.NaN},r.exists=function(s,n){new e(s,n,r.exists,!0).to.exist},r.notExists=function(s,n){new e(s,n,r.notExists,!0).to.not.exist},r.isUndefined=function(s,n){new e(s,n,r.isUndefined,!0).to.equal(void 0)},r.isDefined=function(s,n){new e(s,n,r.isDefined,!0).to.not.equal(void 0)},r.isFunction=function(s,n){new e(s,n,r.isFunction,!0).to.be.a("function")},r.isNotFunction=function(s,n){new e(s,n,r.isNotFunction,!0).to.not.be.a("function")},r.isObject=function(s,n){new e(s,n,r.isObject,!0).to.be.a("object")},r.isNotObject=function(s,n){new e(s,n,r.isNotObject,!0).to.not.be.a("object")},r.isArray=function(s,n){new e(s,n,r.isArray,!0).to.be.an("array")},r.isNotArray=function(s,n){new e(s,n,r.isNotArray,!0).to.not.be.an("array")},r.isString=function(s,n){new e(s,n,r.isString,!0).to.be.a("string")},r.isNotString=function(s,n){new e(s,n,r.isNotString,!0).to.not.be.a("string")},r.isNumber=function(s,n){new e(s,n,r.isNumber,!0).to.be.a("number")},r.isNotNumber=function(s,n){new e(s,n,r.isNotNumber,!0).to.not.be.a("number")},r.isFinite=function(s,n){new e(s,n,r.isFinite,!0).to.be.finite},r.isBoolean=function(s,n){new e(s,n,r.isBoolean,!0).to.be.a("boolean")},r.isNotBoolean=function(s,n){new e(s,n,r.isNotBoolean,!0).to.not.be.a("boolean")},r.typeOf=function(s,n,c){new e(s,c,r.typeOf,!0).to.be.a(n)},r.notTypeOf=function(s,n,c){new e(s,c,r.notTypeOf,!0).to.not.be.a(n)},r.instanceOf=function(s,n,c){new e(s,c,r.instanceOf,!0).to.be.instanceOf(n)},r.notInstanceOf=function(s,n,c){new e(s,c,r.notInstanceOf,!0).to.not.be.instanceOf(n)},r.include=function(s,n,c){new e(s,c,r.include,!0).include(n)},r.notInclude=function(s,n,c){new e(s,c,r.notInclude,!0).not.include(n)},r.deepInclude=function(s,n,c){new e(s,c,r.deepInclude,!0).deep.include(n)},r.notDeepInclude=function(s,n,c){new e(s,c,r.notDeepInclude,!0).not.deep.include(n)},r.nestedInclude=function(s,n,c){new e(s,c,r.nestedInclude,!0).nested.include(n)},r.notNestedInclude=function(s,n,c){new e(s,c,r.notNestedInclude,!0).not.nested.include(n)},r.deepNestedInclude=function(s,n,c){new e(s,c,r.deepNestedInclude,!0).deep.nested.include(n)},r.notDeepNestedInclude=function(s,n,c){new e(s,c,r.notDeepNestedInclude,!0).not.deep.nested.include(n)},r.ownInclude=function(s,n,c){new e(s,c,r.ownInclude,!0).own.include(n)},r.notOwnInclude=function(s,n,c){new e(s,c,r.notOwnInclude,!0).not.own.include(n)},r.deepOwnInclude=function(s,n,c){new e(s,c,r.deepOwnInclude,!0).deep.own.include(n)},r.notDeepOwnInclude=function(s,n,c){new e(s,c,r.notDeepOwnInclude,!0).not.deep.own.include(n)},r.match=function(s,n,c){new e(s,c,r.match,!0).to.match(n)},r.notMatch=function(s,n,c){new e(s,c,r.notMatch,!0).to.not.match(n)},r.property=function(s,n,c){new e(s,c,r.property,!0).to.have.property(n)},r.notProperty=function(s,n,c){new e(s,c,r.notProperty,!0).to.not.have.property(n)},r.propertyVal=function(s,n,c,l){new e(s,l,r.propertyVal,!0).to.have.property(n,c)},r.notPropertyVal=function(s,n,c,l){new e(s,l,r.notPropertyVal,!0).to.not.have.property(n,c)},r.deepPropertyVal=function(s,n,c,l){new e(s,l,r.deepPropertyVal,!0).to.have.deep.property(n,c)},r.notDeepPropertyVal=function(s,n,c,l){new e(s,l,r.notDeepPropertyVal,!0).to.not.have.deep.property(n,c)},r.ownProperty=function(s,n,c){new e(s,c,r.ownProperty,!0).to.have.own.property(n)},r.notOwnProperty=function(s,n,c){new e(s,c,r.notOwnProperty,!0).to.not.have.own.property(n)},r.ownPropertyVal=function(s,n,c,l){new e(s,l,r.ownPropertyVal,!0).to.have.own.property(n,c)},r.notOwnPropertyVal=function(s,n,c,l){new e(s,l,r.notOwnPropertyVal,!0).to.not.have.own.property(n,c)},r.deepOwnPropertyVal=function(s,n,c,l){new e(s,l,r.deepOwnPropertyVal,!0).to.have.deep.own.property(n,c)},r.notDeepOwnPropertyVal=function(s,n,c,l){new e(s,l,r.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(n,c)},r.nestedProperty=function(s,n,c){new e(s,c,r.nestedProperty,!0).to.have.nested.property(n)},r.notNestedProperty=function(s,n,c){new e(s,c,r.notNestedProperty,!0).to.not.have.nested.property(n)},r.nestedPropertyVal=function(s,n,c,l){new e(s,l,r.nestedPropertyVal,!0).to.have.nested.property(n,c)},r.notNestedPropertyVal=function(s,n,c,l){new e(s,l,r.notNestedPropertyVal,!0).to.not.have.nested.property(n,c)},r.deepNestedPropertyVal=function(s,n,c,l){new e(s,l,r.deepNestedPropertyVal,!0).to.have.deep.nested.property(n,c)},r.notDeepNestedPropertyVal=function(s,n,c,l){new e(s,l,r.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(n,c)},r.lengthOf=function(s,n,c){new e(s,c,r.lengthOf,!0).to.have.lengthOf(n)},r.hasAnyKeys=function(s,n,c){new e(s,c,r.hasAnyKeys,!0).to.have.any.keys(n)},r.hasAllKeys=function(s,n,c){new e(s,c,r.hasAllKeys,!0).to.have.all.keys(n)},r.containsAllKeys=function(s,n,c){new e(s,c,r.containsAllKeys,!0).to.contain.all.keys(n)},r.doesNotHaveAnyKeys=function(s,n,c){new e(s,c,r.doesNotHaveAnyKeys,!0).to.not.have.any.keys(n)},r.doesNotHaveAllKeys=function(s,n,c){new e(s,c,r.doesNotHaveAllKeys,!0).to.not.have.all.keys(n)},r.hasAnyDeepKeys=function(s,n,c){new e(s,c,r.hasAnyDeepKeys,!0).to.have.any.deep.keys(n)},r.hasAllDeepKeys=function(s,n,c){new e(s,c,r.hasAllDeepKeys,!0).to.have.all.deep.keys(n)},r.containsAllDeepKeys=function(s,n,c){new e(s,c,r.containsAllDeepKeys,!0).to.contain.all.deep.keys(n)},r.doesNotHaveAnyDeepKeys=function(s,n,c){new e(s,c,r.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(n)},r.doesNotHaveAllDeepKeys=function(s,n,c){new e(s,c,r.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(n)},r.throws=function(s,n,c,l){(typeof n=="string"||n instanceof RegExp)&&(c=n,n=null);var h=new e(s,l,r.throws,!0).to.throw(n,c);return o(h,"object")},r.doesNotThrow=function(s,n,c,l){(typeof n=="string"||n instanceof RegExp)&&(c=n,n=null),new e(s,l,r.doesNotThrow,!0).to.not.throw(n,c)},r.operator=function(s,n,c,l){var h;switch(n){case"==":h=s==c;break;case"===":h=s===c;break;case">":h=s>c;break;case">=":h=s>=c;break;case"<":h=s<c;break;case"<=":h=s<=c;break;case"!=":h=s!=c;break;case"!==":h=s!==c;break;default:throw l=l&&l+": ",new a.AssertionError(l+'Invalid operator "'+n+'"',void 0,r.operator)}var b=new e(h,l,r.operator,!0);b.assert(o(b,"object")===!0,"expected "+t.inspect(s)+" to be "+n+" "+t.inspect(c),"expected "+t.inspect(s)+" to not be "+n+" "+t.inspect(c))},r.closeTo=function(s,n,c,l){new e(s,l,r.closeTo,!0).to.be.closeTo(n,c)},r.approximately=function(s,n,c,l){new e(s,l,r.approximately,!0).to.be.approximately(n,c)},r.sameMembers=function(s,n,c){new e(s,c,r.sameMembers,!0).to.have.same.members(n)},r.notSameMembers=function(s,n,c){new e(s,c,r.notSameMembers,!0).to.not.have.same.members(n)},r.sameDeepMembers=function(s,n,c){new e(s,c,r.sameDeepMembers,!0).to.have.same.deep.members(n)},r.notSameDeepMembers=function(s,n,c){new e(s,c,r.notSameDeepMembers,!0).to.not.have.same.deep.members(n)},r.sameOrderedMembers=function(s,n,c){new e(s,c,r.sameOrderedMembers,!0).to.have.same.ordered.members(n)},r.notSameOrderedMembers=function(s,n,c){new e(s,c,r.notSameOrderedMembers,!0).to.not.have.same.ordered.members(n)},r.sameDeepOrderedMembers=function(s,n,c){new e(s,c,r.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(n)},r.notSameDeepOrderedMembers=function(s,n,c){new e(s,c,r.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(n)},r.includeMembers=function(s,n,c){new e(s,c,r.includeMembers,!0).to.include.members(n)},r.notIncludeMembers=function(s,n,c){new e(s,c,r.notIncludeMembers,!0).to.not.include.members(n)},r.includeDeepMembers=function(s,n,c){new e(s,c,r.includeDeepMembers,!0).to.include.deep.members(n)},r.notIncludeDeepMembers=function(s,n,c){new e(s,c,r.notIncludeDeepMembers,!0).to.not.include.deep.members(n)},r.includeOrderedMembers=function(s,n,c){new e(s,c,r.includeOrderedMembers,!0).to.include.ordered.members(n)},r.notIncludeOrderedMembers=function(s,n,c){new e(s,c,r.notIncludeOrderedMembers,!0).to.not.include.ordered.members(n)},r.includeDeepOrderedMembers=function(s,n,c){new e(s,c,r.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(n)},r.notIncludeDeepOrderedMembers=function(s,n,c){new e(s,c,r.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(n)},r.oneOf=function(s,n,c){new e(s,c,r.oneOf,!0).to.be.oneOf(n)},r.changes=function(s,n,c,l){arguments.length===3&&typeof n=="function"&&(l=c,c=null),new e(s,l,r.changes,!0).to.change(n,c)},r.changesBy=function(s,n,c,l,h){if(arguments.length===4&&typeof n=="function"){var b=l;l=c,h=b}else arguments.length===3&&(l=c,c=null);new e(s,h,r.changesBy,!0).to.change(n,c).by(l)},r.doesNotChange=function(s,n,c,l){return arguments.length===3&&typeof n=="function"&&(l=c,c=null),new e(s,l,r.doesNotChange,!0).to.not.change(n,c)},r.changesButNotBy=function(s,n,c,l,h){if(arguments.length===4&&typeof n=="function"){var b=l;l=c,h=b}else arguments.length===3&&(l=c,c=null);new e(s,h,r.changesButNotBy,!0).to.change(n,c).but.not.by(l)},r.increases=function(s,n,c,l){return arguments.length===3&&typeof n=="function"&&(l=c,c=null),new e(s,l,r.increases,!0).to.increase(n,c)},r.increasesBy=function(s,n,c,l,h){if(arguments.length===4&&typeof n=="function"){var b=l;l=c,h=b}else arguments.length===3&&(l=c,c=null);new e(s,h,r.increasesBy,!0).to.increase(n,c).by(l)},r.doesNotIncrease=function(s,n,c,l){return arguments.length===3&&typeof n=="function"&&(l=c,c=null),new e(s,l,r.doesNotIncrease,!0).to.not.increase(n,c)},r.increasesButNotBy=function(s,n,c,l,h){if(arguments.length===4&&typeof n=="function"){var b=l;l=c,h=b}else arguments.length===3&&(l=c,c=null);new e(s,h,r.increasesButNotBy,!0).to.increase(n,c).but.not.by(l)},r.decreases=function(s,n,c,l){return arguments.length===3&&typeof n=="function"&&(l=c,c=null),new e(s,l,r.decreases,!0).to.decrease(n,c)},r.decreasesBy=function(s,n,c,l,h){if(arguments.length===4&&typeof n=="function"){var b=l;l=c,h=b}else arguments.length===3&&(l=c,c=null);new e(s,h,r.decreasesBy,!0).to.decrease(n,c).by(l)},r.doesNotDecrease=function(s,n,c,l){return arguments.length===3&&typeof n=="function"&&(l=c,c=null),new e(s,l,r.doesNotDecrease,!0).to.not.decrease(n,c)},r.doesNotDecreaseBy=function(s,n,c,l,h){if(arguments.length===4&&typeof n=="function"){var b=l;l=c,h=b}else arguments.length===3&&(l=c,c=null);return new e(s,h,r.doesNotDecreaseBy,!0).to.not.decrease(n,c).by(l)},r.decreasesButNotBy=function(s,n,c,l,h){if(arguments.length===4&&typeof n=="function"){var b=l;l=c,h=b}else arguments.length===3&&(l=c,c=null);new e(s,h,r.decreasesButNotBy,!0).to.decrease(n,c).but.not.by(l)};r.ifError=function(s){if(s)throw s},r.isExtensible=function(s,n){new e(s,n,r.isExtensible,!0).to.be.extensible},r.isNotExtensible=function(s,n){new e(s,n,r.isNotExtensible,!0).to.not.be.extensible},r.isSealed=function(s,n){new e(s,n,r.isSealed,!0).to.be.sealed},r.isNotSealed=function(s,n){new e(s,n,r.isNotSealed,!0).to.not.be.sealed},r.isFrozen=function(s,n){new e(s,n,r.isFrozen,!0).to.be.frozen},r.isNotFrozen=function(s,n){new e(s,n,r.isNotFrozen,!0).to.not.be.frozen},r.isEmpty=function(s,n){new e(s,n,r.isEmpty,!0).to.be.empty},r.isNotEmpty=function(s,n){new e(s,n,r.isNotEmpty,!0).to.not.be.empty};(function s(n,c){return r[c]=r[n],s})("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")}});var Vt=F(yt=>{var xl=[];yt.version="4.3.8";yt.AssertionError=os();var vl=cl();yt.use=function(a){return~xl.indexOf(a)||(a(yt,vl),xl.push(a)),yt};yt.util=vl;var Vb=or();yt.config=Vb;var Kb=ul();yt.use(Kb);var Hb=pl();yt.use(Hb);var Jb=hl();yt.use(Jb);var Yb=gl();yt.use(Yb);var Qb=yl();yt.use(Qb)});var Ge=F((uw,wl)=>{wl.exports=Vt()});var Lr=F((fw,Al)=>{"use strict";var Zb={$:"text","&":"simple_and","!":"simple_not"},Xb={"?":"optional","*":"zero_or_more","+":"one_or_more"},ey={"&":"semantic_and","!":"semantic_not"},Ir=class extends SyntaxError{constructor(t,e,o,r){super(t),this.expected=e,this.found=o,this.location=r,this.name="SyntaxError"}format(t){let e="Error: "+this.message;if(this.location){let o=null,r=t.find(l=>l.source===this.location.source);r&&(o=r.text.split(/\r\n|\n|\r/g));let s=this.location.start,n=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,c=this.location.source+":"+n.line+":"+n.column;if(o){let l=this.location.end,h="".padEnd(n.line.toString().length," "),b=o[s.line-1],A=(s.line===l.line?l.column:b.length+1)-s.column||1;e+=`
 --> `+c+`
`+h+` |
`+n.line+" | "+b+`
`+h+" | "+"".padEnd(s.column-1," ")+"".padEnd(A,"^")}else e+=`
 at `+c}return e}static buildMessage(t,e){function o(A){return A.codePointAt(0).toString(16).toUpperCase()}let r=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function s(A){return r?A.replace(r,P=>"\\u{"+o(P)+"}"):A}function n(A){return s(A.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,P=>"\\x0"+o(P)).replace(/[\x10-\x1F\x7F-\x9F]/g,P=>"\\x"+o(P)))}function c(A){return s(A.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,P=>"\\x0"+o(P)).replace(/[\x10-\x1F\x7F-\x9F]/g,P=>"\\x"+o(P)))}let l={literal(A){return'"'+n(A.text)+'"'},class(A){let P=A.parts.map(H=>Array.isArray(H)?c(H[0])+"-"+c(H[1]):c(H));return"["+(A.inverted?"^":"")+P.join("")+"]"+(A.unicode?"u":"")},any(){return"any character"},end(){return"end of input"},other(A){return A.description}};function h(A){return l[A.type](A)}function b(A){let P=A.map(h);if(P.sort(),P.length>0){let H=1;for(let me=1;me<P.length;me++)P[me-1]!==P[me]&&(P[H]=P[me],H++);P.length=H}switch(P.length){case 1:return P[0];case 2:return P[0]+" or "+P[1];default:return P.slice(0,-1).join(", ")+", or "+P[P.length-1]}}function T(A){return A?'"'+n(A)+'"':"end of input"}return"Expected "+b(t)+" but "+T(e)+" found."}};function ty(a,t){t=t!==void 0?t:{};let e={},o=t.grammarSource,r={Grammar:mi,ImportsAndSource:rg},s=mi,n="import",c=";",l=",",h="*",b="as",T="{",A="}",P="from",H="=",me="/",ye="@",_e=":",ie="|",ne="..",Pe="(",ve=")",Se=".",je=`
`,fe=`\r
`,x="/*",q="*/",J="//",j="\\",B="i",te='"',Q="'",U="[",Re="^",Z="]",y="p",E="_",N="u",R="-",Y="0",D="b",k="f",L="n",K="r",X="t",se="v",pe="x",he=/^[!$&]/,oe=/^[*-+?]/,xe=/^[!&]/,Me=/^[\0-\uD7FF\uE000-\uFFFF]/,He=/^[\uD800-\uDBFF]/,O=/^[\uDC00-\uDFFF]/,be=/^[\uD800-\uDFFF]/,Le=/^[\t\v-\f \p{Zs}\xA0\uFEFF]/u,tt=/^[\n\r\u2028\u2029]/,Ve=/^[\r\u2028-\u2029]/,Te=/^[\p{ID_Start}_]/u,Qe=/^[$\p{ID_Continue}]/u,jt=/^[\n\r"\\\u2028-\u2029]/,kt=/^[\n\r'\\\u2028-\u2029]/,ka=/^[a-z]/i,Da=/^[\n\r\\-\]\u2028-\u2029]/,Sr=/^["'\\]/,Tr=/^[0-9pux]/,Ua=/^[0-9]/,Bn=/^[0-9a-f]/i,Er=/^[{}]/,Dt=Xm(),Ba=Oe("import",!1),Pr=Oe(";",!1),_r=Oe(",",!1),_=Oe("*",!1),C=Oe("as",!1),W=Oe("{",!1),ue=Oe("}",!1),we=Oe("from",!1),Ce=Oe("=",!1),ke=Oe("/",!1),ze=Oe("@",!1),ut=Oe(":",!1),st=Je(["!","$","&"],!1,!1,!1),mt=Je([["*","+"],"?"],!1,!1,!1),Ct=Oe("|",!1),Xr=Oe("..",!1),ar=Oe("(",!1),Ut=Oe(")",!1),Bt=Oe(".",!1),zn=Je(["!","&"],!1,!1,!1),za=Je([["\0","\uD7FF"],["\uE000","\uFFFF"]],!1,!1,!1),Gn=Je([["\uD800","\uDBFF"]],!1,!1,!1),Ga=Je([["\uDC00","\uDFFF"]],!1,!1,!1),Wn=Je([["\uD800","\uDFFF"]],!1,!1,!1),ea=It("whitespace"),ih=Je(["	",["\v","\f"]," ","\\p{Zs}","\xA0","\uFEFF"],!1,!1,!0),ch=Je([`
`,"\r","\u2028","\u2029"],!1,!1,!1),lh=It("end of line"),uh=Oe(`
`,!1),fh=Oe(`\r
`,!1),ph=Je(["\r",["\u2028","\u2029"]],!1,!1,!1),dh=It("comment"),li=Oe("/*",!1),Cr=Oe("*/",!1),hh=Oe("//",!1),mh=It("identifier"),gh=Je(["\\p{ID_Start}","_"],!1,!1,!0),$r=Oe("\\",!1),bh=Je(["$","\\p{ID_Continue}"],!1,!1,!0),yh=It("literal"),ui=Oe("i",!1),xh=It("string"),fi=Oe('"',!1),pi=Oe("'",!1),vh=Je([`
`,"\r",'"',"\\",["\u2028","\u2029"]],!1,!1,!1),wh=Je([`
`,"\r","'","\\",["\u2028","\u2029"]],!1,!1,!1),Ah=It("character class"),Sh=Oe("[",!1),Th=Oe("^",!1),Eh=Oe("]",!1),Ph=Oe("p",!0),_h=Oe("_",!1),Ch=Je([["a","z"]],!1,!0,!1),Vn=Oe("u",!1),$h=Oe("-",!1),Oh=Je([`
`,"\r",["\\","]"],["\u2028","\u2029"]],!1,!1,!1),qh=Oe("0",!1),Rh=Je(['"',"'","\\"],!1,!1,!1),Ih=Oe("b",!1),Lh=Oe("f",!1),Mh=Oe("n",!1),Fh=Oe("r",!1),Nh=Oe("t",!1),jh=Oe("v",!1),kh=Je([["0","9"],"p","u","x"],!1,!1,!1),Dh=Oe("x",!1),Uh=Je([["0","9"]],!1,!1,!1),Bh=Je([["0","9"],["a","f"]],!1,!0,!1),zh=It("code block"),Wa=Je(["{","}"],!1,!1,!1);function Gh(i,p,g,m){return{type:"grammar",imports:i,topLevelInitializer:p,initializer:g,rules:m,location:Fe()}}function Wh(i,p){return[i,p]}function Vh(i){return{type:"top_level_initializer",code:i,codeLocation:Fe()}}function Kh(i){return{type:"top_level_initializer",code:i,codeLocation:Fe()}}function Hh(i,p){return{type:"grammar_import",what:i,from:p,location:Fe()}}function Jh(i){return{type:"grammar_import",what:[],from:i,location:Fe()}}function Yh(i,p){return p?(p.unshift(i),p):[i]}function Qh(i){return{type:"import_binding_default",binding:i[0],location:i[1]}}function Zh(i){return[{type:"import_binding_all",binding:i[0],location:i[1]}]}function Xh(){return[]}function em(i,p){return{type:"import_binding_rename",rename:i[0],renameLocation:i[1],binding:p[0],location:p[1]}}function tm(i){return{type:"import_binding",binding:i[0],location:i[1]}}function rm(i){return{type:"import_module_specifier",module:i,location:Fe()}}function am(i){return[i,Fe()]}function nm(i){return[i,Fe()]}function sm(i){return Fi.has(i[0])&&nr(`Binding identifier can't be a reserved word "${i[0]}"`,i[1]),i[0]}function om(i){return{type:"top_level_initializer",code:i[0],codeLocation:i[1],location:Fe()}}function im(i){return{type:"initializer",code:i[0],codeLocation:i[1],location:Fe()}}function cm(i,p,g){return{type:"rule",name:i[0],nameLocation:i[1],expression:p!==null?{type:"named",name:p,expression:g,location:Fe()}:g,location:Fe()}}function lm(i,p){return p.length>0?{type:"choice",alternatives:[i].concat(p),location:Fe()}:i}function um(i,p){return p!==null?{type:"action",expression:i,code:p[0],codeLocation:p[1],location:Fe()}:i}function fm(i,p){return p.length>0||i.type==="labeled"&&i.pick?{type:"sequence",elements:[i].concat(p),location:Fe()}:i}function pm(i,p,g){return g.type.startsWith("semantic_")&&nr('"@" cannot be used on a semantic predicate',i),{type:"labeled",label:p!==null?p[0]:null,labelLocation:p!==null?p[1]:i,pick:!0,expression:g,location:Fe()}}function dm(i,p){return{type:"labeled",label:i[0],labelLocation:i[1],expression:p,location:Fe()}}function hm(){return Fe()}function mm(i){return Fi.has(i[0])&&nr(`Label can't be a reserved word "${i[0]}"`,i[1]),i}function gm(i,p){return{type:Zb[i],expression:p,location:Fe()}}function bm(i,p){return{type:Xb[p],expression:i,location:Fe()}}function ym(i,p,g){let m=p[0],$=p[1];return $.type==="constant"&&$.value===0&&nr("The maximum count of repetitions of the rule must be > 0",$.location),{type:"repeated",min:m,max:$,expression:i,delimiter:g,location:Fe()}}function xm(i,p){return[i!==null?i:{type:"constant",value:0},p!==null?p:{type:"constant",value:null}]}function vm(i){return[null,i]}function wm(i){return{type:"constant",value:i,location:Fe()}}function Am(i){return{type:"variable",value:i[0],location:Fe()}}function Sm(i){return{type:"function",value:i[0],codeLocation:i[1],location:Fe()}}function Tm(i){return i.type==="labeled"||i.type==="sequence"?{type:"group",expression:i,location:Fe()}:i}function Em(i,p){return{type:"library_ref",name:p[0],library:i[0],libraryNumber:-1,location:Fe()}}function Pm(i){return{type:"rule_ref",name:i[0],location:Fe()}}function _m(i,p){return{type:ey[i],code:p[0],codeLocation:p[1],location:Fe()}}function Cm(i,p){return[i+p.join(""),Fe()]}function $m(i,p){return{type:"literal",value:i,ignoreCase:p!==null,location:Fe()}}function Om(i){return i.join("")}function qm(i){return i.join("")}function Rm(i,p,g){if(i&&p.length===0)if(g.unicode)p=[["\uD800","\uDFFF"]];else return{type:"any",location:Fe()};return{type:"class",parts:p.filter(m=>m!==""),inverted:!!i,ignoreCase:!!g.ignoreCase,location:Fe(),unicode:!!g.unicode||p.flat().some(m=>typeof m=="object"&&m.unicode||m.codePointAt(0)>65535)}}function Im(i){try{new RegExp(`[\\${i}]`,"u")}catch{nr("Invalid Unicode property escape")}return{type:"classEscape",value:i,unicode:!0,location:Fe()}}function Lm(i){let p=Object.fromEntries(i);return Object.keys(p).length!==i.length&&nr("Invalid flags"),p}function Mm(){return["ignoreCase",!0]}function Fm(){return["unicode",!0]}function Nm(i,p){return i.codePointAt(0)>p.codePointAt(0)&&nr("Invalid character range: "+Zm()+"."),[i,p]}function jm(){return""}function km(){return"\0"}function Dm(){return"\b"}function Um(){return"\f"}function Bm(){return`
`}function zm(){return"\r"}function Gm(){return"	"}function Wm(){return"\v"}function Vm(i){return String.fromCharCode(parseInt(i,16))}function Km(i){return String.fromCharCode(parseInt(i,16))}function Hm(i){return String.fromCodePoint(parseInt(i,16))}function Jm(){return{type:"any",location:Fe()}}function Ym(i){return[i,Fe()]}function Qm(i){return parseInt(i,10)}let f=t.peg$currPos|0,de=f,Or=[{line:1,column:1}],St=f,Va=t.peg$maxFailExpected||[],M=t.peg$silentFails|0,ta;if(t.startRule){if(!(t.startRule in r))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');s=r[t.startRule]}function Zm(){return a.substring(de,f)}function wv(){return de}function Av(){return{source:o,start:de,end:f}}function Fe(){return ra(de,f)}function Sv(i,p){throw p=p!==void 0?p:ra(de,f),hi([It(i)],a.substring(de,f),p)}function nr(i,p){throw p=p!==void 0?p:ra(de,f),tg(i,p)}function Ka(i=f){let p=a.codePointAt(i);return p===void 0?"":String.fromCodePoint(p)}function Oe(i,p){return{type:"literal",text:i,ignoreCase:p}}function Je(i,p,g,m){return{type:"class",parts:i,inverted:p,ignoreCase:g,unicode:m}}function Xm(){return{type:"any"}}function eg(){return{type:"end"}}function It(i){return{type:"other",description:i}}function di(i){let p=Or[i],g;if(p)return p;if(i>=Or.length)g=Or.length-1;else for(g=i;!Or[--g];);for(p=Or[g],p={line:p.line,column:p.column};g<i;)a.charCodeAt(g)===10?(p.line++,p.column=1):p.column++,g++;return Or[i]=p,p}function ra(i,p,g){let m=di(i),$=di(p),I={source:o,start:{offset:i,line:m.line,column:m.column},end:{offset:p,line:$.line,column:$.column}};return g&&o&&typeof o.offset=="function"&&(I.start=o.offset(I.start),I.end=o.offset(I.end)),I}function V(i){f<St||(f>St&&(St=f,Va=[]),Va.push(i))}function tg(i,p){return new Ir(i,null,null,p)}function hi(i,p,g){return new Ir(Ir.buildMessage(i,p),i,p,g)}function mi(){let i,p,g,m,$,I,ge,Ee,bt;if(i=f,p=gi(),g=f,m=Ae(),$=fg(),$!==e?g=$:(f=g,g=e),g===e&&(g=null),m=f,$=Ae(),I=pg(),I!==e?m=I:(f=m,m=e),m===e&&(m=null),$=Ae(),I=[],ge=f,Ee=Ai(),Ee!==e?(bt=Ae(),ge=Ee):(f=ge,ge=e),ge!==e)for(;ge!==e;)I.push(ge),ge=f,Ee=Ai(),Ee!==e?(bt=Ae(),ge=Ee):(f=ge,ge=e);else I=e;return I!==e?(de=i,i=Gh(p,g,m,I)):(f=i,i=e),i}function rg(){let i,p,g;return i=f,p=ng(),g=ag(),de=i,i=Wh(p,g),i}function ag(){let i,p,g,m;for(i=f,p=f,g=[],a.length>f?(m=a.charAt(f),f++):(m=e,M===0&&V(Dt));m!==e;)g.push(m),a.length>f?(m=a.charAt(f),f++):(m=e,M===0&&V(Dt));return p=a.substring(p,f),de=i,p=Vh(p),i=p,i}function ng(){let i,p,g;return i=f,p=f,g=gi(),p=a.substring(p,f),de=i,p=Kh(p),i=p,i}function gi(){let i,p;for(i=[],p=bi();p!==e;)i.push(p),p=bi();return i}function bi(){let i,p,g,m,$,I,ge,Ee,bt,qr;return i=f,p=Ae(),a.substr(f,6)===n?(g=n,f+=6):(g=e,M===0&&V(Ba)),g!==e?(m=Ae(),$=sg(),$!==e?(I=Ae(),ge=ig(),ge!==e?(Ee=f,bt=Ae(),a.charCodeAt(f)===59?(qr=c,f++):(qr=e,M===0&&V(Pr)),qr!==e?(bt=[bt,qr],Ee=bt):(f=Ee,Ee=e),Ee===e&&(Ee=null),de=i,i=Hh($,ge)):(f=i,i=e)):(f=i,i=e)):(f=i,i=e),i===e&&(i=f,p=Ae(),a.substr(f,6)===n?(g=n,f+=6):(g=e,M===0&&V(Ba)),g!==e?(m=Ae(),$=wi(),$!==e?(I=f,ge=Ae(),a.charCodeAt(f)===59?(Ee=c,f++):(Ee=e,M===0&&V(Pr)),Ee!==e?(ge=[ge,Ee],I=ge):(f=I,I=e),I===e&&(I=null),de=i,i=Jh($)):(f=i,i=e)):(f=i,i=e)),i}function sg(){let i,p,g,m,$,I,ge;return i=yi(),i===e&&(i=xi(),i===e&&(i=f,p=og(),p!==e?(g=f,m=Ae(),a.charCodeAt(f)===44?($=l,f++):($=e,M===0&&V(_r)),$!==e?(I=Ae(),ge=yi(),ge===e&&(ge=xi()),ge!==e?g=ge:(f=g,g=e)):(f=g,g=e),g===e&&(g=null),de=i,i=Yh(p,g)):(f=i,i=e))),i}function og(){let i,p;return i=f,p=Ha(),p!==e&&(de=i,p=Qh(p)),i=p,i}function yi(){let i,p,g,m,$,I;return i=f,a.charCodeAt(f)===42?(p=h,f++):(p=e,M===0&&V(_)),p!==e?(g=Ae(),a.substr(f,2)===b?(m=b,f+=2):(m=e,M===0&&V(C)),m!==e?($=Ae(),I=Ha(),I!==e?(de=i,i=Zh(I)):(f=i,i=e)):(f=i,i=e)):(f=i,i=e),i}function xi(){let i,p,g,m,$,I,ge,Ee;return i=f,a.charCodeAt(f)===123?(p=T,f++):(p=e,M===0&&V(W)),p!==e?(g=Ae(),a.charCodeAt(f)===125?(m=A,f++):(m=e,M===0&&V(ue)),m!==e?(de=i,i=Xh()):(f=i,i=e)):(f=i,i=e),i===e&&(i=f,a.charCodeAt(f)===123?(p=T,f++):(p=e,M===0&&V(W)),p!==e?(g=Ae(),m=cg(),m!==e?($=Ae(),I=f,a.charCodeAt(f)===44?(ge=l,f++):(ge=e,M===0&&V(_r)),ge!==e?(Ee=Ae(),ge=[ge,Ee],I=ge):(f=I,I=e),I===e&&(I=null),a.charCodeAt(f)===125?(ge=A,f++):(ge=e,M===0&&V(ue)),ge!==e?i=m:(f=i,i=e)):(f=i,i=e)):(f=i,i=e)),i}function ig(){let i,p,g,m;return i=f,a.substr(f,4)===P?(p=P,f+=4):(p=e,M===0&&V(we)),p!==e?(g=Ae(),m=wi(),m!==e?i=m:(f=i,i=e)):(f=i,i=e),i}function cg(){let i,p,g,m,$,I,ge;for(i=f,p=[],g=vi();g!==e;)p.push(g),g=f,m=f,$=Ae(),a.charCodeAt(f)===44?(I=l,f++):(I=e,M===0&&V(_r)),I!==e?(ge=Ae(),$=[$,I,ge],m=$):(f=m,m=e),m!==e?(m=vi(),m===e?(f=g,g=e):g=m):g=m;return p.length<1?(f=i,i=e):i=p,i}function vi(){let i,p,g,m,$,I;return i=f,p=lg(),p!==e?(g=Ae(),a.substr(f,2)===b?(m=b,f+=2):(m=e,M===0&&V(C)),m!==e?($=Ae(),I=Ha(),I!==e?(de=i,i=em(p,I)):(f=i,i=e)):(f=i,i=e)):(f=i,i=e),i===e&&(i=f,p=Ha(),p!==e&&(de=i,p=tm(p)),i=p),i}function wi(){let i,p;return i=f,p=na(),p!==e&&(de=i,p=rm(p)),i=p,i}function Ha(){let i,p;return i=f,p=ug(),p!==e&&(de=i,p=am(p)),i=p,i}function lg(){let i,p;return i=zt(),i===e&&(i=f,p=na(),p!==e&&(de=i,p=nm(p)),i=p),i}function ug(){let i,p;return i=f,p=zt(),p!==e&&(de=i,p=sm(p)),i=p,i}function fg(){let i,p,g,m,$;return i=f,a.charCodeAt(f)===123?(p=T,f++):(p=e,M===0&&V(W)),p!==e?(g=sa(),g!==e?(a.charCodeAt(f)===125?(m=A,f++):(m=e,M===0&&V(ue)),m!==e?($=as(),$!==e?(de=i,i=om(g)):(f=i,i=e)):(f=i,i=e)):(f=i,i=e)):(f=i,i=e),i}function pg(){let i,p,g;return i=f,p=sa(),p!==e?(g=as(),g!==e?(de=i,i=im(p)):(f=i,i=e)):(f=i,i=e),i}function Ai(){let i,p,g,m,$,I,ge,Ee;return i=f,p=zt(),p!==e?(g=Ae(),m=f,$=na(),$!==e?(I=Ae(),m=$):(f=m,m=e),m===e&&(m=null),a.charCodeAt(f)===61?($=H,f++):($=e,M===0&&V(Ce)),$!==e?(I=Ae(),ge=Kn(),ge!==e?(Ee=as(),Ee!==e?(de=i,i=cm(p,m,ge)):(f=i,i=e)):(f=i,i=e)):(f=i,i=e)):(f=i,i=e),i}function Kn(){let i,p,g,m,$,I,ge,Ee;if(i=f,p=Hn(),p!==e){for(g=[],m=f,$=Ae(),a.charCodeAt(f)===47?(I=me,f++):(I=e,M===0&&V(ke)),I!==e?(ge=Ae(),Ee=Hn(),Ee!==e?m=Ee:(f=m,m=e)):(f=m,m=e);m!==e;)g.push(m),m=f,$=Ae(),a.charCodeAt(f)===47?(I=me,f++):(I=e,M===0&&V(ke)),I!==e?(ge=Ae(),Ee=Hn(),Ee!==e?m=Ee:(f=m,m=e)):(f=m,m=e);de=i,i=lm(p,g)}else f=i,i=e;return i}function Hn(){let i,p,g,m,$;return i=f,p=dg(),p!==e?(g=f,m=Ae(),$=sa(),$!==e?g=$:(f=g,g=e),g===e&&(g=null),de=i,i=um(p,g)):(f=i,i=e),i}function dg(){let i,p,g,m,$,I;if(i=f,p=Jn(),p!==e){for(g=[],m=f,$=Ae(),I=Jn(),I!==e?m=I:(f=m,m=e);m!==e;)g.push(m),m=f,$=Ae(),I=Jn(),I!==e?m=I:(f=m,m=e);de=i,i=fm(p,g)}else f=i,i=e;return i}function Jn(){let i,p,g,m;return i=f,p=hg(),p!==e?(g=Si(),g===e&&(g=null),m=Yn(),m!==e?(de=i,i=pm(p,g,m)):(f=i,i=e)):(f=i,i=e),i===e&&(i=f,p=Si(),p!==e?(g=Yn(),g!==e?(de=i,i=dm(p,g)):(f=i,i=e)):(f=i,i=e),i===e&&(i=Yn())),i}function hg(){let i,p;return i=f,a.charCodeAt(f)===64?(p=ye,f++):(p=e,M===0&&V(ze)),p!==e&&(de=i,p=hm()),i=p,i}function Si(){let i,p,g,m,$;return i=f,p=zt(),p!==e?(g=Ae(),a.charCodeAt(f)===58?(m=_e,f++):(m=e,M===0&&V(ut)),m!==e?($=Ae(),de=i,i=mm(p)):(f=i,i=e)):(f=i,i=e),i}function Yn(){let i,p,g,m;return i=f,p=mg(),p!==e?(g=Ae(),m=Ti(),m!==e?(de=i,i=gm(p,m)):(f=i,i=e)):(f=i,i=e),i===e&&(i=Ti()),i}function mg(){let i;return i=a.charAt(f),he.test(i)?f++:(i=e,M===0&&V(st)),i}function Ti(){let i,p,g,m;return i=f,p=Zn(),p!==e?(g=Ae(),m=gg(),m!==e?(de=i,i=bm(p,m)):(f=i,i=e)):(f=i,i=e),i===e&&(i=bg(),i===e&&(i=Zn())),i}function gg(){let i;return i=a.charAt(f),oe.test(i)?f++:(i=e,M===0&&V(mt)),i}function bg(){let i,p,g,m,$,I,ge,Ee,bt,qr,ss,Gg;return i=f,p=Zn(),p!==e?(g=Ae(),a.charCodeAt(f)===124?(m=ie,f++):(m=e,M===0&&V(Ct)),m!==e?($=Ae(),I=yg(),I!==e?(ge=Ae(),Ee=f,a.charCodeAt(f)===44?(bt=l,f++):(bt=e,M===0&&V(_r)),bt!==e?(qr=Ae(),ss=Kn(),ss!==e?(Gg=Ae(),Ee=ss):(f=Ee,Ee=e)):(f=Ee,Ee=e),Ee===e&&(Ee=null),a.charCodeAt(f)===124?(bt=ie,f++):(bt=e,M===0&&V(Ct)),bt!==e?(de=i,i=ym(p,I,Ee)):(f=i,i=e)):(f=i,i=e)):(f=i,i=e)):(f=i,i=e),i}function yg(){let i,p,g,m,$,I;return i=f,p=Qn(),p===e&&(p=null),g=Ae(),a.substr(f,2)===ne?(m=ne,f+=2):(m=e,M===0&&V(Xr)),m!==e?($=Ae(),I=Qn(),I===e&&(I=null),de=i,i=xm(p,I)):(f=i,i=e),i===e&&(i=f,p=Qn(),p!==e&&(de=i,p=vm(p)),i=p),i}function Qn(){let i,p;return i=f,p=Ug(),p!==e&&(de=i,p=wm(p)),i=p,i===e&&(i=f,p=zt(),p!==e&&(de=i,p=Am(p)),i=p,i===e&&(i=f,p=sa(),p!==e&&(de=i,p=Sm(p)),i=p)),i}function Zn(){let i,p,g,m,$,I;return i=Pg(),i===e&&(i=_g(),i===e&&(i=kg(),i===e&&(i=xg(),i===e&&(i=vg(),i===e&&(i=f,a.charCodeAt(f)===40?(p=Pe,f++):(p=e,M===0&&V(ar)),p!==e?(g=Ae(),m=Kn(),m!==e?($=Ae(),a.charCodeAt(f)===41?(I=ve,f++):(I=e,M===0&&V(Ut)),I!==e?(de=i,i=Tm(m)):(f=i,i=e)):(f=i,i=e)):(f=i,i=e)))))),i}function xg(){let i,p,g,m,$,I,ge,Ee;return i=f,p=zt(),p!==e?(a.charCodeAt(f)===46?(g=Se,f++):(g=e,M===0&&V(Bt)),g!==e?(m=zt(),m!==e?(de=i,i=Em(p,m)):(f=i,i=e)):(f=i,i=e)):(f=i,i=e),i===e&&(i=f,p=zt(),p!==e?(g=f,M++,m=f,$=Ae(),I=f,ge=na(),ge!==e?(Ee=Ae(),ge=[ge,Ee],I=ge):(f=I,I=e),I===e&&(I=null),a.charCodeAt(f)===61?(ge=H,f++):(ge=e,M===0&&V(Ce)),ge!==e?($=[$,I,ge],m=$):(f=m,m=e),M--,m===e?g=void 0:(f=g,g=e),g!==e?(de=i,i=Pm(p)):(f=i,i=e)):(f=i,i=e)),i}function vg(){let i,p,g,m;return i=f,p=wg(),p!==e?(g=Ae(),m=sa(),m!==e?(de=i,i=_m(p,m)):(f=i,i=e)):(f=i,i=e),i}function wg(){let i;return i=a.charAt(f),xe.test(i)?f++:(i=e,M===0&&V(zn)),i}function gt(){let i;return i=Ag(),i===e&&(i=Sg()),i}function Ag(){let i;return i=a.charAt(f),Me.test(i)?f++:(i=e,M===0&&V(za)),i}function Sg(){let i,p,g,m;return i=f,p=f,g=a.charAt(f),He.test(g)?f++:(g=e,M===0&&V(Gn)),g!==e?(m=a.charAt(f),O.test(m)?f++:(m=e,M===0&&V(Ga)),m!==e?(g=[g,m],p=g):(f=p,p=e)):(f=p,p=e),p!==e?i=a.substring(i,f):i=p,i===e&&(i=a.charAt(f),be.test(i)?f++:(i=e,M===0&&V(Wn))),i}function Ja(){let i,p;return M++,i=Ka(),Le.test(i)?f+=i.length:(i=e,M===0&&V(ih)),M--,i===e&&(p=e,M===0&&V(ea)),i}function aa(){let i;return i=a.charAt(f),tt.test(i)?f++:(i=e,M===0&&V(ch)),i}function Ya(){let i,p;return M++,a.charCodeAt(f)===10?(i=je,f++):(i=e,M===0&&V(uh)),i===e&&(a.substr(f,2)===fe?(i=fe,f+=2):(i=e,M===0&&V(fh)),i===e&&(i=a.charAt(f),Ve.test(i)?f++:(i=e,M===0&&V(ph)))),M--,i===e&&(p=e,M===0&&V(lh)),i}function Ei(){let i,p;return M++,i=Tg(),i===e&&(i=_i()),M--,i===e&&(p=e,M===0&&V(dh)),i}function Tg(){let i,p,g,m,$,I;if(i=f,a.substr(f,2)===x?(p=x,f+=2):(p=e,M===0&&V(li)),p!==e){for(g=[],m=f,$=f,M++,a.substr(f,2)===q?(I=q,f+=2):(I=e,M===0&&V(Cr)),M--,I===e?$=void 0:(f=$,$=e),$!==e?(I=gt(),I!==e?($=[$,I],m=$):(f=m,m=e)):(f=m,m=e);m!==e;)g.push(m),m=f,$=f,M++,a.substr(f,2)===q?(I=q,f+=2):(I=e,M===0&&V(Cr)),M--,I===e?$=void 0:(f=$,$=e),$!==e?(I=gt(),I!==e?($=[$,I],m=$):(f=m,m=e)):(f=m,m=e);a.substr(f,2)===q?(m=q,f+=2):(m=e,M===0&&V(Cr)),m!==e?(p=[p,g,m],i=p):(f=i,i=e)}else f=i,i=e;return i}function Pi(){let i,p,g,m,$,I;if(i=f,a.substr(f,2)===x?(p=x,f+=2):(p=e,M===0&&V(li)),p!==e){for(g=[],m=f,$=f,M++,a.substr(f,2)===q?(I=q,f+=2):(I=e,M===0&&V(Cr)),I===e&&(I=aa()),M--,I===e?$=void 0:(f=$,$=e),$!==e?(I=gt(),I!==e?($=[$,I],m=$):(f=m,m=e)):(f=m,m=e);m!==e;)g.push(m),m=f,$=f,M++,a.substr(f,2)===q?(I=q,f+=2):(I=e,M===0&&V(Cr)),I===e&&(I=aa()),M--,I===e?$=void 0:(f=$,$=e),$!==e?(I=gt(),I!==e?($=[$,I],m=$):(f=m,m=e)):(f=m,m=e);a.substr(f,2)===q?(m=q,f+=2):(m=e,M===0&&V(Cr)),m!==e?(p=[p,g,m],i=p):(f=i,i=e)}else f=i,i=e;return i}function _i(){let i,p,g,m,$,I;if(i=f,a.substr(f,2)===J?(p=J,f+=2):(p=e,M===0&&V(hh)),p!==e){for(g=[],m=f,$=f,M++,I=aa(),M--,I===e?$=void 0:(f=$,$=e),$!==e?(I=gt(),I!==e?($=[$,I],m=$):(f=m,m=e)):(f=m,m=e);m!==e;)g.push(m),m=f,$=f,M++,I=aa(),M--,I===e?$=void 0:(f=$,$=e),$!==e?(I=gt(),I!==e?($=[$,I],m=$):(f=m,m=e)):(f=m,m=e);p=[p,g],i=p}else f=i,i=e;return i}function zt(){let i,p,g,m;if(M++,i=f,p=Eg(),p!==e){for(g=[],m=Ci();m!==e;)g.push(m),m=Ci();de=i,i=Cm(p,g)}else f=i,i=e;return M--,i===e&&(p=e,M===0&&V(mh)),i}function Eg(){let i,p,g;return i=Ka(),Te.test(i)?f+=i.length:(i=e,M===0&&V(gh)),i===e&&(i=f,a.charCodeAt(f)===92?(p=j,f++):(p=e,M===0&&V($r)),p!==e?(g=Mi(),g!==e?i=g:(f=i,i=e)):(f=i,i=e)),i}function Ci(){let i;return i=Ka(),Qe.test(i)?f+=i.length:(i=e,M===0&&V(bh)),i}function Pg(){let i,p,g;return M++,i=f,p=na(),p!==e?(a.charCodeAt(f)===105?(g=B,f++):(g=e,M===0&&V(ui)),g===e&&(g=null),de=i,i=$m(p,g)):(f=i,i=e),M--,i===e&&(p=e,M===0&&V(yh)),i}function na(){let i,p,g,m;if(M++,i=f,a.charCodeAt(f)===34?(p=te,f++):(p=e,M===0&&V(fi)),p!==e){for(g=[],m=$i();m!==e;)g.push(m),m=$i();a.charCodeAt(f)===34?(m=te,f++):(m=e,M===0&&V(fi)),m!==e?(de=i,i=Om(g)):(f=i,i=e)}else f=i,i=e;if(i===e)if(i=f,a.charCodeAt(f)===39?(p=Q,f++):(p=e,M===0&&V(pi)),p!==e){for(g=[],m=Oi();m!==e;)g.push(m),m=Oi();a.charCodeAt(f)===39?(m=Q,f++):(m=e,M===0&&V(pi)),m!==e?(de=i,i=qm(g)):(f=i,i=e)}else f=i,i=e;return M--,i===e&&(p=e,M===0&&V(xh)),i}function $i(){let i,p,g,m;return i=f,p=f,g=f,M++,m=a.charAt(f),jt.test(m)?f++:(m=e,M===0&&V(vh)),M--,m===e?g=void 0:(f=g,g=e),g!==e?(m=gt(),m!==e?(g=[g,m],p=g):(f=p,p=e)):(f=p,p=e),p!==e?i=a.substring(i,f):i=p,i===e&&(i=f,a.charCodeAt(f)===92?(p=j,f++):(p=e,M===0&&V($r)),p!==e?(g=ts(),g!==e?i=g:(f=i,i=e)):(f=i,i=e),i===e&&(i=es())),i}function Oi(){let i,p,g,m;return i=f,p=f,g=f,M++,m=a.charAt(f),kt.test(m)?f++:(m=e,M===0&&V(wh)),M--,m===e?g=void 0:(f=g,g=e),g!==e?(m=gt(),m!==e?(g=[g,m],p=g):(f=p,p=e)):(f=p,p=e),p!==e?i=a.substring(i,f):i=p,i===e&&(i=f,a.charCodeAt(f)===92?(p=j,f++):(p=e,M===0&&V($r)),p!==e?(g=ts(),g!==e?i=g:(f=i,i=e)):(f=i,i=e),i===e&&(i=es())),i}function _g(){let i,p,g,m,$,I;if(M++,i=f,a.charCodeAt(f)===91?(p=U,f++):(p=e,M===0&&V(Sh)),p!==e){for(a.charCodeAt(f)===94?(g=Re,f++):(g=e,M===0&&V(Th)),g===e&&(g=null),m=[],$=qi(),$===e&&($=Ii(),$===e&&($=Za()));$!==e;)m.push($),$=qi(),$===e&&($=Ii(),$===e&&($=Za()));a.charCodeAt(f)===93?($=Z,f++):($=e,M===0&&V(Eh)),$!==e?(I=Lg(),de=i,i=Rm(g,m,I)):(f=i,i=e)}else f=i,i=e;return M--,i===e&&(p=e,M===0&&V(Ah)),i}function qi(){let i,p,g;return i=f,a.charCodeAt(f)===92?(p=j,f++):(p=e,M===0&&V($r)),p!==e?(g=Cg(),g!==e?i=g:(f=i,i=e)):(f=i,i=e),i}function Cg(){let i,p,g,m,$,I,ge;return i=f,p=f,g=f,m=a.charAt(f),m.toLowerCase()===y?f++:(m=e,M===0&&V(Ph)),m!==e?(a.charCodeAt(f)===123?($=T,f++):($=e,M===0&&V(W)),$!==e?(I=$g(),I!==e?(a.charCodeAt(f)===125?(ge=A,f++):(ge=e,M===0&&V(ue)),ge!==e?(m=[m,$,I,ge],g=m):(f=g,g=e)):(f=g,g=e)):(f=g,g=e)):(f=g,g=e),g!==e?p=a.substring(p,f):p=g,p!==e&&(de=i,p=Im(p)),i=p,i}function $g(){let i,p,g,m;return i=f,p=Og(),p!==e?(a.charCodeAt(f)===61?(g=H,f++):(g=e,M===0&&V(Ce)),g!==e?(m=qg(),m!==e?(p=[p,g,m],i=p):(f=i,i=e)):(f=i,i=e)):(f=i,i=e),i===e&&(i=Rg()),i}function Og(){let i,p,g;if(i=f,p=[],g=Xn(),g!==e)for(;g!==e;)p.push(g),g=Xn();else p=e;return p!==e?i=a.substring(i,f):i=p,i}function qg(){let i,p,g;if(i=f,p=[],g=Qa(),g!==e)for(;g!==e;)p.push(g),g=Qa();else p=e;return p!==e?i=a.substring(i,f):i=p,i}function Rg(){let i,p,g;if(i=f,p=[],g=Qa(),g!==e)for(;g!==e;)p.push(g),g=Qa();else p=e;return p!==e?i=a.substring(i,f):i=p,i}function Qa(){let i;return i=Xn(),i===e&&(i=Xa()),i}function Xn(){let i;return i=Ig(),i===e&&(a.charCodeAt(f)===95?(i=E,f++):(i=e,M===0&&V(_h))),i}function Ig(){let i;return i=a.charAt(f),ka.test(i)?f++:(i=e,M===0&&V(Ch)),i}function Lg(){let i,p,g;for(i=f,p=[],g=Ri();g!==e;)p.push(g),g=Ri();return de=i,p=Lm(p),i=p,i}function Ri(){let i,p;return i=f,a.charCodeAt(f)===105?(p=B,f++):(p=e,M===0&&V(ui)),p!==e&&(de=i,p=Mm()),i=p,i===e&&(i=f,a.charCodeAt(f)===117?(p=N,f++):(p=e,M===0&&V(Vn)),p!==e&&(de=i,p=Fm()),i=p),i}function Ii(){let i,p,g,m;return i=f,p=Za(),p!==e?(a.charCodeAt(f)===45?(g=R,f++):(g=e,M===0&&V($h)),g!==e?(m=Za(),m!==e?(de=i,i=Nm(p,m)):(f=i,i=e)):(f=i,i=e)):(f=i,i=e),i}function Za(){let i,p,g,m;return i=f,p=f,g=f,M++,m=a.charAt(f),Da.test(m)?f++:(m=e,M===0&&V(Oh)),M--,m===e?g=void 0:(f=g,g=e),g!==e?(m=gt(),m!==e?(g=[g,m],p=g):(f=p,p=e)):(f=p,p=e),p!==e?i=a.substring(i,f):i=p,i===e&&(i=f,a.charCodeAt(f)===92?(p=j,f++):(p=e,M===0&&V($r)),p!==e?(g=ts(),g!==e?i=g:(f=i,i=e)):(f=i,i=e),i===e&&(i=es())),i}function es(){let i,p,g;return i=f,a.charCodeAt(f)===92?(p=j,f++):(p=e,M===0&&V($r)),p!==e?(g=Ya(),g!==e?(de=i,i=jm()):(f=i,i=e)):(f=i,i=e),i}function ts(){let i,p,g,m;return i=Mg(),i===e&&(i=f,a.charCodeAt(f)===48?(p=Y,f++):(p=e,M===0&&V(qh)),p!==e?(g=f,M++,m=Xa(),M--,m===e?g=void 0:(f=g,g=e),g!==e?(de=i,i=km()):(f=i,i=e)):(f=i,i=e),i===e&&(i=jg(),i===e&&(i=Mi()))),i}function Mg(){let i;return i=Li(),i===e&&(i=Fg()),i}function Li(){let i,p;return i=a.charAt(f),Sr.test(i)?f++:(i=e,M===0&&V(Rh)),i===e&&(i=f,a.charCodeAt(f)===98?(p=D,f++):(p=e,M===0&&V(Ih)),p!==e&&(de=i,p=Dm()),i=p,i===e&&(i=f,a.charCodeAt(f)===102?(p=k,f++):(p=e,M===0&&V(Lh)),p!==e&&(de=i,p=Um()),i=p,i===e&&(i=f,a.charCodeAt(f)===110?(p=L,f++):(p=e,M===0&&V(Mh)),p!==e&&(de=i,p=Bm()),i=p,i===e&&(i=f,a.charCodeAt(f)===114?(p=K,f++):(p=e,M===0&&V(Fh)),p!==e&&(de=i,p=zm()),i=p,i===e&&(i=f,a.charCodeAt(f)===116?(p=X,f++):(p=e,M===0&&V(Nh)),p!==e&&(de=i,p=Gm()),i=p,i===e&&(i=f,a.charCodeAt(f)===118?(p=se,f++):(p=e,M===0&&V(jh)),p!==e&&(de=i,p=Wm()),i=p)))))),i}function Fg(){let i,p,g,m;return i=f,p=f,g=f,M++,m=Ng(),m===e&&(m=aa()),M--,m===e?g=void 0:(f=g,g=e),g!==e?(m=gt(),m!==e?(g=[g,m],p=g):(f=p,p=e)):(f=p,p=e),p!==e?i=a.substring(i,f):i=p,i}function Ng(){let i;return i=Li(),i===e&&(i=a.charAt(f),Tr.test(i)?f++:(i=e,M===0&&V(kh))),i}function jg(){let i,p,g,m,$,I;return i=f,a.charCodeAt(f)===120?(p=pe,f++):(p=e,M===0&&V(Dh)),p!==e?(g=f,m=f,$=Gt(),$!==e?(I=Gt(),I!==e?($=[$,I],m=$):(f=m,m=e)):(f=m,m=e),m!==e?g=a.substring(g,f):g=m,g!==e?(de=i,i=Vm(g)):(f=i,i=e)):(f=i,i=e),i}function Mi(){let i,p,g,m,$,I,ge,Ee;if(i=f,a.charCodeAt(f)===117?(p=N,f++):(p=e,M===0&&V(Vn)),p!==e?(g=f,m=f,$=Gt(),$!==e?(I=Gt(),I!==e?(ge=Gt(),ge!==e?(Ee=Gt(),Ee!==e?($=[$,I,ge,Ee],m=$):(f=m,m=e)):(f=m,m=e)):(f=m,m=e)):(f=m,m=e),m!==e?g=a.substring(g,f):g=m,g!==e?(de=i,i=Km(g)):(f=i,i=e)):(f=i,i=e),i===e)if(i=f,a.charCodeAt(f)===117?(p=N,f++):(p=e,M===0&&V(Vn)),p!==e)if(a.charCodeAt(f)===123?(g=T,f++):(g=e,M===0&&V(W)),g!==e){if(m=f,$=[],I=Gt(),I!==e)for(;I!==e;)$.push(I),I=Gt();else $=e;$!==e?m=a.substring(m,f):m=$,m!==e?(a.charCodeAt(f)===125?($=A,f++):($=e,M===0&&V(ue)),$!==e?(de=i,i=Hm(m)):(f=i,i=e)):(f=i,i=e)}else f=i,i=e;else f=i,i=e;return i}function Xa(){let i;return i=a.charAt(f),Ua.test(i)?f++:(i=e,M===0&&V(Uh)),i}function Gt(){let i;return i=a.charAt(f),Bn.test(i)?f++:(i=e,M===0&&V(Bh)),i}function kg(){let i,p;return i=f,a.charCodeAt(f)===46?(p=Se,f++):(p=e,M===0&&V(Bt)),p!==e&&(de=i,p=Jm()),i=p,i}function sa(){let i,p,g,m;return M++,i=f,a.charCodeAt(f)===123?(p=T,f++):(p=e,M===0&&V(W)),p!==e?(g=Dg(),a.charCodeAt(f)===125?(m=A,f++):(m=e,M===0&&V(ue)),m!==e?i=g:(f=i,i=e)):(f=i,i=e),M--,i===e&&(p=e,M===0&&V(zh)),i}function Dg(){let i,p;return i=f,p=rs(),de=i,p=Ym(p),i=p,i}function rs(){let i,p,g,m,$,I;if(i=f,p=[],g=[],m=f,$=f,M++,I=a.charAt(f),Er.test(I)?f++:(I=e,M===0&&V(Wa)),M--,I===e?$=void 0:(f=$,$=e),$!==e?(I=gt(),I!==e?($=[$,I],m=$):(f=m,m=e)):(f=m,m=e),m!==e)for(;m!==e;)g.push(m),m=f,$=f,M++,I=a.charAt(f),Er.test(I)?f++:(I=e,M===0&&V(Wa)),M--,I===e?$=void 0:(f=$,$=e),$!==e?(I=gt(),I!==e?($=[$,I],m=$):(f=m,m=e)):(f=m,m=e);else g=e;for(g===e&&(g=f,a.charCodeAt(f)===123?(m=T,f++):(m=e,M===0&&V(W)),m!==e?($=rs(),a.charCodeAt(f)===125?(I=A,f++):(I=e,M===0&&V(ue)),I!==e?(m=[m,$,I],g=m):(f=g,g=e)):(f=g,g=e));g!==e;){if(p.push(g),g=[],m=f,$=f,M++,I=a.charAt(f),Er.test(I)?f++:(I=e,M===0&&V(Wa)),M--,I===e?$=void 0:(f=$,$=e),$!==e?(I=gt(),I!==e?($=[$,I],m=$):(f=m,m=e)):(f=m,m=e),m!==e)for(;m!==e;)g.push(m),m=f,$=f,M++,I=a.charAt(f),Er.test(I)?f++:(I=e,M===0&&V(Wa)),M--,I===e?$=void 0:(f=$,$=e),$!==e?(I=gt(),I!==e?($=[$,I],m=$):(f=m,m=e)):(f=m,m=e);else g=e;g===e&&(g=f,a.charCodeAt(f)===123?(m=T,f++):(m=e,M===0&&V(W)),m!==e?($=rs(),a.charCodeAt(f)===125?(I=A,f++):(I=e,M===0&&V(ue)),I!==e?(m=[m,$,I],g=m):(f=g,g=e)):(f=g,g=e))}return i=a.substring(i,f),i}function Ug(){let i,p,g,m;if(i=f,p=f,g=[],m=Xa(),m!==e)for(;m!==e;)g.push(m),m=Xa();else g=e;return g!==e?p=a.substring(p,f):p=g,p!==e&&(de=i,p=Qm(p)),i=p,i}function Ae(){let i,p;for(i=[],p=Ja(),p===e&&(p=Ya(),p===e&&(p=Ei()));p!==e;)i.push(p),p=Ja(),p===e&&(p=Ya(),p===e&&(p=Ei()));return i}function Bg(){let i,p;for(i=[],p=Ja(),p===e&&(p=Pi());p!==e;)i.push(p),p=Ja(),p===e&&(p=Pi());return i}function as(){let i,p,g,m;if(i=[],p=f,g=Ae(),a.charCodeAt(f)===59?(m=c,f++):(m=e,M===0&&V(Pr)),m!==e?(g=[g,m],p=g):(f=p,p=e),p!==e)for(;p!==e;)i.push(p),p=f,g=Ae(),a.charCodeAt(f)===59?(m=c,f++):(m=e,M===0&&V(Pr)),m!==e?(g=[g,m],p=g):(f=p,p=e);else i=e;return i===e&&(i=f,p=Bg(),g=_i(),g===e&&(g=null),m=Ya(),m!==e?(p=[p,g,m],i=p):(f=i,i=e),i===e&&(i=f,p=Ae(),g=zg(),g!==e?(p=[p,g],i=p):(f=i,i=e))),i}function zg(){let i,p;return i=f,M++,a.length>f?(p=a.charAt(f),f++):(p=e,M===0&&V(Dt)),M--,p===e?i=void 0:(f=i,i=e),i}let Fi=new Set(t.reservedWords);ta=s();let ns=ta!==e&&f===a.length;function Ni(){throw ta!==e&&f<a.length&&V(eg()),hi(Va,St<a.length?Ka(St):null,St<a.length?ra(St,St+1):ra(St,St))}if(t.peg$library)return{peg$result:ta,peg$currPos:f,peg$FAILED:e,peg$maxFailExpected:Va,peg$maxFailPos:St,peg$success:ns,peg$throw:ns?void 0:Ni};if(ns)return ta;Ni()}Al.exports={StartRules:["Grammar","ImportsAndSource"],SyntaxError:Ir,parse:ty}});var pa=F((pw,Sl)=>{"use strict";var xs=class{constructor(t,e){this.source=t,this.start=e}toString(){return String(this.source)}offset(t){return{line:t.line+this.start.line-1,column:t.line===1?t.column+this.start.column-1:t.column,offset:t.offset+this.start.offset}}static offsetStart(t){return t.source&&typeof t.source.offset=="function"?t.source.offset(t.start):t.start}static offsetEnd(t){return t.source&&typeof t.source.offset=="function"?t.source.offset(t.end):t.end}};Sl.exports=xs});var sn=F((dw,El)=>{"use strict";var Tl=pa(),vs=class extends SyntaxError{constructor(t,e,o){super(t),this.name="GrammarError",this.location=e,o===void 0&&(o=[]),this.diagnostics=o,this.stage=null,this.problems=[["error",t,e,o]]}toString(){let t=super.toString();this.location&&(t+=`
 at `,this.location.source!==void 0&&this.location.source!==null&&(t+=`${this.location.source}:`),t+=`${this.location.start.line}:${this.location.start.column}`);for(let e of this.diagnostics)t+=`
 from `,e.location.source!==void 0&&e.location.source!==null&&(t+=`${e.location.source}:`),t+=`${e.location.start.line}:${e.location.start.column}: ${e.message}`;return t}format(t){let e=t.map(({source:s,text:n})=>({source:s,text:n!=null?String(n).split(/\r\n|\n|\r/g):[]}));function o(s,n,c=""){let l="",h=e.find(({source:A})=>A===s.source),b=s.start,T=Tl.offsetStart(s);if(h){let A=s.end,P=h.text[b.line-1],me=(b.line===A.line?A.column:P.length+1)-b.column||1;c&&(l+=`
note: ${c}`),l+=`
 --> ${s.source}:${T.line}:${T.column}
${"".padEnd(n)} |
${T.line.toString().padStart(n)} | ${P}
${"".padEnd(n)} | ${"".padEnd(b.column-1)}${"".padEnd(me,"^")}`}else l+=`
 at ${s.source}:${T.line}:${T.column}`,c&&(l+=`: ${c}`);return l}function r(s,n,c,l=[]){let h=-1/0;c?h=l.reduce((T,{location:A})=>Math.max(T,Tl.offsetStart(A).line),c.start.line):h=Math.max.apply(null,l.map(T=>T.location.start.line)),h=h.toString().length;let b=`${s}: ${n}`;c&&(b+=o(c,h));for(let T of l)b+=o(T.location,h,T.message);return b}return this.problems.filter(s=>s[0]!=="info").map(s=>r(...s)).join(`

`)}};El.exports=vs});var pt=F((hw,Pl)=>{"use strict";var ry={build(a){function t(n,...c){return a[n.type](n,...c)}function e(){}function o(n,...c){return t(n.expression,...c)}function r(n){return function(c,...l){c[n].forEach(h=>t(h,...l))}}let s={grammar(n,...c){for(let l of n.imports)t(l,...c);if(n.topLevelInitializer)if(Array.isArray(n.topLevelInitializer))for(let l of n.topLevelInitializer)t(l,...c);else t(n.topLevelInitializer,...c);if(n.initializer)if(Array.isArray(n.initializer))for(let l of n.initializer)t(l,...c);else t(n.initializer,...c);n.rules.forEach(l=>t(l,...c))},grammar_import:e,top_level_initializer:e,initializer:e,rule:o,named:o,choice:r("alternatives"),action:o,sequence:r("elements"),labeled:o,text:o,simple_and:o,simple_not:o,optional:o,zero_or_more:o,one_or_more:o,repeated(n,...c){return n.delimiter&&t(n.delimiter,...c),t(n.expression,...c)},group:o,semantic_and:e,semantic_not:e,rule_ref:e,library_ref:e,literal:e,class:e,any:e};return Object.keys(s).forEach(n=>{Object.prototype.hasOwnProperty.call(a,n)||(a[n]=s[n])}),t}};Pl.exports=ry});var Lt=F((mw,$l)=>{"use strict";var ay=pt();function _l(a,t){if(!(a&&t))return a||t;let e=Array.isArray(a)?a:[a];return e.push(t),e}var Cl={findRule(a,t){for(let e=0;e<a.rules.length;e++)if(a.rules[e].name===t)return a.rules[e]},indexOfRule(a,t){for(let e=0;e<a.rules.length;e++)if(a.rules[e].name===t)return e;return-1},alwaysConsumesOnSuccess(a,t){function e(){return!0}function o(){return!1}let r=ay.build({choice(s){return s.alternatives.every(r)},sequence(s){return s.elements.some(r)},simple_and:o,simple_not:o,optional:o,zero_or_more:o,repeated(s){let n=s.min?s.min:s.max;return n.type!=="constant"||n.value===0?!1:!!(r(s.expression)||n.value>1&&s.delimiter&&r(s.delimiter))},semantic_and:o,semantic_not:o,rule_ref(s){let n=Cl.findRule(a,s.name);return n?r(n):void 0},library_ref:o,literal(s){return s.value!==""},class:e,any:e});return r(t)},combine(a){return a.reduce((t,e)=>(t.topLevelInitializer=_l(t.topLevelInitializer,e.topLevelInitializer),t.initializer=_l(t.initializer,e.initializer),t.rules=t.rules.concat(e.rules),t))}};$l.exports=Cl});var ws=F((gw,Ol)=>{"use strict";function ny(a){let t=0;for(let e of a.imports){for(let o of e.what){let r;switch(o.type){case"import_binding_all":continue;case"import_binding_default":break;case"import_binding":r=o.binding;break;case"import_binding_rename":r=o.rename;break;default:throw new TypeError("Unknown binding type")}a.rules.push({type:"rule",name:o.binding,nameLocation:o.location,expression:{type:"library_ref",name:r,library:e.from.module,libraryNumber:t,location:o.location},location:e.from.location})}t++}}Ol.exports=ny});var As=F((bw,ql)=>{"use strict";var sy=pt();function oy(a,t){let e=0;for(let o of a.imports){for(let r of o.what)if(r.type==="import_binding_all"&&r.binding===t)return e;e++}return-1}function iy(a,t,e){sy.build({library_ref(r){r.libraryNumber===-1&&(r.libraryNumber=oy(a,r.library),r.libraryNumber===-1&&e.error(`Unknown module "${r.library}"`,r.location))}})(a)}ql.exports=iy});var on=F((yw,Rl)=>{"use strict";var cy={PUSH:0,PUSH_EMPTY_STRING:35,PUSH_UNDEFINED:1,PUSH_NULL:2,PUSH_FAILED:3,PUSH_EMPTY_ARRAY:4,PUSH_CURR_POS:5,POP:6,POP_CURR_POS:7,POP_N:8,NIP:9,APPEND:10,WRAP:11,TEXT:12,PLUCK:36,IF:13,IF_ERROR:14,IF_NOT_ERROR:15,IF_LT:30,IF_GE:31,IF_LT_DYNAMIC:32,IF_GE_DYNAMIC:33,WHILE_NOT_ERROR:16,MATCH_ANY:17,MATCH_STRING:18,MATCH_STRING_IC:19,MATCH_CHAR_CLASS:20,MATCH_UNICODE_CLASS:42,MATCH_REGEXP:20,ACCEPT_N:21,ACCEPT_STRING:22,FAIL:23,LOAD_SAVED_POS:24,UPDATE_SAVED_POS:25,CALL:26,RULE:27,LIBRARY_RULE:41,SILENT_FAILS_ON:28,SILENT_FAILS_OFF:29,SOURCE_MAP_PUSH:37,SOURCE_MAP_POP:38,SOURCE_MAP_LABEL_PUSH:39,SOURCE_MAP_LABEL_POP:40};Rl.exports=cy});var Ts=F((xw,Il)=>{"use strict";var Ss=class{constructor(t){this.options={stringify:String,convert:e=>e,...t},this.items=[],this.offsets=Object.create(null)}add(t){let e=this.options.convert(t);if(!e)return-1;let o=this.options.stringify(e),r=this.offsets[o];return r===void 0&&(r=this.items.push(e)-1,this.offsets[o]=r),r}get(t){return this.items[t]}map(t){return this.items.map(t)}};Il.exports=Ss});var da=F((vw,Ll)=>{"use strict";var ly=pt(),uy=Lt(),fy=sn(),Mt=1,Tt=0,Et=-1;function cn(a){function t(n){return n.match=Tt}function e(n){return s(n.expression),n.match=Mt}function o(n){return n.match=s(n.expression)}function r(n,c){let l=n.length,h=0,b=0;for(let T=0;T<l;++T){let A=s(n[T]);A===Mt&&++h,A===Et&&++b}return h===l?Mt:c?b===l?Et:Tt:b>0?Et:Tt}let s=ly.build({rule(n){let c,l=0;if(typeof n.match>"u"){n.match=Tt;do if(c=n.match,n.match=s(n.expression),++l>6)throw new fy("Infinity cycle detected when trying to evaluate node match result",n.location);while(c!==n.match)}return n.match},named:o,choice(n){return n.match=r(n.alternatives,!0)},action:o,sequence(n){return n.match=r(n.elements,!1)},labeled:o,text:o,simple_and:o,simple_not(n){return n.match=-s(n.expression)},optional:e,zero_or_more:e,one_or_more:o,repeated(n){let c=s(n.expression),l=n.delimiter?s(n.delimiter):Et,h=n.min?n.min:n.max;return h.type!=="constant"||n.max.type!=="constant"?n.match=Tt:n.max.value===0||n.max.value!==null&&h.value>n.max.value?n.match=Et:c===Et?n.match=h.value===0?Mt:Et:c===Mt?n.delimiter&&h.value>=2?n.match=l:n.match=Mt:n.delimiter&&h.value>=2?n.match=l===Et?Et:Tt:n.match=h.value===0?Mt:Tt},group:o,semantic_and:t,semantic_not:t,rule_ref(n){let c=uy.findRule(a,n.name);return c?n.match=s(c):Tt},library_ref(){return 0},literal(n){let c=n.value.length===0?Mt:Tt;return n.match=c},class(n){let c=n.parts.length===0?Et:Tt;return n.match=c},any:t});s(a)}cn.ALWAYS_MATCH=Mt;cn.SOMETIMES_MATCH=Tt;cn.NEVER_MATCH=Et;Ll.exports=cn});var Es=F((ww,Fl)=>{"use strict";var py=Lt(),ee=on(),dy=pt(),ln=Ts(),{ALWAYS_MATCH:lr,SOMETIMES_MATCH:ha,NEVER_MATCH:Ml}=da();function hy(a,t){let e=new ln,o=new ln({stringify:JSON.stringify,convert:x=>({value:x.parts,inverted:x.inverted,ignoreCase:x.ignoreCase,unicode:x.unicode})}),r=new ln({stringify:JSON.stringify}),s=new ln,n=[],c=[];function l(x,q,J){let j={predicate:x,params:q,body:J.code,location:J.codeLocation},B=JSON.stringify(j),te=n.findIndex(Q=>JSON.stringify(Q)===B);return te===-1?n.push(j)-1:te}function h(x){return c.push(x)-1}function b(x){let q={};return Object.keys(x).forEach(J=>{q[J]=x[J]}),q}function T(x,...q){return x.concat(...q)}function A(x,q,J,j){return x===lr?J:x===Ml?j:q.concat([J.length,j.length],J,j)}function P(x,q){return x.concat([q.length],q)}function H(x,q,J,j){let B=Object.keys(J).map(te=>j-J[te]);return[ee.CALL,x,q,B.length].concat(B)}function me(x,q,J){let j=x.match||0;return T([ee.PUSH_CURR_POS],[ee.SILENT_FAILS_ON],fe(x,{sp:J.sp+1,env:b(J.env),action:null}),[ee.SILENT_FAILS_OFF],A(q?-j:j,[q?ee.IF_ERROR:ee.IF_NOT_ERROR],T([ee.POP],[q?ee.POP:ee.POP_CURR_POS],[ee.PUSH_UNDEFINED]),T([ee.POP],[q?ee.POP_CURR_POS:ee.POP],[ee.PUSH_FAILED])))}function ye(x,q,J){let j=l(!0,Object.keys(J.env),x);return T([ee.UPDATE_SAVED_POS],H(j,0,J.env,J.sp),A(x.match||0,[ee.IF],T([ee.POP],q?[ee.PUSH_FAILED]:[ee.PUSH_UNDEFINED]),T([ee.POP],q?[ee.PUSH_UNDEFINED]:[ee.PUSH_FAILED])))}function _e(x){return P([ee.WHILE_NOT_ERROR],T([ee.APPEND],x))}function ie(x){let q=x;return new Error(`Unknown boundary type "${q.type}" for the "repeated" node`)}function ne(x,q,J,j){switch(x.type){case"constant":return{pre:[],post:[],sp:J};case"variable":return x.sp=j+J-q[x.value],{pre:[],post:[],sp:J};case"function":{x.sp=j;let B=l(!0,Object.keys(q),{code:x.value,codeLocation:x.codeLocation});return{pre:H(B,0,q,J),post:[ee.NIP],sp:J+1}}default:throw ie(x)}}function Pe(x,q){if(q.value!==null){let J=q.type==="constant"?[ee.IF_GE,q.value]:[ee.IF_GE_DYNAMIC,q.sp||0];return A(ha,J,[ee.PUSH_FAILED],x)}return x}function ve(x,q){let J=q.type==="constant"?[ee.IF_LT,q.value]:[ee.IF_LT_DYNAMIC,q.sp||0];return T(x,A(ha,J,[ee.POP,ee.POP_CURR_POS,ee.PUSH_FAILED],[ee.NIP]))}function Se(x,q,J,j,B){return x?T([ee.PUSH_CURR_POS],fe(x,{sp:j.sp+B+1,env:b(j.env),action:null}),A(x.match||0,[ee.IF_NOT_ERROR],T([ee.POP],J,A(-q,[ee.IF_ERROR],[ee.POP,ee.POP_CURR_POS,ee.PUSH_FAILED],[ee.NIP])),[ee.NIP])):J}function je(x){return t&&t.output==="source-and-map"&&Object.keys(x).forEach(q=>{let J=x[q];x[q]=function(j,...B){let te=J(j,...B);return te===void 0||!j.location?te:T([ee.SOURCE_MAP_PUSH,h(j.location)],te,[ee.SOURCE_MAP_POP])}}),dy.build(x)}let fe=je({grammar(x){x.rules.forEach(fe),x.literals=e.items,x.classes=o.items,x.expectations=r.items,x.importedNames=s.items,x.functions=n,x.locations=c},rule(x){x.bytecode=fe(x.expression,{sp:-1,env:{},pluck:[],action:null})},named(x,q){let J=x.match||0,j=J===lr?-1:r.add({type:"rule",value:x.name});return T([ee.SILENT_FAILS_ON],fe(x.expression,q),[ee.SILENT_FAILS_OFF],A(-J,[ee.IF_ERROR],[ee.FAIL,j],[]))},choice(x,q){function J(j,B){let te=j[0].match||0,Q=fe(j[0],{sp:B.sp,env:b(B.env),action:null});return te===lr?Q:T(Q,j.length>1?A(ha,[ee.IF_ERROR],T([ee.POP],J(j.slice(1),B)),[]):[])}return J(x.alternatives,q)},action(x,q){let J=b(q.env),j=x.expression.type!=="sequence"||x.expression.elements.length===0,B=fe(x.expression,{sp:q.sp+(j?1:0),env:J,action:x}),te=x.expression.match||0,Q=j&&te!==Ml?l(!1,Object.keys(J),x):-1;return j?T([ee.PUSH_CURR_POS],B,A(te,[ee.IF_NOT_ERROR],T([ee.LOAD_SAVED_POS,1],H(Q,1,J,q.sp+2)),[]),[ee.NIP]):B},sequence(x,q){function J(j,B){if(j.length>0){let te=x.elements.length-j.length+1;return T(fe(j[0],{sp:B.sp,env:B.env,pluck:B.pluck,action:null}),A(j[0].match||0,[ee.IF_NOT_ERROR],J(j.slice(1),{sp:B.sp+1,env:B.env,pluck:B.pluck,action:B.action}),T(te>1?[ee.POP_N,te]:[ee.POP],[ee.POP_CURR_POS],[ee.PUSH_FAILED])))}else{if(B.pluck&&B.pluck.length>0)return T([ee.PLUCK,x.elements.length+1,B.pluck.length],B.pluck.map(te=>B.sp-te));if(B.action){let te=l(!1,Object.keys(B.env),B.action);return T([ee.LOAD_SAVED_POS,x.elements.length],H(te,x.elements.length+1,B.env,B.sp))}else return T([ee.WRAP,x.elements.length],[ee.NIP])}}return T([ee.PUSH_CURR_POS],J(x.elements,{sp:q.sp+1,env:q.env,pluck:[],action:q.action}))},labeled(x,q){let J=q.env,j=x.label,B=q.sp+1;j&&(J=b(q.env),q.env[j]=B),x.pick&&q.pluck.push(B);let te=fe(x.expression,{sp:q.sp,env:J,action:null});return j&&x.labelLocation&&t&&t.output==="source-and-map"?T([ee.SOURCE_MAP_LABEL_PUSH,B,e.add(j),h(x.labelLocation)],te,[ee.SOURCE_MAP_LABEL_POP,B]):te},text(x,q){return T([ee.PUSH_CURR_POS],fe(x.expression,{sp:q.sp+1,env:b(q.env),action:null}),A(x.match||0,[ee.IF_NOT_ERROR],T([ee.POP],[ee.TEXT]),[ee.NIP]))},simple_and(x,q){return me(x.expression,!1,q)},simple_not(x,q){return me(x.expression,!0,q)},optional(x,q){return T(fe(x.expression,{sp:q.sp,env:b(q.env),action:null}),A(-(x.expression.match||0),[ee.IF_ERROR],T([ee.POP],[ee.PUSH_NULL]),[]))},zero_or_more(x,q){let J=fe(x.expression,{sp:q.sp+1,env:b(q.env),action:null});return T([ee.PUSH_EMPTY_ARRAY],J,_e(J),[ee.POP])},one_or_more(x,q){let J=fe(x.expression,{sp:q.sp+1,env:b(q.env),action:null});return T([ee.PUSH_EMPTY_ARRAY],J,A(x.expression.match||0,[ee.IF_NOT_ERROR],T(_e(J),[ee.POP]),T([ee.POP],[ee.POP],[ee.PUSH_FAILED])))},repeated(x,q){let J=x.min?x.min:x.max,j=J.type!=="constant"||J.value>0,B=x.max.type!=="constant"&&x.max.value!==null,te=j?2:1,Q=x.min?ne(x.min,q.env,q.sp,2+(x.max.type==="function"?1:0)):{pre:[],post:[],sp:q.sp},U=ne(x.max,q.env,Q.sp,te),Re=fe(x.expression,{sp:U.sp+te,env:b(q.env),action:null}),Z=x.delimiter!==null?fe(x.expression,{sp:U.sp+te+1,env:b(q.env),action:null}):Re,y=Se(x.delimiter,x.expression.match||0,Z,q,te),E=Pe(y,x.max),N=B?Pe(Re,x.max):Re,R=T(j?[ee.PUSH_CURR_POS]:[],[ee.PUSH_EMPTY_ARRAY],N,_e(E),[ee.POP]);return T(Q.pre,U.pre,j?ve(R,J):R,U.post,Q.post)},group(x,q){return fe(x.expression,{sp:q.sp,env:b(q.env),action:null})},semantic_and(x,q){return ye(x,!1,q)},semantic_not(x,q){return ye(x,!0,q)},rule_ref(x){return[ee.RULE,py.indexOfRule(a,x.name)]},library_ref(x){return[ee.LIBRARY_RULE,x.libraryNumber,s.add(x.name)]},literal(x){if(x.value.length>0){let q=x.match||0,j=q===ha||q===lr&&!x.ignoreCase?e.add(x.ignoreCase?x.value.toLowerCase():x.value):-1,B=q!==lr?r.add({type:"literal",value:x.value,ignoreCase:x.ignoreCase}):-1;return A(q,x.ignoreCase?[ee.MATCH_STRING_IC,j]:[ee.MATCH_STRING,j],x.ignoreCase?[ee.ACCEPT_N,x.value.length]:[ee.ACCEPT_STRING,j],[ee.FAIL,B])}return[ee.PUSH_EMPTY_STRING]},class(x){let q=x.match||0,J=q===ha?o.add(x):-1,j=q!==lr?r.add({type:"class",value:x.parts,inverted:x.inverted,ignoreCase:x.ignoreCase,unicode:x.unicode}):-1;return A(q,[x.unicode?ee.MATCH_UNICODE_CLASS:ee.MATCH_CHAR_CLASS,J],[ee.ACCEPT_N,x.unicode?-1:1],[ee.FAIL,j])},any(x){let q=x.match||0,J=q!==lr?r.add({type:"any"}):-1;return A(q,[ee.MATCH_ANY],[ee.ACCEPT_N,1],[ee.FAIL,J])}});fe(a)}Fl.exports=hy});var kl=F(jl=>{var Nl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");jl.encode=function(a){if(0<=a&&a<Nl.length)return Nl[a];throw new TypeError("Must be between 0 and 63: "+a)}});var zl=F(Bl=>{var my=kl(),Dl=5,Ul=1<<Dl,gy=Ul-1,by=Ul;function yy(a){return a<0?(-a<<1)+1:(a<<1)+0}Bl.encode=function(t){let e="",o,r=yy(t);do o=r&gy,r>>>=Dl,r>0&&(o|=by),e+=my.encode(o);while(r>0);return e}});var fn=F(Ht=>{function xy(a,t,e){if(t in a)return a[t];if(arguments.length===3)return e;throw new Error('"'+t+'" is a required argument.')}Ht.getArg=xy;var Wl=function(){return!("__proto__"in Object.create(null))}();function Vl(a){return a}function vy(a){return Kl(a)?"$"+a:a}Ht.toSetString=Wl?Vl:vy;function wy(a){return Kl(a)?a.slice(1):a}Ht.fromSetString=Wl?Vl:wy;function Kl(a){if(!a)return!1;let t=a.length;if(t<9||a.charCodeAt(t-1)!==95||a.charCodeAt(t-2)!==95||a.charCodeAt(t-3)!==111||a.charCodeAt(t-4)!==116||a.charCodeAt(t-5)!==111||a.charCodeAt(t-6)!==114||a.charCodeAt(t-7)!==112||a.charCodeAt(t-8)!==95||a.charCodeAt(t-9)!==95)return!1;for(let e=t-10;e>=0;e--)if(a.charCodeAt(e)!==36)return!1;return!0}function Gl(a,t){return a===t?0:a===null?1:t===null?-1:a>t?1:-1}function Ay(a,t){let e=a.generatedLine-t.generatedLine;return e!==0||(e=a.generatedColumn-t.generatedColumn,e!==0)||(e=Gl(a.source,t.source),e!==0)||(e=a.originalLine-t.originalLine,e!==0)||(e=a.originalColumn-t.originalColumn,e!==0)?e:Gl(a.name,t.name)}Ht.compareByGeneratedPositionsInflated=Ay;var Ps="http:",ma=`${Ps}//host`;function Hl(a){return t=>{let e=ga(t),o=_s(t),r=new URL(t,o);a(r);let s=r.toString();return e==="absolute"?s:e==="scheme-relative"?s.slice(Ps.length):e==="path-absolute"?s.slice(ma.length):Cs(o,s)}}function Kt(a,t){return new URL(a,t).toString()}function Sy(a,t){let e=0;do{let o=a+e++;if(t.indexOf(o)===-1)return o}while(!0)}function _s(a){let t=a.split("..").length-1,e=Sy("p",a),o=`${ma}/`;for(let r=0;r<t;r++)o+=`${e}/`;return o}var Ty=/^[A-Za-z0-9\+\-\.]+:/;function ga(a){return a[0]==="/"?a[1]==="/"?"scheme-relative":"path-absolute":Ty.test(a)?"absolute":"path-relative"}function Cs(a,t){typeof a=="string"&&(a=new URL(a)),typeof t=="string"&&(t=new URL(t));let e=t.pathname.split("/"),o=a.pathname.split("/");for(o.length>0&&!o[o.length-1]&&o.pop();e.length>0&&o.length>0&&e[0]===o[0];)e.shift(),o.shift();return o.map(()=>"..").concat(e).join("/")+t.search+t.hash}var Ey=Hl(a=>{a.pathname=a.pathname.replace(/\/?$/,"/")}),un=Hl(a=>{});Ht.normalize=un;function Py(a,t){let e=ga(t),o=ga(a);if(a=Ey(a),e==="absolute")return Kt(t,void 0);if(o==="absolute")return Kt(t,a);if(e==="scheme-relative")return un(t);if(o==="scheme-relative")return Kt(t,Kt(a,ma)).slice(Ps.length);if(e==="path-absolute")return un(t);if(o==="path-absolute")return Kt(t,Kt(a,ma)).slice(ma.length);let r=_s(t+a),s=Kt(t,Kt(a,r));return Cs(r,s)}Ht.join=Py;function _y(a,t){let e=Cy(a,t);return typeof e=="string"?e:un(t)}Ht.relative=_y;function Cy(a,t){if(ga(a)!==ga(t))return null;let o=_s(a+t),r=new URL(a,o),s=new URL(t,o);try{new URL("",s.toString())}catch{return null}return s.protocol!==r.protocol||s.user!==r.user||s.password!==r.password||s.hostname!==r.hostname||s.port!==r.port?null:Cs(r,s)}});var Yl=F(Jl=>{var $s=class a{constructor(){this._array=[],this._set=new Map}static fromArray(t,e){let o=new a;for(let r=0,s=t.length;r<s;r++)o.add(t[r],e);return o}size(){return this._set.size}add(t,e){let o=this.has(t),r=this._array.length;(!o||e)&&this._array.push(t),o||this._set.set(t,r)}has(t){return this._set.has(t)}indexOf(t){let e=this._set.get(t);if(e>=0)return e;throw new Error('"'+t+'" is not in the set.')}at(t){if(t>=0&&t<this._array.length)return this._array[t];throw new Error("No element indexed by "+t)}toArray(){return this._array.slice()}};Jl.ArraySet=$s});var Xl=F(Zl=>{var Ql=fn();function $y(a,t){let e=a.generatedLine,o=t.generatedLine,r=a.generatedColumn,s=t.generatedColumn;return o>e||o==e&&s>=r||Ql.compareByGeneratedPositionsInflated(a,t)<=0}var Os=class{constructor(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}unsortedForEach(t,e){this._array.forEach(t,e)}add(t){$y(this._last,t)?(this._last=t,this._array.push(t)):(this._sorted=!1,this._array.push(t))}toArray(){return this._sorted||(this._array.sort(Ql.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}};Zl.MappingList=Os});var qs=F(eu=>{var ba=zl(),Ze=fn(),pn=Yl().ArraySet,Oy=Xl().MappingList,dn=class a{constructor(t){t||(t={}),this._file=Ze.getArg(t,"file",null),this._sourceRoot=Ze.getArg(t,"sourceRoot",null),this._skipValidation=Ze.getArg(t,"skipValidation",!1),this._sources=new pn,this._names=new pn,this._mappings=new Oy,this._sourcesContents=null}static fromSourceMap(t){let e=t.sourceRoot,o=new a({file:t.file,sourceRoot:e});return t.eachMapping(function(r){let s={generated:{line:r.generatedLine,column:r.generatedColumn}};r.source!=null&&(s.source=r.source,e!=null&&(s.source=Ze.relative(e,s.source)),s.original={line:r.originalLine,column:r.originalColumn},r.name!=null&&(s.name=r.name)),o.addMapping(s)}),t.sources.forEach(function(r){let s=r;e!=null&&(s=Ze.relative(e,r)),o._sources.has(s)||o._sources.add(s);let n=t.sourceContentFor(r);n!=null&&o.setSourceContent(r,n)}),o}addMapping(t){let e=Ze.getArg(t,"generated"),o=Ze.getArg(t,"original",null),r=Ze.getArg(t,"source",null),s=Ze.getArg(t,"name",null);this._skipValidation||this._validateMapping(e,o,r,s),r!=null&&(r=String(r),this._sources.has(r)||this._sources.add(r)),s!=null&&(s=String(s),this._names.has(s)||this._names.add(s)),this._mappings.add({generatedLine:e.line,generatedColumn:e.column,originalLine:o&&o.line,originalColumn:o&&o.column,source:r,name:s})}setSourceContent(t,e){let o=t;this._sourceRoot!=null&&(o=Ze.relative(this._sourceRoot,o)),e!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Ze.toSetString(o)]=e):this._sourcesContents&&(delete this._sourcesContents[Ze.toSetString(o)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))}applySourceMap(t,e,o){let r=e;if(e==null){if(t.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);r=t.file}let s=this._sourceRoot;s!=null&&(r=Ze.relative(s,r));let n=this._mappings.toArray().length>0?new pn:this._sources,c=new pn;this._mappings.unsortedForEach(function(l){if(l.source===r&&l.originalLine!=null){let T=t.originalPositionFor({line:l.originalLine,column:l.originalColumn});T.source!=null&&(l.source=T.source,o!=null&&(l.source=Ze.join(o,l.source)),s!=null&&(l.source=Ze.relative(s,l.source)),l.originalLine=T.line,l.originalColumn=T.column,T.name!=null&&(l.name=T.name))}let h=l.source;h!=null&&!n.has(h)&&n.add(h);let b=l.name;b!=null&&!c.has(b)&&c.add(b)},this),this._sources=n,this._names=c,t.sources.forEach(function(l){let h=t.sourceContentFor(l);h!=null&&(o!=null&&(l=Ze.join(o,l)),s!=null&&(l=Ze.relative(s,l)),this.setSourceContent(l,h))},this)}_validateMapping(t,e,o,r){if(e&&typeof e.line!="number"&&typeof e.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(t&&"line"in t&&"column"in t&&t.line>0&&t.column>=0&&!e&&!o&&!r)){if(!(t&&"line"in t&&"column"in t&&e&&"line"in e&&"column"in e&&t.line>0&&t.column>=0&&e.line>0&&e.column>=0&&o))throw new Error("Invalid mapping: "+JSON.stringify({generated:t,source:o,original:e,name:r}))}}_serializeMappings(){let t=0,e=1,o=0,r=0,s=0,n=0,c="",l,h,b,T,A=this._mappings.toArray();for(let P=0,H=A.length;P<H;P++){if(h=A[P],l="",h.generatedLine!==e)for(t=0;h.generatedLine!==e;)l+=";",e++;else if(P>0){if(!Ze.compareByGeneratedPositionsInflated(h,A[P-1]))continue;l+=","}l+=ba.encode(h.generatedColumn-t),t=h.generatedColumn,h.source!=null&&(T=this._sources.indexOf(h.source),l+=ba.encode(T-n),n=T,l+=ba.encode(h.originalLine-1-r),r=h.originalLine-1,l+=ba.encode(h.originalColumn-o),o=h.originalColumn,h.name!=null&&(b=this._names.indexOf(h.name),l+=ba.encode(b-s),s=b)),c+=l}return c}_generateSourcesContent(t,e){return t.map(function(o){if(!this._sourcesContents)return null;e!=null&&(o=Ze.relative(e,o));let r=Ze.toSetString(o);return Object.prototype.hasOwnProperty.call(this._sourcesContents,r)?this._sourcesContents[r]:null},this)}toJSON(){let t={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(t.file=this._file),this._sourceRoot!=null&&(t.sourceRoot=this._sourceRoot),this._sourcesContents&&(t.sourcesContent=this._generateSourcesContent(t.sources,t.sourceRoot)),t}toString(){return JSON.stringify(this.toJSON())}};dn.prototype._version=3;eu.SourceMapGenerator=dn});var ru=F(tu=>{var qy=qs().SourceMapGenerator,hn=fn(),Ry=/(\r?\n)/,Iy=10,Mr="$$$isSourceNode$$$",Rs=class a{constructor(t,e,o,r,s){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=o??null,this.name=s??null,this[Mr]=!0,r!=null&&this.add(r)}static fromStringWithSourceMap(t,e,o){let r=new a,s=t.split(Ry),n=0,c=function(){let P=me(),H=me()||"";return P+H;function me(){return n<s.length?s[n++]:void 0}},l=1,h=0,b=null,T;return e.eachMapping(function(P){if(b!==null)if(l<P.generatedLine)A(b,c()),l++,h=0;else{T=s[n]||"";let H=T.substr(0,P.generatedColumn-h);s[n]=T.substr(P.generatedColumn-h),h=P.generatedColumn,A(b,H),b=P;return}for(;l<P.generatedLine;)r.add(c()),l++;h<P.generatedColumn&&(T=s[n]||"",r.add(T.substr(0,P.generatedColumn)),s[n]=T.substr(P.generatedColumn),h=P.generatedColumn),b=P},this),n<s.length&&(b&&A(b,c()),r.add(s.splice(n).join(""))),e.sources.forEach(function(P){let H=e.sourceContentFor(P);H!=null&&(o!=null&&(P=hn.join(o,P)),r.setSourceContent(P,H))}),r;function A(P,H){if(P===null||P.source===void 0)r.add(H);else{let me=o?hn.join(o,P.source):P.source;r.add(new a(P.originalLine,P.originalColumn,me,H,P.name))}}}add(t){if(Array.isArray(t))t.forEach(function(e){this.add(e)},this);else if(t[Mr]||typeof t=="string")t&&this.children.push(t);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);return this}prepend(t){if(Array.isArray(t))for(let e=t.length-1;e>=0;e--)this.prepend(t[e]);else if(t[Mr]||typeof t=="string")this.children.unshift(t);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);return this}walk(t){let e;for(let o=0,r=this.children.length;o<r;o++)e=this.children[o],e[Mr]?e.walk(t):e!==""&&t(e,{source:this.source,line:this.line,column:this.column,name:this.name})}join(t){let e,o,r=this.children.length;if(r>0){for(e=[],o=0;o<r-1;o++)e.push(this.children[o]),e.push(t);e.push(this.children[o]),this.children=e}return this}replaceRight(t,e){let o=this.children[this.children.length-1];return o[Mr]?o.replaceRight(t,e):typeof o=="string"?this.children[this.children.length-1]=o.replace(t,e):this.children.push("".replace(t,e)),this}setSourceContent(t,e){this.sourceContents[hn.toSetString(t)]=e}walkSourceContents(t){for(let o=0,r=this.children.length;o<r;o++)this.children[o][Mr]&&this.children[o].walkSourceContents(t);let e=Object.keys(this.sourceContents);for(let o=0,r=e.length;o<r;o++)t(hn.fromSetString(e[o]),this.sourceContents[e[o]])}toString(){let t="";return this.walk(function(e){t+=e}),t}toStringWithSourceMap(t){let e={code:"",line:1,column:0},o=new qy(t),r=!1,s=null,n=null,c=null,l=null;return this.walk(function(h,b){e.code+=h,b.source!==null&&b.line!==null&&b.column!==null?((s!==b.source||n!==b.line||c!==b.column||l!==b.name)&&o.addMapping({source:b.source,original:{line:b.line,column:b.column},generated:{line:e.line,column:e.column},name:b.name}),s=b.source,n=b.line,c=b.column,l=b.name,r=!0):r&&(o.addMapping({generated:{line:e.line,column:e.column}}),s=null,r=!1);for(let T=0,A=h.length;T<A;T++)h.charCodeAt(T)===Iy?(e.line++,e.column=0,T+1===A?(s=null,r=!1):r&&o.addMapping({source:b.source,original:{line:b.line,column:b.column},generated:{line:e.line,column:e.column},name:b.name})):e.column++}),this.walkSourceContents(function(h,b){o.setSourceContent(h,b)}),{code:e.code,map:o}}};tu.SourceNode=Rs});var Ls=F(Is=>{Is.SourceMapGenerator=qs().SourceMapGenerator;Is.SourceNode=ru().SourceNode});var Fs=F((Ow,nu)=>{"use strict";var{SourceNode:mn}=Ls(),au=pa(),Ms=class a{constructor(t,e,o,r){this.sp=-1,this.maxSp=-1,this.varName=e,this.ruleName=t,this.type=o,this.bytecode=r,this.labels={},this.sourceMapStack=[]}name(t){if(t<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack underflow: attempt to use a variable '${this.varName}<x>' at an index ${t}.
Bytecode: ${this.bytecode}`);return this.varName+t}static sourceNode(t,e,o){let r=au.offsetStart(t);return new mn(r.line,r.column?r.column-1:null,String(t.source),e,o)}push(t){++this.sp>this.maxSp&&(this.maxSp=this.sp);let e=this.labels[this.sp],o=[this.name(this.sp)," = ",t,";"];if(e)if(this.sourceMapStack.length){let r=a.sourceNode(e.location,o.splice(0,2),e.label),{parts:s,location:n}=this.sourceMapPopInternal(),c=n.start.offset<e.location.end.offset?{start:e.location.end,end:n.end,source:n.source}:n,l=a.sourceNode(c,o.concat(`
`));return this.sourceMapStack.push([s,s.length+1,n]),new mn(null,null,e.location.source,[r,l])}else return a.sourceNode(e.location,o.concat(`
`));return o.join("")}pop(t){return t!==void 0?(this.sp-=t,Array.from({length:t},(e,o)=>this.name(this.sp+1+o))):this.name(this.sp--)}top(){return this.name(this.sp)}index(t){if(t<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack overflow: attempt to get a variable at a negative index ${t}.
Bytecode: ${this.bytecode}`);return this.name(this.sp-t)}result(){if(this.maxSp<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack is empty, can't get the result.
Bytecode: ${this.bytecode}`);return this.name(0)}defines(){return this.maxSp<0?"":this.type+" "+Array.from({length:this.maxSp+1},(t,e)=>this.name(e)).join(", ")+";"}checkedIf(t,e,o){let r=this.sp,s=e();if(!o)return[s];let n=this.sp;this.sp=r;let c=o();if(n!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+t+": Branches of a condition can't move the stack pointer differently (before: "+r+", after then: "+n+", after else: "+this.sp+"). Bytecode: "+this.bytecode);return[s,c]}checkedLoop(t,e){let o=this.sp,r=e();if(o!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+t+": Body of a loop can't move the stack pointer (before: "+o+", after: "+this.sp+"). Bytecode: "+this.bytecode);return r}sourceMapPush(t,e){if(this.sourceMapStack.length){let o=this.sourceMapStack[this.sourceMapStack.length-1];o[2].start.offset===e.start.offset&&o[2].end.offset>e.end.offset&&(o[2]={start:e.end,end:o[2].end,source:o[2].source})}this.sourceMapStack.push([t,t.length,e])}sourceMapPopInternal(){let t=this.sourceMapStack.pop();if(!t)throw new RangeError(`Rule '${this.ruleName}': Attempting to pop an empty source map stack.
Bytecode: ${this.bytecode}`);let[e,o,r]=t,s=e.splice(o).map(n=>n instanceof mn?n:n+`
`);if(s.length){let n=au.offsetStart(r);e.push(new mn(n.line,n.column-1,String(r.source),s))}return{parts:e,location:r}}sourceMapPop(t){let{location:e}=this.sourceMapPopInternal();if(this.sourceMapStack.length&&e.end.offset<this.sourceMapStack[this.sourceMapStack.length-1][2].end.offset){let{parts:o,location:r}=this.sourceMapPopInternal(),s=r.start.offset<e.end.offset?{start:e.end,end:r.end,source:r.source}:r;this.sourceMapStack.push([o,o.length+(t||0),s])}}};nu.exports=Ms});var Ns=F(su=>{"use strict";su.version="5.0.6"});var Nr=F(Fr=>{"use strict";function Pt(a){return a.codePointAt(0).toString(16).toUpperCase()}Fr.hex=Pt;function Ly(a){return typeof a=="object"?`\\\\${a.value}`:a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\u{10000}-\u{10FFFF}]/gu,t=>`\\u{${Pt(t)}}`).replace(/[\x00-\x0F]/g,t=>"\\x0"+Pt(t)).replace(/[\x10-\x1F\x7F-\xFF]/g,t=>"\\x"+Pt(t)).replace(/[\u0100-\u0FFF]/g,t=>"\\u0"+Pt(t)).replace(/[\u1000-\uFFFF]/g,t=>"\\u"+Pt(t))}Fr.stringEscape=Ly;function My(a){return typeof a=="object"?`\\${a.value}`:a.replace(/\\/g,"\\\\").replace(/\//g,"\\/").replace(/]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,t=>"\\x0"+Pt(t)).replace(/[\x10-\x1F\x7F-\xFF]/g,t=>"\\x"+Pt(t)).replace(/[\u{10000}-\u{10FFFF}]/gu,t=>"\\u{"+Pt(t)+"}").replace(/[\u0100-\u0FFF]/g,t=>"\\u0"+Pt(t)).replace(/[\u1000-\uFFFF]/g,t=>"\\u"+Pt(t))}Fr.regexpClassEscape=My;function Fy(a){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=a.length%3,o=a.length-e,r="";for(let s=0;s<o;s+=3)r+=t[a[s]>>2],r+=t[(a[s]&3)<<4|a[s+1]>>4],r+=t[(a[s+1]&15)<<2|a[s+2]>>6],r+=t[a[s+2]&63];return e===1?(r+=t[a[o]>>2],r+=t[(a[o]&3)<<4],r+="=="):e===2&&(r+=t[a[o]>>2],r+=t[(a[o]&3)<<4|a[o+1]>>4],r+=t[(a[o+1]&15)<<2],r+="="),r}Fr.base64=Fy;function Ny(a){let t=a[Symbol.iterator](),e=t.next();return e.done||!t.next().done?-1:e.value.codePointAt(0)}Fr.codePointLen1=Ny});var Ds=F((Iw,cu)=>{"use strict";var jy=Lt(),$e=on(),ky=Fs(),{version:Dy}=Ns(),{stringEscape:dt,regexpClassEscape:js}=Nr(),{SourceNode:wt}=Ls(),ks=pa(),{parse:Uy}=Lr();function iu(a,t,e){let o=ks.offsetStart(t),r=o.line,s=o.column-1,n=a.split(`
`);return n.length===1?new wt(r,s,String(t.source),a,e):new wt(null,null,String(t.source),n.map((c,l)=>new wt(r+l,l===0?s:0,String(t.source),l===n.length-1?c:[c,`
`],e)))}function ou(a,t,e,o,r){if(e){let s=ks.offsetEnd(e);return new wt(null,null,String(e.source),[a,iu(t,e,r),new wt(s.line,s.column-1,String(e.source),o)])}return new wt(null,null,null,[a,t,o])}function By(a,t){if(!a.literals||!a.locations||!a.classes||!a.expectations||!a.functions||!a.importedNames)throw new Error("generateJS: generate bytecode was not called.");let{literals:e,locations:o,classes:r,expectations:s,functions:n,importedNames:c}=a;if(!t.allowedStartRules)throw new Error("generateJS: options.allowedStartRules was not set.");let{allowedStartRules:l}=t,h=t.dependencies||{};function b(x,q=""){let J=x.match(/^\n*([ \t]+)/);return(J?x.replace(new RegExp(`^${J[1]}`,"gm"),q):x).replace(/[ \t]+$/,"")}function T(x){let q=!0,J=0;function j(B){return Array.isArray(B)?B.map(te=>j(te)):B instanceof wt?(J++,B.children=j(B.children),J--,B):(q?B=B.replace(/^(.+)$/gm,"  $1"):B=B.replace(/\n(\s*\S)/g,`
  $1`),q=!J||B.endsWith(`
`),B)}return j(x)}function A(x){return"peg$c"+x}function P(x){return"peg$r"+x}function H(x){return"peg$e"+x}function me(x){return"peg$f"+x}function ye(x){return"peg$import"+x}function _e(x){return"peg$parse"+x}function ie(){function x(B){return'"'+dt(B)+'"'}function q(B){return"/^["+(B.inverted?"^":"")+B.value.map(te=>Array.isArray(te)?js(te[0])+"-"+js(te[1]):js(te)).join("")+"]/"+(B.ignoreCase?"i":"")+(B.unicode?"u":"")}function J(B){switch(B.type){case"rule":return'peg$otherExpectation("'+dt(B.value)+'")';case"literal":return'peg$literalExpectation("'+dt(B.value)+'", '+B.ignoreCase+")";case"class":return"peg$classExpectation(["+B.value.map(Q=>Array.isArray(Q)?'["'+dt(Q[0])+'", "'+dt(Q[1])+'"]':'"'+dt(Q)+'"').join(", ")+"], "+B.inverted+", "+B.ignoreCase+", "+B.unicode+")";case"any":return"peg$anyExpectation()";default:throw new Error("Unknown expectation type ("+JSON.stringify(B)+")")}}function j(B,te){return ou(`
  function ${me(te)}(${B.params.join(", ")}) {`,b(B.body,"    "),B.location,"  }")}return new wt(null,null,t.grammarSource,[e.map((B,te)=>"  const "+A(te)+" = "+x(B)+";").concat("",r.map((B,te)=>"  const "+P(te)+" = "+q(B)+";")).concat("",s.map((B,te)=>"  const "+H(te)+" = "+J(B)+";")).concat("").join(`
`),...n.map(j)])}function ne(x,q){let J=[];return J.push(""),t.trace&&J.push("peg$tracer.trace({",'  type: "rule.enter",',"  rule: "+x+",","  location: peg$computeLocation(startPos, startPos, true)","});",""),t.cache&&(J.push("const key = peg$currPos * "+a.rules.length+" + "+q+";","const cached = peg$resultsCache[key];","","if (cached) {","  peg$currPos = cached.nextPos;",""),t.trace&&J.push("if (cached.result !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+x+",","    result: cached.result,","    location: peg$computeLocation(startPos, peg$currPos, true)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+x+",","    location: peg$computeLocation(startPos, startPos, true)","  });","}",""),J.push("  return cached.result;","}","")),J}function Pe(x,q){let J=[];return t.cache&&J.push("","peg$resultsCache[key] = { nextPos: peg$currPos, result: "+q+" };"),t.trace&&J.push("","if ("+q+" !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+x+",","    result: "+q+",","    location: peg$computeLocation(startPos, peg$currPos, true)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+x+",","    location: peg$computeLocation(startPos, startPos, true)","  });","}"),J.push("","return "+q+";"),J}function ve(x){let q=[],J=x.bytecode,j=new ky(x.name,"s","let",J);function B(Q){let U=0,Re=Q.length,Z=[],y;function E(L,K,X){let se=K+3,pe=Q[U+se-2],he=Q[U+se-1],[oe,xe]=j.checkedIf(U,()=>(U+=se+pe,(X||B)(Q.slice(U-pe,U))),he>0?()=>(U+=he,B(Q.slice(U-he,U))):null);Z.push("if ("+L+") {"),Z.push(...T(oe)),he>0&&(Z.push("} else {"),Z.push(...T(xe))),Z.push("}")}function N(L){switch(L){case-1:return"peg$getUnicode()";case 1:return"input.charAt(peg$currPos)";default:return`input.substr(peg$currPos, ${L})`}}function R(L,K){switch(L){case-1:return`peg$currPos += ${K}.length;`;case 1:return"peg$currPos++;";default:return"peg$currPos += ("+L+");"}}function Y(L,K,X){let se=K+3,pe=N(X),he=null;Q[U+se]===$e.ACCEPT_N&&Q[U+se+1]===X&&(Z.push(j.push(pe)),pe=j.pop(),he=oe=>{j.sp++;let xe=B(oe.slice(2));return xe.unshift(R(X,pe)),xe}),E(L(pe,he!==null),K,he)}function D(L){let X=Q[U+2-1],se=j.checkedLoop(U,()=>(U+=2+X,B(Q.slice(U-X,U))));Z.push("while ("+L+") {"),Z.push(...T(se)),Z.push("}")}function k(L){let K=Q[U+L-1];return me(Q[U+1])+"("+Q.slice(U+L,U+L+K).map(X=>j.index(X)).join(", ")+")"}for(;U<Re;)switch(Q[U]){case $e.PUSH_EMPTY_STRING:Z.push(j.push("''")),U++;break;case $e.PUSH_CURR_POS:Z.push(j.push("peg$currPos")),U++;break;case $e.PUSH_UNDEFINED:Z.push(j.push("undefined")),U++;break;case $e.PUSH_NULL:Z.push(j.push("null")),U++;break;case $e.PUSH_FAILED:Z.push(j.push("peg$FAILED")),U++;break;case $e.PUSH_EMPTY_ARRAY:Z.push(j.push("[]")),U++;break;case $e.POP:j.pop(),U++;break;case $e.POP_CURR_POS:Z.push("peg$currPos = "+j.pop()+";"),U++;break;case $e.POP_N:j.pop(Q[U+1]),U+=2;break;case $e.NIP:y=j.pop(),j.pop(),Z.push(j.push(y)),U++;break;case $e.APPEND:y=j.pop(),Z.push(j.top()+".push("+y+");"),U++;break;case $e.WRAP:Z.push(j.push("["+j.pop(Q[U+1]).join(", ")+"]")),U+=2;break;case $e.TEXT:Z.push(j.push("input.substring("+j.pop()+", peg$currPos)")),U++;break;case $e.PLUCK:{let K=Q[U+3-1],X=3+K;y=Q.slice(U+3,U+X),y=K===1?j.index(y[0]):`[ ${y.map(se=>j.index(se)).join(", ")} ]`,j.pop(Q[U+1]),Z.push(j.push(y)),U+=X;break}case $e.IF:E(j.top(),0);break;case $e.IF_ERROR:E(j.top()+" === peg$FAILED",0);break;case $e.IF_NOT_ERROR:E(j.top()+" !== peg$FAILED",0);break;case $e.IF_LT:E(j.top()+".length < "+Q[U+1],1);break;case $e.IF_GE:E(j.top()+".length >= "+Q[U+1],1);break;case $e.IF_LT_DYNAMIC:E(j.top()+".length < ("+j.index(Q[U+1])+"|0)",1);break;case $e.IF_GE_DYNAMIC:E(j.top()+".length >= ("+j.index(Q[U+1])+"|0)",1);break;case $e.WHILE_NOT_ERROR:D(j.top()+" !== peg$FAILED");break;case $e.MATCH_ANY:E("input.length > peg$currPos",0);break;case $e.MATCH_STRING:{let L=Q[U+1],K=e[L];Y((X,se)=>K.length>1?`${X} === ${A(L)}`:(X=se?`${X}.charCodeAt(0)`:"input.charCodeAt(peg$currPos)",`${X} === ${K.charCodeAt(0)}`),1,K.length);break}case $e.MATCH_STRING_IC:{let L=Q[U+1];Y(K=>`${K}.toLowerCase() === ${A(L)}`,1,e[L].length);break}case $e.MATCH_CHAR_CLASS:{let L=Q[U+1];Y(K=>`${P(L)}.test(${K})`,1,1);break}case $e.MATCH_UNICODE_CLASS:{let L=Q[U+1];Y(K=>`${P(L)}.test(${K})`,1,-1);break}case $e.ACCEPT_N:Z.push(j.push(N(Q[U+1]))),Z.push(R(Q[U+1],j.top())),U+=2;break;case $e.ACCEPT_STRING:Z.push(j.push(A(Q[U+1]))),Z.push(e[Q[U+1]].length>1?"peg$currPos += "+e[Q[U+1]].length+";":"peg$currPos++;"),U+=2;break;case $e.FAIL:Z.push(j.push("peg$FAILED")),Z.push("if (peg$silentFails === 0) { peg$fail("+H(Q[U+1])+"); }"),U+=2;break;case $e.LOAD_SAVED_POS:Z.push("peg$savedPos = "+j.index(Q[U+1])+";"),U+=2;break;case $e.UPDATE_SAVED_POS:Z.push("peg$savedPos = peg$currPos;"),U++;break;case $e.CALL:y=k(4),j.pop(Q[U+2]),Z.push(j.push(y)),U+=4+Q[U+3];break;case $e.RULE:Z.push(j.push(_e(a.rules[Q[U+1]].name)+"()")),U+=2;break;case $e.LIBRARY_RULE:{let L=Q[U+2],K=L===-1?"":', "'+c[L]+'"';Z.push(j.push("peg$callLibrary("+ye(Q[U+1])+K+")")),U+=3;break}case $e.SILENT_FAILS_ON:Z.push("peg$silentFails++;"),U++;break;case $e.SILENT_FAILS_OFF:Z.push("peg$silentFails--;"),U++;break;case $e.SOURCE_MAP_PUSH:j.sourceMapPush(Z,o[Q[U+1]]),U+=2;break;case $e.SOURCE_MAP_POP:{j.sourceMapPop(),U++;break}case $e.SOURCE_MAP_LABEL_PUSH:j.labels[Q[U+1]]={label:e[Q[U+2]],location:o[Q[U+3]]},U+=4;break;case $e.SOURCE_MAP_LABEL_POP:delete j.labels[Q[U+1]],U+=2;break;default:throw new Error("Invalid opcode: "+Q[U]+".")}return Z}let te=B(J);return q.push(ou("function ",_e(x.name),x.nameLocation,`() {
`,x.name)),t.trace&&q.push("  var startPos = peg$currPos;"),q.push(T(j.defines())),q.push(...T(ne('"'+dt(x.name)+'"',jy.indexOfRule(a,x.name)))),q.push(...T(te)),q.push(...T(Pe('"'+dt(x.name)+'"',j.result()))),q.push("}"),q.push(""),q}function Se(x){return x.codeLocation?iu(x.code,x.codeLocation,"$"+x.type):x.code}function je(){let x=[],q=a.topLevelInitializer;if(q)if(Array.isArray(q)){if(t.format==="es"){let te=[],Q=[];for(let U of q){let[Re,Z]=Uy(U.code,{startRule:"ImportsAndSource",grammarSource:new ks(U.codeLocation.source,U.codeLocation.start)});Re.code?(te.push(Re),Q.push(Z)):Q.push(U)}q=Q.concat(te)}let B=q.slice(0).reverse();for(let te of B)x.push(Se(te)),x.push("")}else x.push(Se(q)),x.push("");x.push("class peg$SyntaxError extends SyntaxError {","  constructor(message, expected, found, location) {","    super(message);","    this.expected = expected;","    this.found = found;","    this.location = location;",'    this.name = "SyntaxError";',"  }","","  format(sources) {",'    let str = "Error: " + this.message;',"    if (this.location) {","      let src = null;","      const st = sources.find(s => s.source === this.location.source);","      if (st) {","        src = st.text.split(/\\r\\n|\\n|\\r/g);","      }","      const s = this.location.start;",'      const offset_s = (this.location.source && (typeof this.location.source.offset === "function"))',"        ? this.location.source.offset(s)","        : s;",'      const loc = this.location.source + ":" + offset_s.line + ":" + offset_s.column;',"      if (src) {","        const e = this.location.end;",'        const filler = "".padEnd(offset_s.line.toString().length, " ");',"        const line = src[s.line - 1];","        const last = s.line === e.line ? e.column : line.length + 1;","        const hatLen = (last - s.column) || 1;",'        str += "\\n --> " + loc + "\\n"','            + filler + " |\\n"','            + offset_s.line + " | " + line + "\\n"','            + filler + " | " + "".padEnd(s.column - 1, " ")','            + "".padEnd(hatLen, "^");',"      } else {",'        str += "\\n at " + loc;',"      }","    }","    return str;","  }","","  static buildMessage(expected, found) {","    function hex(ch) {","      return ch.codePointAt(0).toString(16).toUpperCase();","    }","",'    const nonPrintable = Object.prototype.hasOwnProperty.call(RegExp.prototype, "unicode")','      ? new RegExp("[\\\\p{C}\\\\p{Mn}\\\\p{Mc}]", "gu")',"      : null;","    function unicodeEscape(s) {","      if (nonPrintable) {",'        return s.replace(nonPrintable,  ch => "\\\\u{" + hex(ch) + "}");',"      }","      return s;","    }","","    function literalEscape(s) {","      return unicodeEscape(s",'        .replace(/\\\\/g, "\\\\\\\\")','        .replace(/"/g,  "\\\\\\"")','        .replace(/\\0/g, "\\\\0")','        .replace(/\\t/g, "\\\\t")','        .replace(/\\n/g, "\\\\n")','        .replace(/\\r/g, "\\\\r")','        .replace(/[\\x00-\\x0F]/g,          ch => "\\\\x0" + hex(ch))','        .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, ch => "\\\\x"  + hex(ch)));',"    }","","    function classEscape(s) {","      return unicodeEscape(s",'        .replace(/\\\\/g, "\\\\\\\\")','        .replace(/\\]/g, "\\\\]")','        .replace(/\\^/g, "\\\\^")','        .replace(/-/g,  "\\\\-")','        .replace(/\\0/g, "\\\\0")','        .replace(/\\t/g, "\\\\t")','        .replace(/\\n/g, "\\\\n")','        .replace(/\\r/g, "\\\\r")','        .replace(/[\\x00-\\x0F]/g,          ch => "\\\\x0" + hex(ch))','        .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, ch => "\\\\x"  + hex(ch)));',"    }","","    const DESCRIBE_EXPECTATION_FNS = {","      literal(expectation) {",'        return "\\"" + literalEscape(expectation.text) + "\\"";',"      },","","      class(expectation) {","        const escapedParts = expectation.parts.map(","          part => (Array.isArray(part)",'            ? classEscape(part[0]) + "-" + classEscape(part[1])',"            : classEscape(part))","        );","",'        return "[" + (expectation.inverted ? "^" : "") + escapedParts.join("") + "]" + (expectation.unicode ? "u" : "");',"      },","","      any() {",'        return "any character";',"      },","","      end() {",'        return "end of input";',"      },","","      other(expectation) {","        return expectation.description;","      },","    };","","    function describeExpectation(expectation) {","      return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);","    }","","    function describeExpected(expected) {","      const descriptions = expected.map(describeExpectation);","      descriptions.sort();","","      if (descriptions.length > 0) {","        let j = 1;","        for (let i = 1; i < descriptions.length; i++) {","          if (descriptions[i - 1] !== descriptions[i]) {","            descriptions[j] = descriptions[i];","            j++;","          }","        }","        descriptions.length = j;","      }","","      switch (descriptions.length) {","        case 1:","          return descriptions[0];","","        case 2:",'          return descriptions[0] + " or " + descriptions[1];',"","        default:",'          return descriptions.slice(0, -1).join(", ")','            + ", or "',"            + descriptions[descriptions.length - 1];","      }","    }","","    function describeFound(found) {",'      return found ? "\\"" + literalEscape(found) + "\\"" : "end of input";',"    }","",'    return "Expected " + describeExpected(expected) + " but " + describeFound(found) + " found.";',"  }","}",""),t.trace&&x.push("class peg$DefaultTracer {","  constructor() {","    this.indentLevel = 0;","  }","","  trace(event) {","    const that = this;","","    function log(event) {","      console?.log?.(",'        event.location.start.line + ":" + event.location.start.column + "-"','          + event.location.end.line + ":" + event.location.end.column + " "','          + event.type.padEnd(10, " ")','          + "".padEnd((that.indentLevel * 2) + 1, " ") + event.rule',"       );","    }","","    switch (event.type) {",'      case "rule.enter":',"        log(event);","        this.indentLevel++;","        break;","",'      case "rule.match":',"        this.indentLevel--;","        log(event);","        break;","",'      case "rule.fail":',"        this.indentLevel--;","        log(event);","        break;","","      default:",'        throw new Error("Invalid event type: " + event.type + ".");',"    }","  }","}","");let J=`{
`+l.map(B=>`    ${B}: ${_e(B)},
`).join("")+"  }",j=_e(l[0]);if(x.push("function peg$parse(input, options) {","  options = options !== undefined ? options : {};","","  const peg$FAILED = {};","  const peg$source = options.grammarSource;","","  const peg$startRuleFunctions = "+J+";","  let peg$startRuleFunction = "+j+";","",ie(),"","  let peg$currPos = options.peg$currPos | 0;","  let peg$savedPos = peg$currPos;","  const peg$posDetailsCache = [{ line: 1, column: 1 }];","  let peg$maxFailPos = peg$currPos;","  let peg$maxFailExpected = options.peg$maxFailExpected || [];","  let peg$silentFails = options.peg$silentFails | 0;",""),t.cache&&x.push("  let peg$resultsCache = {};",""),t.trace&&x.push('  let peg$tracer = "tracer" in options ? options.tracer : new peg$DefaultTracer();',""),x.push("  let peg$result;","","  if (options.startRule) {","    if (!(options.startRule in peg$startRuleFunctions)) {",`      throw new Error("Can't start parsing from rule \\"" + options.startRule + "\\".");`,"    }","","    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];","  }","","  function text() {","    return input.substring(peg$savedPos, peg$currPos);","  }","","  function offset() {","    return peg$savedPos;","  }","","  function range() {","    return {","      source: peg$source,","      start: peg$savedPos,","      end: peg$currPos,","    };","  }","","  function location() {","    return peg$computeLocation(peg$savedPos, peg$currPos);","  }","","  function expected(description, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildStructuredError(","      [peg$otherExpectation(description)],","      input.substring(peg$savedPos, peg$currPos),","      location","    );","  }","","  function error(message, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildSimpleError(message, location);","  }","","  function peg$getUnicode(pos = peg$currPos) {","    const cp = input.codePointAt(pos);","    if (cp === undefined) {",'      return "";',"    }","    return String.fromCodePoint(cp);","  }","","  function peg$literalExpectation(text, ignoreCase) {",'    return { type: "literal", text, ignoreCase };',"  }","","  function peg$classExpectation(parts, inverted, ignoreCase, unicode) {",'    return { type: "class", parts, inverted, ignoreCase, unicode };',"  }","","  function peg$anyExpectation() {",'    return { type: "any" };',"  }","","  function peg$endExpectation() {",'    return { type: "end" };',"  }","","  function peg$otherExpectation(description) {",'    return { type: "other", description };',"  }","","  function peg$computePosDetails(pos) {","    let details = peg$posDetailsCache[pos];","    let p;","","    if (details) {","      return details;","    } else {","      if (pos >= peg$posDetailsCache.length) {","        p = peg$posDetailsCache.length - 1;","      } else {","        p = pos;","        while (!peg$posDetailsCache[--p]) {}","      }","","      details = peg$posDetailsCache[p];","      details = {","        line: details.line,","        column: details.column,","      };","","      while (p < pos) {","        if (input.charCodeAt(p) === 10) {","          details.line++;","          details.column = 1;","        } else {","          details.column++;","        }","","        p++;","      }","","      peg$posDetailsCache[pos] = details;","","      return details;","    }","  }","","  function peg$computeLocation(startPos, endPos, offset) {","    const startPosDetails = peg$computePosDetails(startPos);","    const endPosDetails = peg$computePosDetails(endPos);","","    const res = {","      source: peg$source,","      start: {","        offset: startPos,","        line: startPosDetails.line,","        column: startPosDetails.column,","      },","      end: {","        offset: endPos,","        line: endPosDetails.line,","        column: endPosDetails.column,","      },","    };",'    if (offset && peg$source && (typeof peg$source.offset === "function")) {',"      res.start = peg$source.offset(res.start);","      res.end = peg$source.offset(res.end);","    }","    return res;","  }","","  function peg$fail(expected) {","    if (peg$currPos < peg$maxFailPos) { return; }","","    if (peg$currPos > peg$maxFailPos) {","      peg$maxFailPos = peg$currPos;","      peg$maxFailExpected = [];","    }","","    peg$maxFailExpected.push(expected);","  }","","  function peg$buildSimpleError(message, location) {","    return new peg$SyntaxError(message, null, null, location);","  }","","  function peg$buildStructuredError(expected, found, location) {","    return new peg$SyntaxError(","      peg$SyntaxError.buildMessage(expected, found),","      expected,","      found,","      location","    );","  }",""),a.imports.length>0&&x.push("  function peg$callLibrary(lib, startRule) {","    const opts = Object.assign({}, options, {","      startRule: startRule,","      peg$currPos: peg$currPos,","      peg$silentFails: peg$silentFails,","      peg$library: true,","      peg$maxFailExpected: peg$maxFailExpected","    });","    const res = lib.parse(input, opts);","    peg$currPos = res.peg$currPos;","    peg$maxFailPos = res.peg$maxFailPos;","    peg$maxFailExpected = res.peg$maxFailExpected;","    return (res.peg$result === res.peg$FAILED) ? peg$FAILED : res.peg$result;","  }",""),a.rules.forEach(B=>{x.push(...T(ve(B)))}),a.initializer)if(Array.isArray(a.initializer))for(let B of a.initializer)x.push(Se(B)),x.push("");else x.push(Se(a.initializer)),x.push("");return x.push("  peg$result = peg$startRuleFunction();","","  const peg$success = (peg$result !== peg$FAILED && peg$currPos === input.length);","  function peg$throw() {","    if (peg$result !== peg$FAILED && peg$currPos < input.length) {","      peg$fail(peg$endExpectation());","    }","","    throw peg$buildStructuredError(","      peg$maxFailExpected,","      peg$maxFailPos < input.length ? peg$getUnicode(peg$maxFailPos) : null,","      peg$maxFailPos < input.length","        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)","        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)","    );","  }","  if (options.peg$library) {","    return /** @type {any} */ ({","      peg$result,","      peg$currPos,","      peg$FAILED,","      peg$maxFailExpected,","      peg$maxFailPos,","      peg$success,","      peg$throw: peg$success ? undefined : peg$throw,","    });","  }","  if (peg$success) {","    return peg$result;","  } else {","    peg$throw();","  }","}"),new wt(null,null,t.grammarSource,x.map(B=>B instanceof wt?B:B+`
`))}function fe(x){function q(){return[`// @generated by Peggy ${Dy}.`,"//","// https://peggyjs.org/"]}function J(){let te=["{"];return t.trace&&te.push("  DefaultTracer: peg$DefaultTracer,"),t.allowedStartRules&&te.push("  StartRules: ["+t.allowedStartRules.map(Q=>'"'+Q+'"').join(", ")+"],"),te.push("  SyntaxError: peg$SyntaxError,","  parse: peg$parse,"),te.push("}"),te.join(`
`)}let B={bare(){if(Object.keys(h).length>0||a.imports.length>0)throw new Error("Dependencies not supported in format 'bare'.");return[...q(),"(function() {",'  "use strict";',x,T("return "+J()+";"),"})()"]},commonjs(){let te=Object.keys(h),Q=q();Q.push("",'"use strict";'),te.length>0&&(te.forEach(Re=>{Q.push("const "+Re+' = require("'+dt(h[Re])+'");')}),Q.push(""));let U=a.imports.length;for(let Re=0;Re<U;Re++)Q.push("const "+ye(Re)+' = require("'+dt(a.imports[Re].from.module)+'");');return Q.push("",x,"","module.exports = "+J()+";"),Q},es(){let te=Object.keys(h),Q=q();Q.push(""),te.length>0&&(te.forEach(U=>{Q.push("import "+U+' from "'+dt(h[U])+'";')}),Q.push(""));for(let U=0;U<a.imports.length;U++)Q.push("import * as "+ye(U)+' from "'+dt(a.imports[U].from.module)+'";');return Q.push("",x,""),Q.push("const peg$allowedStartRules = [","  "+(t.allowedStartRules?t.allowedStartRules.map(U=>'"'+U+'"').join(`,
  `):""),"];",""),Q.push("export {"),t.trace&&Q.push("  peg$DefaultTracer as DefaultTracer,"),Q.push("  peg$allowedStartRules as StartRules,","  peg$SyntaxError as SyntaxError,","  peg$parse as parse","};"),Q},amd(){if(a.imports.length>0)throw new Error("Imports are not supported in format 'amd'.");let te=Object.keys(h),U="["+te.map(Z=>h[Z]).map(Z=>'"'+dt(Z)+'"').join(", ")+"]",Re=te.join(", ");return[...q(),"define("+U+", function("+Re+") {",'  "use strict";',x,"",T("return "+J()+";"),"});"]},globals(){if(Object.keys(h).length>0||a.imports.length>0)throw new Error("Dependencies not supported in format 'globals'.");if(!t.exportVar)throw new Error("No export variable defined for format 'globals'.");return[...q(),"(function(root) {",'  "use strict";',x,"",T("root."+t.exportVar+" = "+J()+";"),"})(this);"]},umd(){if(a.imports.length>0)throw new Error("Imports are not supported in format 'umd'.");let te=Object.keys(h),Q=te.map(E=>h[E]),U="["+Q.map(E=>'"'+dt(E)+'"').join(", ")+"]",Re=Q.map(E=>'require("'+dt(E)+'")').join(", "),Z=te.join(", "),y=q();return y.push("(function(root, factory) {",'  if (typeof define === "function" && define.amd) {',"    define("+U+", factory);",'  } else if (typeof module === "object" && module.exports) {',"    module.exports = factory("+Re+");"),t.exportVar&&y.push("  } else {","    root."+t.exportVar+" = factory();"),y.push("  }","})(this, function("+Z+") {",'  "use strict";',x,"",T("return "+J()+";"),"});"),y}}[t.format||"bare"]();return new wt(null,null,t.grammarSource,B.map(te=>te instanceof wt?te:te+`
`))}a.code=fe(je())}cu.exports=By});var Us=F((Lw,lu)=>{"use strict";var zy=Lt(),Gy=pt();function Wy(a,t,e){function o(s){return s.type==="rule"&&s.expression.type==="rule_ref"}function r(s,n,c){Gy.build({rule_ref(h){h.name===n&&(h.name=c,e.info(`Proxy rule "${n}" replaced by the rule "${c}"`,h.location,[{message:"This rule will be used",location:zy.findRule(s,c).nameLocation}]))}})(s)}a.rules.forEach(s=>{o(s)&&r(a,s.name,s.expression.name)})}lu.exports=Wy});var Bs=F((Mw,du)=>{"use strict";var{stringEscape:uu}=Nr(),pu=pt(),{codePointLen1:Vy}=Nr();function fu(a,t){let e=a,o=t;Object.keys(e).forEach(r=>delete e[r]),Object.keys(o).forEach(r=>{e[r]=o[r]})}function Ky(a){a.sort((o,r)=>{let[s,n]=Array.isArray(o)?o:[o,o],[c,l]=Array.isArray(r)?r:[r,r];return s!==c?s<c?-1:1:n!==l?n>l?-1:1:0});let t="",e="";for(let o=0;o<a.length;o++){let r=a[o],[s,n]=Array.isArray(r)?r:[r,r];if(typeof s=="string"&&typeof n=="string"&&typeof t=="string"&&typeof e=="string"){if(n<=e){a.splice(o--,1);continue}if(e.charCodeAt(0)+1>=s.charCodeAt(0)){a.splice(o--,1),a[o]=[t,e=n];continue}}t=s,e=n}return a}var Hy=String.fromCodePoint(55295),Jy=55296,Yy=57343,Qy=String.fromCodePoint(57344);function Zy(a,t){pu.build({class(o){if(!o.unicode)return;let r=[];for(let s of o.parts)if(Array.isArray(s)){let[n,c]=s.map(l=>l.codePointAt(0));n<Jy&&c>Yy&&(t.info(`Removing surrogate range from [${uu(s[0])}-${uu(s[1])}]`,o.location),r.push([Qy,s[1]]),s[1]=Hy)}o.parts.push(...r)}})(a)}function Xy(a,t,e){let o=Object.create(null);a.rules.forEach(c=>o[c.name]=c.expression);let r=new Set;Zy(a,e);let[s,n]=[(c,l=!1)=>{switch(c.type){case"class":if(c.inverted)break;return l?{...c,parts:[...c.parts]}:c;case"literal":{let h=Vy(c.value);if(h<0)break;return{type:"class",parts:[c.value],inverted:!1,ignoreCase:c.ignoreCase,location:c.location,unicode:h>65535}}case"rule_ref":{let h=o[c.name];if(!h)break;r.has(c.name)||(r.add(c.name),n(h));let b=s(h,!0);return b&&(b.location=c.location),b}}return null},pu.build({choice(c){let l=null,h=!1;c.alternatives.forEach((b,T)=>{n(b);let A=s(b);if(!A){l=null;return}l&&l.ignoreCase===A.ignoreCase?(l.parts.push(...A.parts),c.alternatives[T-1]=l,c.alternatives[T]=l,l.unicode=l.unicode||A.unicode,l.location={source:l.location.source,start:l.location.start,end:A.location.end},h=!0):l=A}),h&&(c.alternatives=c.alternatives.filter((b,T,A)=>!T||b!==A[T-1]),c.alternatives.forEach((b,T)=>{b.type==="class"&&(b.parts=Ky(b.parts),b.parts.length===1&&!Array.isArray(b.parts[0])&&typeof b.parts[0]=="string"&&!b.inverted&&(c.alternatives[T]={type:"literal",value:b.parts[0],ignoreCase:b.ignoreCase,location:b.location}))}),c.alternatives.length===1&&fu(c,c.alternatives[0]))},text(c){if(n(c.expression),c.expression.type==="class"||c.expression.type==="literal"){let l=c.location;fu(c,c.expression),c.location=l}}})];a.rules.forEach(c=>{r.add(c.name),n(c.expression)})}du.exports=Xy});var zs=F((Fw,hu)=>{"use strict";var e1=pt();function t1(a,t,e){let o=Object.create(null);a.rules.forEach(c=>{o[c.name]=c});let r=[...t.allowedStartRules],s=new Set,n=e1.build({rule_ref(c){r.push(c.name)}});for(;r.length;){let c=r.shift();s.has(c)||(s.add(c),n(o[c]))}a.rules=a.rules.filter(c=>s.has(c.name)?!0:(e.info(`Removing unused rule: "${c.name}"`,c.location),!1))}hu.exports=t1});var Gs=F((Nw,mu)=>{"use strict";function r1(a,t,e){let o={};for(let r of a.imports)for(let s of r.what)s.type==="import_binding_all"&&(Object.prototype.hasOwnProperty.call(o,s.binding)&&e.error(`Module "${s.binding}" is already imported`,s.location,[{message:"Original module location",location:o[s.binding]}]),o[s.binding]=s.location)}mu.exports=r1});var Ws=F((jw,gu)=>{"use strict";var a1=pt();function n1(a,t,e){function o(n){let c={};return Object.keys(n).forEach(l=>{c[l]=n[l]}),c}function r(n,c){s(n.expression,o(c))}let s=a1.build({rule(n){s(n.expression,{})},choice(n,c){n.alternatives.forEach(l=>{s(l,o(c))})},action:r,labeled(n,c){let l=n.label;l&&Object.prototype.hasOwnProperty.call(c,l)&&e.error(`Label "${n.label}" is already defined`,n.labelLocation,[{message:"Original label location",location:c[l]}]),s(n.expression,c),c[n.label]=n.labelLocation},text:r,simple_and:r,simple_not:r,optional:r,zero_or_more:r,one_or_more:r,repeated(n,c){n.delimiter&&s(n.delimiter,o(c)),s(n.expression,o(c))},group:r});s(a)}gu.exports=n1});var Vs=F((kw,bu)=>{"use strict";var s1=pt();function o1(a,t,e){let o={};s1.build({rule(s){if(Object.prototype.hasOwnProperty.call(o,s.name)){e.error(`Rule "${s.name}" is already defined`,s.nameLocation,[{message:"Original rule location",location:o[s.name]}]);return}o[s.name]=s.nameLocation}})(a)}bu.exports=o1});var Hs=F((Dw,yu)=>{"use strict";var Ks=Lt(),i1=pt();function c1(a,t,e){let o=[],r=[],s=new Set,n=i1.build({rule(c){e.errors>0||s.has(c.name)||(s.add(c.name),o.push(c.name),n(c.expression),o.pop())},sequence(c){e.errors>0||c.elements.every(l=>(n(l),e.errors>0?!1:!Ks.alwaysConsumesOnSuccess(a,l)))},repeated(c){e.errors>0||(n(c.expression),c.delimiter&&!Ks.alwaysConsumesOnSuccess(a,c.expression)&&n(c.delimiter))},rule_ref(c){if(e.errors>0)return;r.push(c);let l=Ks.findRule(a,c.name);if(o.indexOf(c.name)!==-1){o.push(c.name),e.error("Possible infinite loop when parsing (left recursion: "+o.join(" -> ")+")",l.nameLocation,r.map((h,b,T)=>({message:b+1!==T.length?`Step ${b+1}: call of the rule "${h.name}" without input consumption`:`Step ${b+1}: calls itself without input consumption - left recursion`,location:h.location})));return}l&&n(l),r.pop()}});n(a)}yu.exports=c1});var Js=F((Uw,xu)=>{"use strict";var gn=Lt(),l1=pt();function u1(a,t,e){let o=l1.build({zero_or_more(r){gn.alwaysConsumesOnSuccess(a,r.expression)||e.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",r.location)},one_or_more(r){gn.alwaysConsumesOnSuccess(a,r.expression)||e.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",r.location)},repeated(r){if(r.delimiter&&o(r.delimiter),!(gn.alwaysConsumesOnSuccess(a,r.expression)||r.delimiter&&gn.alwaysConsumesOnSuccess(a,r.delimiter)))if(r.max.value===null)e.error("Possible infinite loop when parsing (unbounded range repetition used with an expression that may not consume any input)",r.location);else{let s=r.min?r.min:r.max;e.warning(s.type==="constant"&&r.max.type==="constant"?`An expression may not consume any input and may always match ${r.max.value} times`:"An expression may not consume any input and may always match with a maximum repetition count",r.location)}}});o(a)}xu.exports=u1});var Ys=F((Bw,vu)=>{"use strict";var f1=Lt(),p1=pt();function d1(a,t,e){p1.build({rule_ref(r){f1.findRule(a,r.name)||e.error(`Rule "${r.name}" is not defined`,r.location)}})(a)}vu.exports=d1});var Qs=F((zw,wu)=>{"use strict";var h1=pt();function m1(a,t,e){let o=h1.build({action(r){o(r.expression,r)},labeled(r,s){r.pick&&s&&e.error('"@" cannot be used with an action block',r.labelLocation,[{message:"Action block location",location:s.codeLocation}]),o(r.expression)}});o(a)}wu.exports=m1});var Tu=F((Gw,Su)=>{"use strict";var g1=pt(),{ALWAYS_MATCH:Zs,NEVER_MATCH:Au}=da();function b1(a,t,e){let o=g1.build({choice(r){r.alternatives.forEach(s=>o(s));for(let s=0;s<r.alternatives.length-1;s++){let n=r.alternatives[s];n.match===Zs&&e.warning("Always matches.  Following alternatives may not be reachable.",n.location)}},simple_and(r){o(r.expression),r.expression.match===Zs?e.warning("Always matches, making the & predicate redundant.",r.expression.location):r.expression.match===Au&&e.warning("Never matches, making the & predicate always fail.",r.expression.location)},simple_not(r){o(r.expression),r.expression.match===Zs?e.warning("Always matches, making the ! predicate always fail.",r.expression.location):r.expression.match===Au&&e.warning("Never matches, making the ! predicate redundant.",r.expression.location)}});o(a)}Su.exports=b1});var to=F((Ww,Eu)=>{"use strict";var y1=sn(),Xs=class{constructor(t){t=typeof t<"u"?t:{},typeof t.error=="function"&&(this.error=t.error),typeof t.warning=="function"&&(this.warning=t.warning),typeof t.info=="function"&&(this.info=t.info)}error(){}warning(){}info(){}},eo=class{constructor(t){this._callbacks=new Xs(t),this._firstError=null,this.errors=0,this.problems=[],this.stage=null}error(...t){++this.errors,this._firstError===null&&(this._firstError=new y1(...t),this._firstError.stage=this.stage,this._firstError.problems=this.problems),this.problems.push(["error",...t]),this._callbacks.error(this.stage,...t)}warning(...t){this.problems.push(["warning",...t]),this._callbacks.warning(this.stage,...t)}info(...t){this.problems.push(["info",...t]),this._callbacks.info(this.stage,...t)}checkErrors(){if(this.errors!==0)throw this._firstError}};Eu.exports=eo});var ro=F((exports,module)=>{"use strict";var addImportedRules=ws(),fixLibraryNumbers=As(),generateBytecode=Es(),generateJS=Ds(),inferenceMatchResult=da(),removeProxyRules=Us(),mergeCharacterClasses=Bs(),removeUnusedRules=zs(),reportDuplicateImports=Gs(),reportDuplicateLabels=Ws(),reportDuplicateRules=Vs(),reportInfiniteRecursion=Hs(),reportInfiniteRepetition=Js(),reportUndefinedRules=Ys(),reportIncorrectPlucking=Qs(),reportUnreachable=Tu(),Session=to(),visitor=pt(),{base64}=Nr();function processOptions(a,t){let e={};return Object.keys(a).forEach(o=>{e[o]=a[o]}),Object.keys(t).forEach(o=>{Object.prototype.hasOwnProperty.call(e,o)||(e[o]=t[o])}),e}function isSourceMapCapable(a){return typeof a=="string"?a.length>0:a&&typeof a.offset=="function"}var compiler={visitor,passes:{prepare:[addImportedRules,reportInfiniteRecursion],check:[reportUndefinedRules,reportDuplicateRules,reportDuplicateLabels,reportInfiniteRepetition,reportIncorrectPlucking,reportDuplicateImports],transform:[fixLibraryNumbers,removeProxyRules,mergeCharacterClasses,removeUnusedRules,inferenceMatchResult],semantic:[reportUnreachable],generate:[generateBytecode,generateJS]},compile(ast,passes,options){options=options!==void 0?options:{};let defaultStartRules=[ast.rules[0].name];if(options=processOptions(options,{allowedStartRules:defaultStartRules,cache:!1,dependencies:{},exportVar:null,format:"bare",output:"parser",trace:!1}),(options.allowedStartRules===null||options.allowedStartRules===void 0)&&(options.allowedStartRules=defaultStartRules),!Array.isArray(options.allowedStartRules))throw new Error("allowedStartRules must be an array");options.allowedStartRules.length===0&&(options.allowedStartRules=defaultStartRules);let allRules=ast.rules.map(a=>a.name);if(options.allowedStartRules.some(a=>a==="*"))options.allowedStartRules=allRules;else for(let a of options.allowedStartRules)if(allRules.indexOf(a)===-1)throw new Error(`Unknown start rule "${a}"`);if((options.output==="source-and-map"||options.output==="source-with-inline-map")&&!isSourceMapCapable(options.grammarSource))throw new Error("Must provide grammarSource (as a string or GrammarLocation) in order to generate source maps");let session=new Session(options);switch(Object.keys(passes).forEach(a=>{session.stage=a,session.info(`Process stage ${a}`),passes[a].forEach(t=>{session.info(`Process pass ${a}.${t.name}`),t(ast,options,session)}),session.checkErrors()}),options.output){case"parser":return eval(ast.code.toString());case"source":return ast.code.toString();case"source-and-map":return ast.code;case"source-with-inline-map":{if(typeof TextEncoder>"u")throw new Error("TextEncoder is not supported by this platform");let a=ast.code.toStringWithSourceMap(),t=new TextEncoder,e=base64(t.encode(JSON.stringify(a.map.toJSON())));return a.code+`//# sourceMappingURL=data:application/json;charset=utf-8;base64,${e}
`}case"ast":return ast;default:throw new Error("Invalid output format: "+options.output+".")}}};module.exports=compiler});var Jt=F((Vw,Pu)=>{"use strict";var x1=sn(),v1=pa(),w1=Lt(),A1=ro(),S1=Lr(),{version:T1}=Ns(),E1=["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","null","true","false","enum","implements","interface","let","package","private","protected","public","static","yield","await","arguments","eval"],ya={VERSION:T1,RESERVED_WORDS:E1,GrammarError:x1,GrammarLocation:v1,parser:S1,compiler:A1,generate(a,t){t=t!==void 0?t:{};function e(n){let c={};return Object.keys(n).forEach(l=>{c[l]=n[l].slice()}),c}let o="plugins"in t?t.plugins:[],r={parser:ya.parser,passes:e(ya.compiler.passes),reservedWords:ya.RESERVED_WORDS.slice()};o.forEach(n=>{n.use(r,t)}),Array.isArray(a)||(a=[{source:t.grammarSource,text:a}]);let s=w1.combine(a.map(({source:n,text:c})=>r.parser.parse(c,{grammarSource:n,reservedWords:r.reservedWords})));return ya.compiler.compile(s,r.passes,t)}};Pu.exports=ya});var Cu=F(()=>{"use strict";var _u=Ge(),jr=Lr(),{RESERVED_WORDS:P1}=Jt(),d=_u.expect;describe("Peggy grammar parser",()=>{let a={type:"literal",value:"abcd",ignoreCase:!1},t={type:"literal",value:"efgh",ignoreCase:!1},e={type:"literal",value:"ijkl",ignoreCase:!1},o={type:"literal",value:"mnop",ignoreCase:!1},r={type:"semantic_and",code:" code "},s={type:"semantic_not",code:" code "},n={type:"optional",expression:a},c={type:"zero_or_more",expression:a},l={type:"one_or_more",expression:a},h={type:"text",expression:n},b={type:"simple_not",expression:a},T={type:"simple_and",expression:n},A={type:"simple_not",expression:n},P={type:"labeled",label:"a",expression:a},H={type:"labeled",label:"b",expression:t},me={type:"labeled",label:"c",expression:e},ye={type:"labeled",label:"d",expression:o},_e={type:"labeled",label:"a",expression:b},ie={type:"sequence",elements:[a,t,e]},ne={type:"sequence",elements:[P,H]},Pe={type:"sequence",elements:[P,H,me,ye]},ve={type:"group",expression:P},Se={type:"group",expression:ie},je={type:"action",expression:a,code:" code "},fe={type:"action",expression:t,code:" code "},x={type:"action",expression:e,code:" code "},q={type:"action",expression:o,code:" code "},J={type:"action",expression:ie,code:" code "},j={type:"choice",alternatives:[a,t,e]},B={type:"choice",alternatives:[je,fe]},te={type:"choice",alternatives:[je,fe,x,q]},Q={type:"named",name:"start rule",expression:a},U={type:"rule",name:"a",expression:a},Re={type:"rule",name:"b",expression:t},Z={type:"rule",name:"c",expression:e},y={type:"rule",name:"start",expression:a},E={type:"top_level_initializer",code:" top level code "},N={type:"initializer",code:" code "};function R(O){return{type:"grammar",imports:[],topLevelInitializer:null,initializer:null,rules:[{type:"rule",name:"start",expression:O}]}}function Y(O){return R({type:"action",expression:a,code:O})}function D(O,be){return R({type:"literal",value:O,ignoreCase:be})}function k(O,be,Le,tt=!1){return R({type:"class",parts:O,inverted:be,ignoreCase:Le,unicode:tt})}function L(O){let be={type:"any"};return O&&(be.unicode=!0),R(be)}function K(O){return R({type:"rule_ref",name:O})}function X(O,be,Le="variable",tt=null){return R({type:"repeated",min:{type:typeof O=="string"?Le:"constant",value:O},max:{type:typeof be=="string"?Le:"constant",value:be},expression:a,delimiter:tt})}function se(O,be){return X(O,be,"function")}function pe(O,be){return X(O,be,"variable",t)}function he(O,be){return X(O,be,"function",t)}let oe=D("abcd",!1),xe={type:"grammar",imports:[],topLevelInitializer:null,initializer:null,rules:[U,Re]},Me=function(){function O(Te){return function(Qe,...jt){return Te[Qe.type](Qe,...jt)}}function be(Te){delete Te.location,delete Te.codeLocation,delete Te.nameLocation,delete Te.labelLocation}function Le(Te){delete Te.location,delete Te.codeLocation,delete Te.nameLocation,delete Te.labelLocation,Ve(Te.expression)}function tt(Te){return function(Qe){delete Qe.location,delete Qe.codeLocation,delete Qe.nameLocation,delete Qe.labelLocation,Qe[Te].forEach(Ve)}}let Ve=O({grammar(Te){delete Te.location,delete Te.codeLocation,delete Te.nameLocation,delete Te.labelLocation,Te.topLevelInitializer&&Ve(Te.topLevelInitializer),Te.initializer&&Ve(Te.initializer),Te.rules.forEach(Ve)},top_level_initializer:be,initializer:be,rule:Le,named:Le,choice:tt("alternatives"),action:Le,sequence:tt("elements"),labeled:Le,text:Le,simple_and:Le,simple_not:Le,optional:Le,zero_or_more:Le,one_or_more:Le,repeated(Te){Te.min&&(delete Te.min.location,delete Te.min.codeLocation),delete Te.max.location,delete Te.max.codeLocation,delete Te.location,Ve(Te.expression),Te.delimiter&&(delete Te.delimiter.location,Ve(Te.delimiter))},group:Le,semantic_and:be,semantic_not:be,rule_ref:be,library_ref:be,literal:be,class(Te){be(Te);for(let Qe of Te.parts)typeof Qe=="object"&&be(Qe)},any:be});return Ve}();function He(O,be){let Le=O.Assertion;Le.addMethod("parseAs",function(tt){let Ve=jr.parse(be.flag(this,"object"));Me(Ve),this.assert(be.eql(Ve,tt),"expected #{this} to parse as #{exp} but got #{act}","expected #{this} to not parse as #{exp}",tt,Ve,!be.flag(this,"negate"))}),Le.addMethod("failToParse",function(tt){let Ve=!1,Te;try{Te=jr.parse(be.flag(this,"object")),Ve=!0}catch(Qe){Te=Qe}Ve&&Me(Te),this.assert(!Ve,"expected #{this} to fail to parse but got #{act}","expected #{this} to not fail to parse but it failed with #{act}",null,Te),!Ve&&tt!==void 0&&Object.keys(tt).forEach(Qe=>{new Le(Te).to.have.property(Qe).that.is.deep.equal(tt[Qe])})})}beforeEach(()=>{_u.use(He)}),it("parses Grammar",()=>{d(`
a = 'abcd';
`).to.parseAs({type:"grammar",imports:[],topLevelInitializer:null,initializer:null,rules:[U]}),d(`
a = 'abcd'; /* comment */; // comment
;
b = 'efgh';
c = 'ijkl';
`).to.parseAs({type:"grammar",imports:[],topLevelInitializer:null,initializer:null,rules:[U,Re,Z]}),d(`
{ code };
a = 'abcd';
`).to.parseAs({type:"grammar",imports:[],topLevelInitializer:null,initializer:N,rules:[U]}),d(`
{{ top level code }};
a = 'abcd';
`).to.parseAs({type:"grammar",imports:[],topLevelInitializer:E,initializer:null,rules:[U]}),d(`
{{ top level code }};
{ code };
a = 'abcd';
`).to.parseAs({type:"grammar",imports:[],topLevelInitializer:E,initializer:N,rules:[U]}),d("").to.failToParse(),d("{{ ").to.failToParse(),d("{ ").to.failToParse(),d("{{}").to.failToParse(),d("{{}}\0").to.failToParse()}),it("parses Top-Level Initializer",()=>{d("{{ top level code }};start = 'abcd'").to.parseAs({type:"grammar",imports:[],topLevelInitializer:E,initializer:null,rules:[y]})}),it("parses Initializer",()=>{d("{ code };start = 'abcd'").to.parseAs({type:"grammar",imports:[],topLevelInitializer:null,initializer:N,rules:[y]})}),it("parses Rule",()=>{d(`start
=
'abcd';`).to.parseAs(R(a)),d(`start
'start rule'
=
'abcd';`).to.parseAs(R(Q))}),it("parses Expression",()=>{d("start = 'abcd' / 'efgh' / 'ijkl'").to.parseAs(R(j))}),it("parses ChoiceExpression",()=>{d("start = 'abcd' { code }").to.parseAs(R(je)),d(`start = 'abcd' { code }
/
'efgh' { code }`).to.parseAs(R(B)),d(`start = 'abcd' { code }
/
'efgh' { code }
/
'ijkl' { code }
/
'mnop' { code }`).to.parseAs(R(te)),d("start = 'a' / 'b' /").to.failToParse()}),it("parses ActionExpression",()=>{d("start = 'abcd' 'efgh' 'ijkl'").to.parseAs(R(ie)),d(`start = 'abcd' 'efgh' 'ijkl'
{ code }`).to.parseAs(R(J))}),it("parses SequenceExpression",()=>{d("start = a:'abcd'").to.parseAs(R(P)),d(`start = a:'abcd'
b:'efgh'`).to.parseAs(R(ne)),d(`start = a: 'abcd'
b :'efgh'`).to.parseAs(R(ne)),d(`start = a:'abcd'
b:'efgh'
c:'ijkl'
d:'mnop'`).to.parseAs(R(Pe)),d("start = a:'foo").to.failToParse()}),it("parses `@` (value plucking)",()=>{function O(...Le){return R({type:"sequence",elements:Le})}function be(Le,tt){return{type:"labeled",pick:!0,label:Le,expression:tt}}d("start = @'abcd'").to.parseAs(O(be(null,a))),d("start = @a:'abcd'").to.parseAs(O(be("a",a))),d("start = @a: 'abcd'").to.parseAs(O(be("a",a))),d("start = @a :'abcd'").to.parseAs(O(be("a",a))),d("start = @a : 'abcd'").to.parseAs(O(be("a",a))),d("start = 'abcd' @'efgh'").to.parseAs(O(a,be(null,t))),d("start = a:'abcd' @b:'efgh'").to.parseAs(O(P,be("b",t))),d("start = @'abcd' b:'efgh'").to.parseAs(O(be(null,a),H)),d("start = a:'abcd' @'efgh' 'ijkl' @d:'mnop'").to.parseAs(O(P,be(null,t),e,be("d",o)))}),it("parses LabeledExpression",()=>{d(`start = a
:
!'abcd'`).to.parseAs(R(_e)),d("start = !'abcd'").to.parseAs(R(b))}),it("parses PrefixedExpression",()=>{d(`start = !
'abcd'?`).to.parseAs(R(A)),d("start = 'abcd'?").to.parseAs(R(n))}),it("parses PrefixedOperator",()=>{d("start = $'abcd'?").to.parseAs(R(h)),d("start = &'abcd'?").to.parseAs(R(T)),d("start = !'abcd'?").to.parseAs(R(A))}),it("parses SuffixedExpression",()=>{d(`start = 'abcd'
?`).to.parseAs(R(n)),d("start = 'abcd'").to.parseAs(R(a))}),it("parses SuffixedOperator",()=>{d("start = 'abcd'?").to.parseAs(R(n)),d("start = 'abcd'*").to.parseAs(R(c)),d("start = 'abcd'+").to.parseAs(R(l))}),it("parses PrimaryExpression",()=>{d("start = 'abcd'").to.parseAs(oe),d("start = [a-d]").to.parseAs(k([["a","d"]],!1,!1)),d("start = .").to.parseAs(L()),d("start = a").to.parseAs(K("a")),d("start = &{ code }").to.parseAs(R(r)),d(`start = (
a:'abcd'
)`).to.parseAs(R(ve)),d(`start = (
'abcd' 'efgh' 'ijkl'
)`).to.parseAs(R(Se)),d(`start = (
'abcd'
)`).to.parseAs(oe),d("start = ('foo'").to.failToParse(),d("start = ('foo").to.failToParse()}),describe("parses RepeatedExpression",()=>{describe("without delimiter",()=>{it("with constant boundaries",()=>{let O=X(2,3);d("start = 'abcd'|2..3|  ").to.parseAs(O),d(`start = 'abcd'
|2..3|`).to.parseAs(O),d(`start = 'abcd'|
2..3|`).to.parseAs(O),d(`start = 'abcd'|2
..3|`).to.parseAs(O),d(`start = 'abcd'|2..
3|`).to.parseAs(O),d(`start = 'abcd'|2..3
|`).to.parseAs(O),O=R({type:"repeated",min:null,max:{type:"constant",value:3},expression:a,delimiter:null}),d(`start = 'abcd'
|3|`).to.parseAs(O),d(`start = 'abcd'|
3|`).to.parseAs(O),d(`start = 'abcd'|3
|`).to.parseAs(O)}),it("with variable boundaries",()=>{let O=X("min","max");d("start = 'abcd'|min..max|  ").to.parseAs(O),d(`start = 'abcd'
|min..max|`).to.parseAs(O),d(`start = 'abcd'|
min..max|`).to.parseAs(O),d(`start = 'abcd'|min
..max|`).to.parseAs(O),d(`start = 'abcd'|min..
max|`).to.parseAs(O),d(`start = 'abcd'|min..max
|`).to.parseAs(O),O=R({type:"repeated",min:null,max:{type:"variable",value:"exact"},expression:a,delimiter:null}),d(`start = 'abcd'
|exact|`).to.parseAs(O),d(`start = 'abcd'|
exact|`).to.parseAs(O),d(`start = 'abcd'|exact
|`).to.parseAs(O)}),it("with function boundaries",()=>{let O=se("min","max");d("start = 'abcd'|{min}..{max}|  ").to.parseAs(O),d(`start = 'abcd'
|{min}..{max}|`).to.parseAs(O),d(`start = 'abcd'|
{min}..{max}|`).to.parseAs(O),d(`start = 'abcd'|{min}
..{max}|`).to.parseAs(O),d(`start = 'abcd'|{min}..
{max}|`).to.parseAs(O),d(`start = 'abcd'|{min}..{max}
|`).to.parseAs(O),O=R({type:"repeated",min:null,max:{type:"function",value:"exact"},expression:a,delimiter:null}),d(`start = 'abcd'
|{exact}|`).to.parseAs(O),d(`start = 'abcd'|
{exact}|`).to.parseAs(O),d(`start = 'abcd'|{exact}
|`).to.parseAs(O)}),it("with mixed boundaries",()=>{let O=X(2,"max");d("start = 'abcd'|2..max|  ").to.parseAs(O),d(`start = 'abcd'
|2..max|`).to.parseAs(O),d(`start = 'abcd'|
2..max|`).to.parseAs(O),d(`start = 'abcd'|2
..max|`).to.parseAs(O),d(`start = 'abcd'|2..
max|`).to.parseAs(O),d(`start = 'abcd'|2..max
|`).to.parseAs(O),O=X("min",3),d("start = 'abcd'|min..3|  ").to.parseAs(O),d(`start = 'abcd'
|min..3|`).to.parseAs(O),d(`start = 'abcd'|
min..3|`).to.parseAs(O),d(`start = 'abcd'|min
..3|`).to.parseAs(O),d(`start = 'abcd'|min..
3|`).to.parseAs(O),d(`start = 'abcd'|min..3
|`).to.parseAs(O)})}),describe("with delimiter",()=>{it("with constant boundaries",()=>{let O=pe(2,3);d("start = 'abcd'|2..3,'efgh'|  ").to.parseAs(O),d(`start = 'abcd'
|2..3,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|
2..3,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|2
..3,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|2..
3,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|2..3
,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|2..3,
'efgh'|`).to.parseAs(O),d(`start = 'abcd'|2..3,'efgh'
|`).to.parseAs(O),d("start = 'abcd'|2..3,'efgh").to.failToParse(),O=R({type:"repeated",min:null,max:{type:"constant",value:3},expression:a,delimiter:t}),d(`start = 'abcd'
|3,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|
3,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|3
,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|3,
'efgh'|`).to.parseAs(O),d(`start = 'abcd'|3,'efgh'
|`).to.parseAs(O),d("start = 'abcd'|3, 'efgh'?|").to.parseAs(R({type:"repeated",min:null,max:{type:"constant",value:3},expression:a,delimiter:{type:"optional",expression:t}}))}),it("with variable boundaries",()=>{let O=pe("min","max");d("start = 'abcd'|min..max,'efgh'|  ").to.parseAs(O),d(`start = 'abcd'
|min..max,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|
min..max,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|min
..max,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|min..
max,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|min..max
,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|min..max,
'efgh'|`).to.parseAs(O),d(`start = 'abcd'|min..max,'efgh'
|`).to.parseAs(O),O=R({type:"repeated",min:null,max:{type:"variable",value:"exact"},expression:a,delimiter:t}),d(`start = 'abcd'
|exact,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|
exact,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|exact
,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|exact,
'efgh'|`).to.parseAs(O),d(`start = 'abcd'|exact,'efgh'
|`).to.parseAs(O),d("start = 'abcd'|exact, 'efgh'?|").to.parseAs(R({type:"repeated",min:null,max:{type:"variable",value:"exact"},expression:a,delimiter:{type:"optional",expression:t}}))}),it("with function boundaries",()=>{let O=he("min","max");d("start = 'abcd'|{min}..{max},'efgh'|  ").to.parseAs(O),d(`start = 'abcd'
|{min}..{max},'efgh'|`).to.parseAs(O),d(`start = 'abcd'|
{min}..{max},'efgh'|`).to.parseAs(O),d(`start = 'abcd'|{min}
..{max},'efgh'|`).to.parseAs(O),d(`start = 'abcd'|{min}..
{max},'efgh'|`).to.parseAs(O),d(`start = 'abcd'|{min}..{max}
,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|{min}..{max},
'efgh'|`).to.parseAs(O),d(`start = 'abcd'|{min}..{max},'efgh'
|`).to.parseAs(O),O=R({type:"repeated",min:null,max:{type:"function",value:"exact"},expression:a,delimiter:t}),d(`start = 'abcd'
|{exact},'efgh'|`).to.parseAs(O),d(`start = 'abcd'|
{exact},'efgh'|`).to.parseAs(O),d(`start = 'abcd'|{exact}
,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|{exact},
'efgh'|`).to.parseAs(O),d(`start = 'abcd'|{exact},'efgh'
|`).to.parseAs(O),d("start = 'abcd'|{exact}, 'efgh'?|").to.parseAs(R({type:"repeated",min:null,max:{type:"function",value:"exact"},expression:a,delimiter:{type:"optional",expression:t}}))}),it("with mixed boundaries",()=>{let O=pe(2,"max");d("start = 'abcd'|2..max,'efgh'|  ").to.parseAs(O),d(`start = 'abcd'
|2..max,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|
2..max,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|2
..max,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|2..
max,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|2..max
,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|2..max,
'efgh'|`).to.parseAs(O),d(`start = 'abcd'|2..max,'efgh'
|`).to.parseAs(O),O=pe("min",3),d("start = 'abcd'|min..3,'efgh'|  ").to.parseAs(O),d(`start = 'abcd'
|min..3,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|
min..3,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|min
..3,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|min..
3,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|min..3
,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|min..3,
'efgh'|`).to.parseAs(O),d(`start = 'abcd'|min..3,'efgh'
|`).to.parseAs(O),O=he(2,"max"),d("start = 'abcd'|2..{max},'efgh'|  ").to.parseAs(O),d(`start = 'abcd'
|2..{max},'efgh'|`).to.parseAs(O),d(`start = 'abcd'|
2..{max},'efgh'|`).to.parseAs(O),d(`start = 'abcd'|2
..{max},'efgh'|`).to.parseAs(O),d(`start = 'abcd'|2..
{max},'efgh'|`).to.parseAs(O),d(`start = 'abcd'|2..{max}
,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|2..{max},
'efgh'|`).to.parseAs(O),d(`start = 'abcd'|2..{max},'efgh'
|`).to.parseAs(O),O=he("min",3),d("start = 'abcd'|{min}..3,'efgh'|  ").to.parseAs(O),d(`start = 'abcd'
|{min}..3,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|
{min}..3,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|{min}
..3,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|{min}..
3,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|{min}..3
,'efgh'|`).to.parseAs(O),d(`start = 'abcd'|{min}..3,
'efgh'|`).to.parseAs(O),d(`start = 'abcd'|{min}..3,'efgh'
|`).to.parseAs(O)})})}),describe("parses RepeatedOperator",()=>{describe("without delimiter",()=>{it("with constant boundaries",()=>{d("start = 'abcd'| .. |").to.parseAs(X(0,null)),d("start = 'abcd'|0.. |").to.parseAs(X(0,null)),d("start = 'abcd'|1.. |").to.parseAs(X(1,null)),d("start = 'abcd'|2.. |").to.parseAs(X(2,null)),d("start = 'abcd'| ..1|").to.parseAs(X(0,1)),d("start = 'abcd'| ..2|").to.parseAs(X(0,2)),d("start = 'abcd'|2..2|").to.parseAs(X(2,2)),d("start = 'abcd'|2..3|").to.parseAs(X(2,3)),d("start = 'abcd'|3|   ").to.parseAs(R({type:"repeated",min:null,max:{type:"constant",value:3},expression:a,delimiter:null})),d("start = 'abcd'| ..0|").to.failToParse(),d("start = 'abcd'|0..0|").to.failToParse(),d("start = 'abcd'|0|   ").to.failToParse()}),it("with variable boundaries",()=>{d("start = 'abcd'|min..   |").to.parseAs(X("min",null)),d("start = 'abcd'|   ..max|").to.parseAs(X(0,"max")),d("start = 'abcd'|min..max|").to.parseAs(X("min","max")),d("start = 'abcd'|exact|   ").to.parseAs(R({type:"repeated",min:null,max:{type:"variable",value:"exact"},expression:a,delimiter:null}))}),it("with function boundaries",()=>{d("start = 'abcd'|{min}..     |").to.parseAs(se("min",null)),d("start = 'abcd'|     ..{max}|").to.parseAs(se(0,"max")),d("start = 'abcd'|{min}..{max}|").to.parseAs(se("min","max")),d("start = 'abcd'|{exact}|     ").to.parseAs(R({type:"repeated",min:null,max:{type:"function",value:"exact"},expression:a,delimiter:null}))}),it("with mixed boundaries",()=>{d("start = 'abcd'|2..max|").to.parseAs(X(2,"max")),d("start = 'abcd'|min..3|").to.parseAs(X("min",3)),d("start = 'abcd'|2..{max}|").to.parseAs(se(2,"max")),d("start = 'abcd'|{min}..3|").to.parseAs(se("min",3))})}),describe("with delimiter",()=>{it("with constant boundaries",()=>{d("start = 'abcd'| .. , 'efgh'|").to.parseAs(pe(0,null)),d("start = 'abcd'|0.. , 'efgh'|").to.parseAs(pe(0,null)),d("start = 'abcd'|1.. , 'efgh'|").to.parseAs(pe(1,null)),d("start = 'abcd'|2.. , 'efgh'|").to.parseAs(pe(2,null)),d("start = 'abcd'| ..1, 'efgh'|").to.parseAs(pe(0,1)),d("start = 'abcd'| ..2, 'efgh'|").to.parseAs(pe(0,2)),d("start = 'abcd'|2..2, 'efgh'|").to.parseAs(pe(2,2)),d("start = 'abcd'|2..3, 'efgh'|").to.parseAs(pe(2,3)),d("start = 'abcd'|3   , 'efgh'|").to.parseAs(R({type:"repeated",min:null,max:{type:"constant",value:3},expression:a,delimiter:t})),d("start = 'abcd'| ..0, 'efgh'|").to.failToParse(),d("start = 'abcd'|0..0, 'efgh'|").to.failToParse(),d("start = 'abcd'|0   , 'efgh'|").to.failToParse()}),it("with variable boundaries",()=>{d("start = 'abcd'|min..   , 'efgh'|").to.parseAs(pe("min",null)),d("start = 'abcd'|   ..max, 'efgh'|").to.parseAs(pe(0,"max")),d("start = 'abcd'|min..max, 'efgh'|").to.parseAs(pe("min","max")),d("start = 'abcd'|exact, 'efgh'|   ").to.parseAs(R({type:"repeated",min:null,max:{type:"variable",value:"exact"},expression:a,delimiter:t}))}),it("with function boundaries",()=>{d("start = 'abcd'|{min}..     , 'efgh'|").to.parseAs(he("min",null)),d("start = 'abcd'|     ..{max}, 'efgh'|").to.parseAs(he(0,"max")),d("start = 'abcd'|{min}..{max}, 'efgh'|").to.parseAs(he("min","max")),d("start = 'abcd'|{exact},      'efgh'|").to.parseAs(R({type:"repeated",min:null,max:{type:"function",value:"exact"},expression:a,delimiter:t}))}),it("with mixed boundaries",()=>{d("start = 'abcd'|2..max, 'efgh'|").to.parseAs(pe(2,"max")),d("start = 'abcd'|min..3, 'efgh'|").to.parseAs(pe("min",3)),d("start = 'abcd'|2..{max}, 'efgh'|").to.parseAs(he(2,"max")),d("start = 'abcd'|{min}..3, 'efgh'|").to.parseAs(he("min",3))})})}),it("parses RuleReferenceExpression",()=>{d("start = a").to.parseAs(K("a")),d(`start = a
=`).to.failToParse(),d(`start = a
'abcd'
=`).to.failToParse(),d("start = a.\0").to.failToParse()}),it("parses SemanticPredicateExpression",()=>{d(`start = !
{ code }`).to.parseAs(R(s)),d("start = !{").to.failToParse(),d("start = &{").to.failToParse(),d("start = &{ ").to.failToParse(),d("start = &{  ").to.failToParse(),d("start = &{{").to.failToParse(),d("start = &{{ ").to.failToParse(),d("start = &{{  ").to.failToParse(),d("start = &{{   ").to.failToParse(),d("start = &{{}").to.failToParse(),d("start = &{{} ").to.failToParse(),d("start = &{{}  ").to.failToParse(),d("start = &{{}{}").to.failToParse(),d("start = &{{}{} ").to.failToParse(),d("start = &{{}{}  ").to.failToParse(),d("start = &{{}{}{").to.failToParse(),d("start = &{{}{}{ ").to.failToParse(),d("start = &{{}{}{  ").to.failToParse()}),it("parses SemanticPredicateOperator",()=>{d("start = &{ code }").to.parseAs(R(r)),d("start = !{ code }").to.parseAs(R(s))}),it("parses SourceCharacter",()=>{d("start = '\u{1F4A9}' // \u{1F4A9}").to.parseAs(D("\u{1F4A9}",!1)),d('start = "\u{1F4A9}" // \u{1F4A9}').to.parseAs(D("\u{1F4A9}",!1)),d("start = '\uD83D' // \uD83D").to.parseAs(D("\uD83D",!1)),d("start = '\uDCA9' // \uDCA9").to.parseAs(D("\uDCA9",!1)),d("start = '\uDCA9\uD83D' // \uDCA9\uD83D").to.parseAs(D("\uDCA9\uD83D",!1))}),it("parses WhiteSpace",()=>{d("start =	'abcd'").to.parseAs(oe),d("start =\v'abcd'").to.parseAs(oe),d("start =\f'abcd'").to.parseAs(oe),d("start = 'abcd'").to.parseAs(oe),d("start =\xA0'abcd'").to.parseAs(oe),d("start =\uFEFF'abcd'").to.parseAs(oe),d("start =\u1680'abcd'").to.parseAs(oe)}),it("parses LineTerminator",()=>{d(`start = '
'`).to.failToParse(),d("start = '\r'").to.failToParse(),d("start = '\u2028'").to.failToParse(),d("start = '\u2029'").to.failToParse()}),it("parses LineTerminatorSequence",()=>{d(`start =
'abcd'`).to.parseAs(oe),d(`start =\r
'abcd'`).to.parseAs(oe),d("start =\r'abcd'").to.parseAs(oe),d("start =\u2028'abcd'").to.parseAs(oe),d("start =\u2029'abcd'").to.parseAs(oe)}),it("parses Comment",()=>{d(`start =// comment
'abcd'`).to.parseAs(oe),d("start =/* comment */'abcd'").to.parseAs(oe)}),it("parses MultiLineComment",()=>{d("start =/**/'abcd'").to.parseAs(oe),d("start =/*a*/'abcd'").to.parseAs(oe),d("start =/*abc*/'abcd'").to.parseAs(oe),d("start =/**/*/'abcd'").to.failToParse(),d("start = /*").to.failToParse(),d("start = /* ").to.failToParse(),d("start = /*  ").to.failToParse(),d("start = 'foo'/*").to.failToParse(),d("start = 'foo'/* ").to.failToParse(),d("start = 'foo'/*  ").to.failToParse()}),it("parses MultiLineCommentNoLineTerminator",()=>{d(`a = 'abcd'/**/\r
b = 'efgh'`).to.parseAs(xe),d(`a = 'abcd'/*a*/\r
b = 'efgh'`).to.parseAs(xe),d(`a = 'abcd'/*abc*/\r
b = 'efgh'`).to.parseAs(xe),d(`a = 'abcd'/**/*/\r
b = 'efgh'`).to.failToParse(),d(`a = 'abcd'/*
*/\r
b = 'efgh'`).to.failToParse()}),it("parses SingleLineComment",()=>{d(`start =//
'abcd'`).to.parseAs(oe),d(`start =//a
'abcd'`).to.parseAs(oe),d(`start =//abc
'abcd'`).to.parseAs(oe),d("//").to.failToParse(),d("// ").to.failToParse(),d("//  ").to.failToParse(),d(`start =//
@
'abcd'`).to.failToParse()}),it("parses Identifier",()=>{d("start = a:'abcd'").to.parseAs(R(P))}),it("parses IdentifierName",()=>{d("start = a").to.parseAs(K("a")),d("start = ab").to.parseAs(K("ab")),d("start = abcd").to.parseAs(K("abcd"))}),it("parses IdentifierStart",()=>{d("start = a").to.parseAs(K("a")),d("start = $").to.failToParse(),d("$start = a").to.failToParse(),d("start = a$b").to.parseAs(K("a$b")),d("start = _").to.parseAs(K("_")),d("start = \\u0061").to.parseAs(K("a")),d("start = \\").to.failToParse()}),it("parses IdentifierPart",()=>{d("start = aa").to.parseAs(K("aa")),d("start = a\u0300").to.parseAs(K("a\u0300")),d("start = a0").to.parseAs(K("a0")),d("start = a\u203F").to.parseAs(K("a\u203F")),d("start = a\u200C").to.parseAs(K("a\u200C")),d("start = a\u200D").to.parseAs(K("a\u200D"))}),it("parses LiteralMatcher",()=>{d("start = 'abcd'").to.parseAs(D("abcd",!1)),d("start = 'abcd'i").to.parseAs(D("abcd",!0))}),it("parses StringLiteral",()=>{d('start = ""').to.parseAs(D("",!1)),d('start = "a"').to.parseAs(D("a",!1)),d('start = "abc"').to.parseAs(D("abc",!1)),d("start = ''").to.parseAs(D("",!1)),d("start = 'a'").to.parseAs(D("a",!1)),d("start = 'abc'").to.parseAs(D("abc",!1))}),it("parses DoubleStringCharacter",()=>{d('start = "a"').to.parseAs(D("a",!1)),d('start = "\\n"').to.parseAs(D(`
`,!1)),d(`start = "\\
"`).to.parseAs(D("",!1)),d('start = """').to.failToParse(),d('start = "\\"').to.failToParse(),d(`start = "
"`).to.failToParse()}),it("parses SingleStringCharacter",()=>{d("start = 'a'").to.parseAs(D("a",!1)),d("start = '\\n'").to.parseAs(D(`
`,!1)),d(`start = '\\
'`).to.parseAs(D("",!1)),d("start = '''").to.failToParse(),d("start = '\\'").to.failToParse(),d(`start = '
'`).to.failToParse()}),it("parses CharacterClassMatcher",()=>{d("start = []").to.parseAs(k([],!1,!1)),d("start = [a-d]").to.parseAs(k([["a","d"]],!1,!1)),d("start = [a]").to.parseAs(k(["a"],!1,!1)),d("start = [a-de-hi-l]").to.parseAs(k([["a","d"],["e","h"],["i","l"]],!1,!1)),d("start = [^a-d]").to.parseAs(k([["a","d"]],!0,!1)),d("start = [a-d]i").to.parseAs(k([["a","d"]],!1,!0)),d(`start = [\\
]`).to.parseAs(k([],!1,!1)),d("start = [\u{1F4A9}]").to.parseAs(k(["\u{1F4A9}"],!1,!1,!0)),d("start = [\\u{1F4A9}]").to.parseAs(k(["\u{1F4A9}"],!1,!1,!0)),d("start = [\u{1F4A9}-\u{1F4B0}]").to.parseAs(k([["\u{1F4A9}","\u{1F4B0}"]],!1,!1,!0)),d("start = [\\u{1F4A9}-\\u{1F4B0}]").to.parseAs(k([["\u{1F4A9}","\u{1F4B0}"]],!1,!1,!0)),d("start = [\\u{g}]").to.failToParse(),d("start = [\\u{1g}]").to.failToParse(),d("start = [\\u{12g}]").to.failToParse(),d("start = [\\u{123g}]").to.failToParse(),d("start = [\\xgg]").to.failToParse(),d("start = [a]uu").to.failToParse(),d("start = [a]ii").to.failToParse(),d("start = [a]iui").to.failToParse(),d("start = [a]uiu").to.failToParse(),d("start = [^a]u").to.parseAs(k(["a"],!0,!1,!0)),d("start = [^a]ui").to.parseAs(k(["a"],!0,!0,!0)),d("start = [^a]iu").to.parseAs(k(["a"],!0,!0,!0)),d("start = [^]u").to.parseAs(k([["\uD800","\uDFFF"]],!0,!1,!0)),d("start = [\\p{ASCII}]").to.parseAs(k([{type:"classEscape",value:"p{ASCII}",unicode:!0}],!1,!1,!0)),d("start = [\\P{ASCII}]").to.parseAs(k([{type:"classEscape",value:"P{ASCII}",unicode:!0}],!1,!1,!0)),d("start = [\\p{gc=Nd}]").to.parseAs(k([{type:"classEscape",value:"p{gc=Nd}",unicode:!0}],!1,!1,!0)),d("start = [\\p{Script=New_Tai_Lue}]").to.parseAs(k([{type:"classEscape",value:"p{Script=New_Tai_Lue}",unicode:!0}],!1,!1,!0)),d("start = [\\p]").to.failToParse(),d("start = [\\p{]").to.failToParse(),d("start = [\\p{a]").to.failToParse(),d("start = [\\p{a=]").to.failToParse(),d("start = [\\p{a=b]").to.failToParse(),d("start = [\\p{\u0661}]").to.failToParse(),d("start = [\\p{foooo}]u").to.failToParse()}),it("parses ClassCharacterRange",()=>{d("start = [a-d]").to.parseAs(k([["a","d"]],!1,!1)),d("start = [a-a]").to.parseAs(k([["a","a"]],!1,!1)),d("start = [b-a]").to.failToParse({message:"Invalid character range: b-a."}),d("start = [b-").to.failToParse()}),it("parses ClassCharacter",()=>{d("start = [a]").to.parseAs(k(["a"],!1,!1)),d("start = [\\n]").to.parseAs(k([`
`],!1,!1)),d(`start = [\\
]`).to.parseAs(k([],!1,!1)),d("start = []]").to.failToParse(),d("start = [\\]").to.failToParse(),d(`start = [
]`).to.failToParse()}),it("parses LineContinuation",()=>{d(`start = '\\\r
'`).to.parseAs(D("",!1))}),it("parses EscapeSequence",()=>{d("start = '\\n'").to.parseAs(D(`
`,!1)),d("start = '\\0'").to.parseAs(D("\0",!1)),d("start = '\\xFF'").to.parseAs(D("\xFF",!1)),d("start = '\\uFFFF'").to.parseAs(D("\uFFFF",!1)),d("start = '\\c'").to.parseAs(D("c",!1)),d("start = '\\09'").to.failToParse(),d("start = '\\").to.failToParse()}),it("parses CharacterEscapeSequence",()=>{d("start = '\\n'").to.parseAs(D(`
`,!1)),d("start = '\\a'").to.parseAs(D("a",!1))}),it("parses SingleEscapeCharacter",()=>{d("start = '\\''").to.parseAs(D("'",!1)),d(`start = '\\"'`).to.parseAs(D('"',!1)),d("start = '\\\\'").to.parseAs(D("\\",!1)),d("start = '\\b'").to.parseAs(D("\b",!1)),d("start = '\\f'").to.parseAs(D("\f",!1)),d("start = '\\n'").to.parseAs(D(`
`,!1)),d("start = '\\r'").to.parseAs(D("\r",!1)),d("start = '\\t'").to.parseAs(D("	",!1)),d("start = '\\v'").to.parseAs(D("\v",!1))}),it("parses NonEscapeCharacter",()=>{d("start = '\\a'").to.parseAs(D("a",!1))}),it("parses HexEscapeSequence",()=>{d("start = '\\xFF'").to.parseAs(D("\xFF",!1)),d("start = '\\x").to.failToParse(),d("start = '\\xF").to.failToParse()}),it("parses UnicodeEscapeSequence",()=>{d("start = '\\uFFFF'").to.parseAs(D("\uFFFF",!1)),d("start = '\\u").to.failToParse(),d("start = '\\uF").to.failToParse(),d("start = '\\uFF").to.failToParse(),d("start = '\\uFFF").to.failToParse()}),it("parses AnyMatcher",()=>{d("start = .").to.parseAs(L())}),it("parses CodeBlock",()=>{d("start = 'abcd' { code }").to.parseAs(Y(" code "))}),it("parses Code",()=>{d("start = 'abcd' {a}").to.parseAs(Y("a")),d("start = 'abcd' {abc}").to.parseAs(Y("abc")),d("start = 'abcd' {{a}}").to.parseAs(Y("{a}")),d("start = 'abcd' {{a}{b}{c}}").to.parseAs(Y("{a}{b}{c}")),d("start = 'abcd' {{}").to.failToParse(),d("start = 'abcd' {}}").to.failToParse()}),it("parses __",()=>{d("start ='abcd'").to.parseAs(oe),d("start = 'abcd'").to.parseAs(oe),d(`start =\r
'abcd'`).to.parseAs(oe),d("start =/* comment */'abcd'").to.parseAs(oe),d("start =   'abcd'").to.parseAs(oe)}),it("parses _",()=>{d(`a = 'abcd'\r
b = 'efgh'`).to.parseAs(xe),d(`a = 'abcd' \r
b = 'efgh'`).to.parseAs(xe),d(`a = 'abcd'/* comment */\r
b = 'efgh'`).to.parseAs(xe),d(`a = 'abcd'   \r
b = 'efgh'`).to.parseAs(xe)}),it("parses EOS",()=>{d(`a = 'abcd'
;b = 'efgh'`).to.parseAs(xe),d(`a = 'abcd' \r
b = 'efgh'`).to.parseAs(xe),d(`a = 'abcd' // comment\r
b = 'efgh'`).to.parseAs(xe),d(`a = 'abcd'
b = 'efgh'`).to.parseAs(xe)}),it("parses EOF",()=>{d(`start = 'abcd'
`).to.parseAs(oe)}),it("generates codeLocation / nameLocation / labelLocation",()=>{let O=jr.parse(`
{{
  const foo = 12;
}}
{
  const bar = 13;
}
a = label:'abcd' &{ return true; } !{ return false; } { return 'so true'; }
b = @LABEL:'efgh'
c = @'ijkl'
`);d(O).to.eql({type:"grammar",imports:[],topLevelInitializer:{type:"top_level_initializer",code:`
  const foo = 12;
`,codeLocation:{source:void 0,start:{offset:3,line:2,column:3},end:{offset:22,line:4,column:1}},location:{source:void 0,start:{offset:1,line:2,column:1},end:{offset:25,line:5,column:1}}},initializer:{type:"initializer",code:`
  const bar = 13;
`,codeLocation:{source:void 0,start:{offset:26,line:5,column:2},end:{offset:45,line:7,column:1}},location:{source:void 0,start:{offset:25,line:5,column:1},end:{offset:47,line:8,column:1}}},rules:[{type:"rule",name:"a",nameLocation:{source:void 0,start:{offset:47,line:8,column:1},end:{offset:48,line:8,column:2}},expression:{type:"action",expression:{type:"sequence",elements:[{type:"labeled",label:"label",labelLocation:{source:void 0,start:{offset:51,line:8,column:5},end:{offset:56,line:8,column:10}},expression:{type:"literal",value:"abcd",ignoreCase:!1,location:{source:void 0,start:{offset:57,line:8,column:11},end:{offset:63,line:8,column:17}}},location:{source:void 0,start:{offset:51,line:8,column:5},end:{offset:63,line:8,column:17}}},{type:"semantic_and",code:" return true; ",codeLocation:{source:void 0,start:{offset:66,line:8,column:20},end:{offset:80,line:8,column:34}},location:{source:void 0,start:{offset:64,line:8,column:18},end:{offset:81,line:8,column:35}}},{type:"semantic_not",code:" return false; ",codeLocation:{source:void 0,start:{offset:84,line:8,column:38},end:{offset:99,line:8,column:53}},location:{source:void 0,start:{offset:82,line:8,column:36},end:{offset:100,line:8,column:54}}}],location:{source:void 0,start:{offset:51,line:8,column:5},end:{offset:100,line:8,column:54}}},code:" return 'so true'; ",codeLocation:{source:void 0,start:{offset:102,line:8,column:56},end:{offset:121,line:8,column:75}},location:{source:void 0,start:{offset:51,line:8,column:5},end:{offset:122,line:8,column:76}}},location:{source:void 0,start:{offset:47,line:8,column:1},end:{offset:123,line:9,column:1}}},{type:"rule",name:"b",nameLocation:{source:void 0,start:{offset:123,line:9,column:1},end:{offset:124,line:9,column:2}},expression:{type:"sequence",elements:[{type:"labeled",label:"LABEL",labelLocation:{source:void 0,start:{offset:128,line:9,column:6},end:{offset:133,line:9,column:11}},pick:!0,expression:{type:"literal",value:"efgh",ignoreCase:!1,location:{source:void 0,start:{offset:134,line:9,column:12},end:{offset:140,line:9,column:18}}},location:{source:void 0,start:{offset:127,line:9,column:5},end:{offset:140,line:9,column:18}}}],location:{source:void 0,start:{offset:127,line:9,column:5},end:{offset:140,line:9,column:18}}},location:{source:void 0,start:{offset:123,line:9,column:1},end:{offset:141,line:10,column:1}}},{type:"rule",name:"c",nameLocation:{source:void 0,start:{offset:141,line:10,column:1},end:{offset:142,line:10,column:2}},expression:{type:"sequence",elements:[{type:"labeled",label:null,labelLocation:{source:void 0,start:{offset:145,line:10,column:5},end:{offset:146,line:10,column:6}},pick:!0,expression:{type:"literal",value:"ijkl",ignoreCase:!1,location:{source:void 0,start:{offset:146,line:10,column:6},end:{offset:152,line:10,column:12}}},location:{source:void 0,start:{offset:145,line:10,column:5},end:{offset:152,line:10,column:12}}}],location:{source:void 0,start:{offset:145,line:10,column:5},end:{offset:152,line:10,column:12}}},location:{source:void 0,start:{offset:141,line:10,column:1},end:{offset:153,line:11,column:1}}}],location:{source:void 0,start:{offset:0,line:1,column:1},end:{offset:153,line:11,column:1}}})}),it("handles ImportsAndSource",()=>{let O={startRule:"ImportsAndSource",reservedWords:P1};for(let be of["","import foo","import 'foo';","import bar, baz from 'foo';","import * boo","import * as ","import * as ;","import {foo","import {foo,","import {foo, bar","import {foo, bar,","import {;","import from;","import * from;","import {foo} from;","import {foo as}"])d(()=>jr.parse(be,O)).to.not.throw();for(let be of["import while from 'bar'"])d(()=>jr.parse(be,O)).to.throw()}),it("handles peg$library",()=>{let O=jr.parse("foo",{peg$library:!0});d(typeof O.peg$throw).to.eql("function"),delete O.peg$throw,d(O).to.eql({peg$result:{},peg$currPos:0,peg$FAILED:{},peg$maxFailExpected:[{type:"other",description:"whitespace"},{type:"other",description:"end of line"},{type:"other",description:"comment"},{type:"other",description:"string"},{type:"literal",text:"=",ignoreCase:!1}],peg$maxFailPos:3,peg$success:!1})})})});var $u=F(()=>{"use strict";var _1=Ge(),{GrammarError:Ft,GrammarLocation:C1}=Jt(),Xe=_1.expect,xt={source:void 0,start:{offset:0,line:1,column:1},end:{offset:4,line:1,column:5}};describe("Grammar Errors",()=>{it("might not have a location",()=>{let a=new Ft("message");Xe(a.location).to.equal(void 0),Xe(a.toString()).to.equal("GrammarError: message")}),it("might have locations",()=>{xt.source=void 0;let a=new Ft("message",xt);Xe(a.location).to.eql(xt),Xe(a.toString()).to.equal(`GrammarError: message
 at 1:1`),a=new Ft("message",null,[{message:"Subinfo",location:xt}]),Xe(a.location).to.equal(null),Xe(a.toString()).to.equal(`GrammarError: message
 from 1:1: Subinfo`),xt.source="foo.peggy",a=new Ft("message",xt,[{message:"Subinfo",location:xt}]),Xe(a.toString()).to.equal(`GrammarError: message
 at foo.peggy:1:1
 from foo.peggy:1:1: Subinfo`)}),describe("formats",()=>{let a={source:"foo.peggy",text:`some error
that`},t={source:"foo.peggy",start:{offset:5,line:1,column:6},end:{offset:11,line:2,column:1}},e=[{message:"Subinfo",location:t}];describe("single problem",()=>{describe("with main location",()=>{xt.source="foo.peggy";let o=new Ft("message",xt,e);it("with zero-length error at the end",()=>{let r=new Ft("message",{source:"foo.peggy",start:{offset:4,line:1,column:5},end:{offset:4,line:1,column:5}});Xe(r.format([a])).to.equal(`error: message
 --> foo.peggy:1:5
  |
1 | some error
  |     ^`)}),it("with source",()=>{Xe(o.format([a])).to.equal(`error: message
 --> foo.peggy:1:1
  |
1 | some error
  | ^^^^
note: Subinfo
 --> foo.peggy:1:6
  |
1 | some error
  |      ^^^^^`)}),it("without source",()=>{Xe(o.format([])).to.equal(`error: message
 at foo.peggy:1:1
 at foo.peggy:1:6: Subinfo`)})}),describe("without main location",()=>{let o=new Ft("message",null,e);it("with source",()=>{Xe(o.format([a])).to.equal(`error: message
note: Subinfo
 --> foo.peggy:1:6
  |
1 | some error
  |      ^^^^^`)}),it("without source",()=>{Xe(o.format([])).to.equal(`error: message
 at foo.peggy:1:6: Subinfo`)})})}),describe("several problems",()=>{describe("with main location",()=>{xt.source="foo.peggy";let o=new Ft("message",xt,e);o.problems.push(["warning","Warning message",t,[{message:"Warning Subinfo",location:t}]]),o.problems.push(["info","Info message",null,[]]),it("null source text",()=>{Xe(o.format([{source:null,text:null}])).to.equal(`error: message
 at foo.peggy:1:1
 at foo.peggy:1:6: Subinfo

warning: Warning message
 at foo.peggy:1:6
 at foo.peggy:1:6: Warning Subinfo`),Xe(o.format([{source:null,text:void 0}])).to.equal(`error: message
 at foo.peggy:1:1
 at foo.peggy:1:6: Subinfo

warning: Warning message
 at foo.peggy:1:6
 at foo.peggy:1:6: Warning Subinfo`)}),it("with source",()=>{Xe(o.format([a])).to.equal(`error: message
 --> foo.peggy:1:1
  |
1 | some error
  | ^^^^
note: Subinfo
 --> foo.peggy:1:6
  |
1 | some error
  |      ^^^^^

warning: Warning message
 --> foo.peggy:1:6
  |
1 | some error
  |      ^^^^^
note: Warning Subinfo
 --> foo.peggy:1:6
  |
1 | some error
  |      ^^^^^`)}),it("with GrammarLocation",()=>{let r=new C1("foo.peggy",{offset:12,line:15,column:8});Xe(String(r)).to.equal("foo.peggy"),xt.source=r,t.source=r,o.diagnostics.push({message:"Column not offset",location:{source:r,start:{offset:11,line:2,column:1},end:{offset:15,line:2,column:5}}}),Xe(o.format([{source:r,text:a.text}])).to.equal(`error: message
 --> foo.peggy:15:8
   |
15 | some error
   | ^^^^
note: Subinfo
 --> foo.peggy:15:13
   |
15 | some error
   |      ^^^^^
note: Column not offset
 --> foo.peggy:16:1
   |
16 | that
   | ^^^^

warning: Warning message
 --> foo.peggy:15:13
   |
15 | some error
   |      ^^^^^
note: Warning Subinfo
 --> foo.peggy:15:13
   |
15 | some error
   |      ^^^^^`),xt.source="foo.peggy",t.source="foo.peggy",o.diagnostics.pop()}),it("without source",()=>{Xe(o.format([])).to.equal(`error: message
 at foo.peggy:1:1
 at foo.peggy:1:6: Subinfo

warning: Warning message
 at foo.peggy:1:6
 at foo.peggy:1:6: Warning Subinfo`)})}),describe("without main location",()=>{let o=new Ft("message",null,e);o.problems.push(["warning","Warning message",null,[{message:"Warning Subinfo",location:t}]]),o.problems.push(["info","Info message",null,[]]),it("with source",()=>{Xe(o.format([a])).to.equal(`error: message
note: Subinfo
 --> foo.peggy:1:6
  |
1 | some error
  |      ^^^^^

warning: Warning message
note: Warning Subinfo
 --> foo.peggy:1:6
  |
1 | some error
  |      ^^^^^`)}),it("without source",()=>{Xe(o.format([])).to.equal(`error: message
 at foo.peggy:1:6: Subinfo

warning: Warning message
 at foo.peggy:1:6: Warning Subinfo`)})})})})})});var Ou=F(()=>{"use strict";var $1=Ge(),ur=Lr(),De=ro(),rt=$1.expect;describe("Peggy compiler",()=>{it("checks start rules",()=>{let a=ur.parse("foo='1'");rt(De.compile(a,De.passes)).to.be.an("object"),rt(De.compile(a,De.passes,{allowedStartRules:null})).to.be.an("object"),rt(De.compile(a,De.passes,{allowedStartRules:void 0})).to.be.an("object"),rt(De.compile(a,De.passes,{allowedStartRules:[]})).to.be.an("object"),rt(()=>De.compile(a,De.passes,{allowedStartRules:{}})).to.throw("allowedStartRules must be an array"),rt(()=>De.compile(a,De.passes,{allowedStartRules:["bar"]})).to.throw('Unknown start rule "bar"')}),it("checks output type",()=>{let a=ur.parse("foo='1'");rt(De.compile(a,De.passes,{output:"source"})).to.be.a("string"),rt(()=>De.compile(a,De.passes,{output:"INVALID OUTPUT TYPE"})).to.throw("Invalid output format: INVALID OUTPUT TYPE.")}),it("generates inline sourceMappingURL",()=>{let a=ur.parse("foo='1'");if(rt(a).to.be.an("object"),typeof TextEncoder=="function"&&(rt(De.compile(a,De.passes,{output:"source-with-inline-map",grammarSource:"src.peggy"})).to.match(/^\/\/# sourceMappingURL=data:application\/json;charset=utf-8;base64,/m),typeof globalThis=="object")){let t=globalThis.TextEncoder;delete globalThis.TextEncoder,rt(()=>De.compile(a,De.passes,{output:"source-with-inline-map",grammarSource:"src.peggy"})).to.throw("TextEncoder is not supported by this platform"),globalThis.TextEncoder=t}}),it("requires grammarSource with source-map",()=>{let a=ur.parse("foo='1'");rt(a).to.be.an("object"),rt(()=>De.compile(a,De.passes,{output:"source-and-map"})).to.throw("Must provide grammarSource (as a string or GrammarLocation) in order to generate source maps"),rt(()=>De.compile(a,De.passes,{output:"source-and-map",grammarSource:""})).to.throw("Must provide grammarSource (as a string or GrammarLocation) in order to generate source maps"),typeof TextEncoder=="function"&&rt(()=>De.compile(a,De.passes,{output:"source-with-inline-map",grammarSource:{toString(){return""}}})).to.throw("Must provide grammarSource (as a string or GrammarLocation) in order to generate source maps")}),it("generates correct bytecode for always-match alternatives",()=>{let a=ur.parse("start = 'a'? / 'b'"),t=[];De.compile(a,De.passes,{output:"ast",warning(...e){t.push(e)}}),rt(a.rules[0].bytecode).to.eql([18,0,2,2,22,0,23,0,14,2,0,6,2]),rt(t).to.eql([["semantic","Always matches.  Following alternatives may not be reachable.",{start:{column:9,line:1,offset:8},end:{column:13,line:1,offset:12},source:void 0}]])}),it("detects unreachable code",()=>{let a=ur.parse("start = &('f'*) &[] !('f'*) ![] 'b'"),t=[];De.compile(a,De.passes,{output:"ast",warning(...e){t.push(e)}}),rt(t).to.eql([["semantic","Always matches, making the & predicate redundant.",{start:{column:11,line:1,offset:10},end:{column:15,line:1,offset:14},source:void 0}],["semantic","Never matches, making the & predicate always fail.",{start:{column:18,line:1,offset:17},end:{column:20,line:1,offset:19},source:void 0}],["semantic","Always matches, making the ! predicate always fail.",{start:{column:23,line:1,offset:22},end:{column:27,line:1,offset:26},source:void 0}],["semantic","Never matches, making the ! predicate redundant.",{start:{column:30,line:1,offset:29},end:{column:32,line:1,offset:31},source:void 0}]])}),it("detects deeper unreachable code",()=>{let a=ur.parse("start = &('a'? / 'b') !('a'? / 'b') &('a'? / 'b')"),t=[];De.compile(a,De.passes,{output:"ast",warning(...e){t.push(e)}}),rt(t).to.eql([["semantic","Always matches.  Following alternatives may not be reachable.",{start:{column:11,line:1,offset:10},end:{column:15,line:1,offset:14},source:void 0}],["semantic","Always matches.  Following alternatives may not be reachable.",{start:{column:25,line:1,offset:24},end:{column:29,line:1,offset:28},source:void 0}],["semantic","Always matches.  Following alternatives may not be reachable.",{start:{column:39,line:1,offset:38},end:{column:43,line:1,offset:42},source:void 0}]])})})});var qu=F(()=>{"use strict";var O1=Ge(),{hex:bn,stringEscape:fr,regexpClassEscape:pr,base64:dr}=Nr(),We=O1.expect;describe("utility functions",()=>{it("hex",()=>{We(bn("0")).to.equal("30"),We(bn("\0")).to.equal("0"),We(bn(`
`)).to.equal("A"),We(bn("\uFEFF")).to.equal("FEFF")}),it("stringEscape",()=>{We(fr("abc")).to.equal("abc"),We(fr(`\\"\0\b	
\v\f\r`)).to.equal('\\\\\\"\\0\\b\\t\\n\\v\\f\\r'),We(fr("")).to.equal("\\x01\\x0F"),We(fr("\x7F")).to.equal("\\x10\\x1F\\x7F"),We(fr("\u0100\u0FFF")).to.equal("\\u0100\\u0FFF"),We(fr("\u1000\uFFFF")).to.equal("\\u1000\\uFFFF"),We(fr("\u{10FFFF}")).to.equal("\\u{10FFFF}")}),it("regexpClassEscape",()=>{We(pr(`\\\0\b	
\v\f\r`)).to.equal("\\\\\\0\\b\\t\\n\\v\\f\\r"),We(pr("/]^-")).to.equal("\\/\\]\\^\\-"),We(pr("")).to.equal("\\x01\\x0F"),We(pr("\x7F")).to.equal("\\x10\\x1F\\x7F"),We(pr("\u0100\u0FFF")).to.equal("\\u0100\\u0FFF"),We(pr("\u1000\uFFFF")).to.equal("\\u1000\\uFFFF"),We(pr("\u{10FFFF}")).to.equal("\\u{10FFFF}")}),it("base64",()=>{We(dr(new Uint8Array([]))).to.equal(""),We(dr(new Uint8Array([97]))).to.equal("YQ=="),We(dr(new Uint8Array([97,98]))).to.equal("YWI="),We(dr(new Uint8Array([97,98,99]))).to.equal("YWJj"),We(dr(new Uint8Array([97,98,99,100]))).to.equal("YWJjZA=="),We(dr(new Uint8Array([97,98,99,100,101]))).to.equal("YWJjZGU="),We(dr(new Uint8Array([97,98,99,100,101,102]))).to.equal("YWJjZGVm")})})});var Ru=F(()=>{"use strict";var q1=Ge(),hr=Fs(),Ne=q1.expect;describe("utility class Stack",()=>{describe("for an empty stack",()=>{let a;beforeEach(()=>{a=new hr("rule","v","let",[42])}),describe("throws an error when attempting",()=>{it("`pop`",()=>{Ne(()=>a.pop()).to.throw(RangeError,`Rule 'rule': The variable stack underflow: attempt to use a variable 'v<x>' at an index -1.
Bytecode: 42`)}),it("`top`",()=>{Ne(()=>a.top()).to.throw(RangeError,`Rule 'rule': The variable stack underflow: attempt to use a variable 'v<x>' at an index -1.
Bytecode: 42`)}),it("`result`",()=>{Ne(()=>a.result()).to.throw(RangeError,"Rule 'rule': The variable stack is empty, can't get the result")}),it("`index`",()=>{Ne(()=>a.index(-2)).to.throw(RangeError,`Rule 'rule': The variable stack overflow: attempt to get a variable at a negative index -2.
Bytecode: 42`),Ne(()=>a.index(0)).to.throw(RangeError,`Rule 'rule': The variable stack underflow: attempt to use a variable 'v<x>' at an index -1.
Bytecode: 42`),Ne(()=>a.index(2)).to.throw(RangeError,`Rule 'rule': The variable stack underflow: attempt to use a variable 'v<x>' at an index -3.
Bytecode: 42`)}),it("`sourceMapPop`",()=>{Ne(()=>a.sourceMapPop()).to.throw(RangeError,`Rule 'rule': Attempting to pop an empty source map stack.
Bytecode: 42`)})}),it("`defines` returns an empty string",()=>{Ne(a.defines()).to.equal("")})}),it("throws an error when attempting `pop` more than `push`",()=>{let a=new hr("rule","v","let",[42]);a.push("1"),Ne(()=>a.pop(3)).to.throw(RangeError,`Rule 'rule': The variable stack underflow: attempt to use a variable 'v<x>' at an index -2.
Bytecode: 42`)}),it("returns a variable with an index 0 for `result`",()=>{let a=new hr("rule","v","let",[]);a.push("1"),Ne(a.result()).to.equal("v0")}),it("`defines` returns a define expression for all used variables",()=>{let a=new hr("rule","v","let",[]);a.push("1"),a.push("2"),a.pop(),a.push("3"),Ne(a.defines()).to.equal("let v0, v1;")}),describe("`checkedIf` method",()=>{let a;beforeEach(()=>{a=new hr("rule","v","let",[42]),a.push("1")}),describe("does not throws an error",()=>{it("without the else brach",()=>{Ne(()=>a.checkedIf(0,()=>{})).to.not.throw(),Ne(()=>a.checkedIf(0,()=>a.pop())).to.not.throw(),Ne(()=>a.checkedIf(0,()=>a.push("2"))).to.not.throw()}),describe("when the stack pointer",()=>{it("was not moving in both the arms",()=>{function t(){}function e(){a.push("1"),a.pop()}function o(){a.push("1"),a.push("2"),a.pop(2)}function r(){a.push("1"),a.pop(),a.push("2"),a.pop()}Ne(()=>a.checkedIf(0,t,t)).to.not.throw(),Ne(()=>a.checkedIf(0,e,e)).to.not.throw(),Ne(()=>a.checkedIf(0,o,o)).to.not.throw(),Ne(()=>a.checkedIf(0,r,r)).to.not.throw()}),it("increases on the same value in both the arms",()=>{Ne(()=>a.checkedIf(0,()=>a.push("1"),()=>a.push("2"))).to.not.throw()}),it("decreases on the same value in both the arms",()=>{a.push("2"),Ne(()=>a.checkedIf(0,()=>a.pop(2),()=>{a.pop(),a.pop()})).to.not.throw()})})}),describe("throws an error when the stack pointer",()=>{it("was not moving in `if` and decreases in `then`",()=>{Ne(()=>{a.checkedIf(0,()=>{},()=>a.pop())}).to.throw(Error,"Rule 'rule', position 0: Branches of a condition can't move the stack pointer differently (before: 0, after then: 0, after else: -1). Bytecode: 42")}),it("decreases in `if` and was not moving in `then`",()=>{Ne(()=>{a.checkedIf(0,()=>a.pop(),()=>{})}).to.throw(Error,"Rule 'rule', position 0: Branches of a condition can't move the stack pointer differently (before: 0, after then: -1, after else: 0). Bytecode: 42")}),it("was not moving in `if` and increases in `then`",()=>{Ne(()=>{a.checkedIf(0,()=>{},()=>a.push("2"))}).to.throw(Error,"Rule 'rule', position 0: Branches of a condition can't move the stack pointer differently (before: 0, after then: 0, after else: 1). Bytecode: 42")}),it("increases in `if` and was not moving in `then`",()=>{Ne(()=>{a.checkedIf(0,()=>a.push("2"),()=>{})}).to.throw(Error,"Rule 'rule', position 0: Branches of a condition can't move the stack pointer differently (before: 0, after then: 1, after else: 0). Bytecode: 42")}),it("decreases in `if` and increases in `then`",()=>{Ne(()=>{a.checkedIf(0,()=>a.pop(),()=>a.push("2"))}).to.throw(Error,"Rule 'rule', position 0: Branches of a condition can't move the stack pointer differently (before: 0, after then: -1, after else: 1). Bytecode: 42")}),it("increases in `if` and decreases in `then`",()=>{Ne(()=>{a.checkedIf(0,()=>a.push("2"),()=>a.pop())}).to.throw(Error,"Rule 'rule', position 0: Branches of a condition can't move the stack pointer differently (before: 0, after then: 1, after else: -1). Bytecode: 42")})})}),describe("`checkedLoop` method",()=>{let a;beforeEach(()=>{a=new hr("rule","v","let",[42]),a.push("1")}),it("does not throws an error when the stack pointer was not moving",()=>{function t(){}function e(){a.push("1"),a.pop()}function o(){a.push("1"),a.push("2"),a.pop(2)}function r(){a.push("1"),a.pop(),a.push("2"),a.pop()}Ne(()=>a.checkedLoop(0,t)).to.not.throw(),Ne(()=>a.checkedLoop(0,e)).to.not.throw(),Ne(()=>a.checkedLoop(0,o)).to.not.throw(),Ne(()=>a.checkedLoop(0,r)).to.not.throw()}),it("throws an error when the stack pointer increases",()=>{Ne(()=>a.checkedLoop(0,()=>a.push("1"))).to.throw(Error,"Rule 'rule', position 0: Body of a loop can't move the stack pointer (before: 0, after: 1). Bytecode: 42")}),it("throws an error when the stack pointer decreases",()=>{Ne(()=>a.checkedLoop(0,()=>a.pop())).to.throw(Error,"Rule 'rule', position 0: Body of a loop can't move the stack pointer (before: 0, after: -1). Bytecode: 42")})}),describe("SourceNode handling",()=>{it("sourceNode handles unknown column",()=>{Ne(hr.sourceNode({source:"",start:{line:1,column:0,offset:0},end:{line:1,column:0,offset:0}},["foo"],"test").column).to.equal(null)})})})});var Iu=F(()=>{"use strict";var R1=Ge(),ao=Ts(),Ye=R1.expect;describe("utility class Intern",()=>{it("handles strings",()=>{let a=new ao;Ye(a.add("one")).to.equal(0),Ye(a.add("one")).to.equal(0),Ye(a.add("two")).to.equal(1),Ye(a.add("one")).to.equal(0),Ye(a.add("two")).to.equal(1),Ye(a.add(void 0)).to.equal(-1),Ye(a.add(null)).to.equal(-1),Ye(a.items.length).to.equal(2),Ye(a.items).to.deep.equal(["one","two"]),Ye(a.get(0)).to.equal("one"),Ye(a.get(1)).to.equal("two"),Ye(a.get(-1)).to.equal(void 0),Ye(a.get(10)).to.equal(void 0);let t=a.map((e,o)=>[e,o]);Ye(t).to.deep.equal([["one",0],["two",1]])}),it("does conversions",()=>{let a=new ao({convert:t=>Array.from(t).map(e=>e.codePointAt(0))});Ye(a.add("abc")).to.equal(0),Ye(a.add("abc")).to.equal(0),Ye(a.add("abd")).to.equal(1),Ye(a.get(0)).to.deep.equal([97,98,99]),Ye(a.get(1)).to.deep.equal([97,98,100])}),it("stringifies",()=>{let a=new ao({stringify:()=>"same"});Ye(a.add("abc")).to.equal(0),Ye(a.add("def")).to.equal(0)})})});var Lu=F((sA,yn)=>{"use strict";var no=[];yn.exports=function(a,t){function e(r,s){return t.type(s).toUpperCase()===r.toUpperCase()}function o(r,s){for(let n of no)if(n.match(r,s))return n.assert(r,s);if(r===s)return!0;if(e("object",s)&&e("object",r)){for(let n of Object.keys(s))if(!(n in r)||!o(r[n],s[n]))return!1;return!0}if(e("array",s)&&e("array",r)){if(r.length!==s.length)return!1;for(let n=0;n<s.length;n++)if(!o(r[n],s[n]))return!1;return!0}return e("RegExp",r)&&e("RegExp",s)?r.toString()===s.toString():e("Date",r)&&e("Date",s)?r.getTime()===s.getTime():e("string",r)&&e("string",s)||e("number",r)&&e("number",s)||e("boolean",r)&&e("boolean",s)?r==s:!1}a.Assertion.addMethod("like",function(r){let s=t.flag(this,"object");this.assert(o(s,r),"expected #{this} to be like #{exp}","expected #{this} to not like #{exp}",r,s,a.config.showDiff)})};yn.exports.extend=function(a){no.push(a)};yn.exports.clearPlugins=function(){no=[]}});var so=F((oA,Mu)=>{Mu.exports=Lu()});var ht=F((iA,Nu)=>{"use strict";var{GrammarError:Fu}=Jt(),oo=Lr(),io=to();Nu.exports=function(a,t){let e=a.Assertion;a.use(so()),e.addMethod("changeAST",function(o,r,s){s=s!==void 0?s:{};let n=oo.parse(o,s);t.flag(this,"object")(n,s,new io({error(c,...l){throw new Fu(...l)}})),new e(n).like(r)}),e.addMethod("haveErrors",function(o,r){let s=oo.parse(o),n=new io;switch(t.flag(this,"object")(s,{},n),typeof r){case"number":new e(n.errors).equal(r);break;case"object":new e(n.problems).like(r);break;default:break}}),e.addMethod("reportError",function(o,r){let s=oo.parse(o),n=!1,c;try{t.flag(this,"object")(s,{},new io({error(l,...h){throw new Fu(...h)}})),n=!0}catch(l){c=l}this.assert(!n,"expected #{this} to report an error but it didn't","expected #{this} to not report an error but #{act} was reported",null,c),!n&&r!==void 0&&Object.keys(r).forEach(l=>{new e(c).to.have.property(l).that.is.deep.equal(r[l])})})}});var ku=F(()=>{"use strict";var ju=Ge(),I1=ht(),L1=Ys();ju.use(I1);var M1=ju.expect;describe("compiler pass |reportUndefinedRules|",()=>{it("reports undefined rules",()=>{M1(L1).to.reportError("start = undefined",{message:'Rule "undefined" is not defined',location:{source:void 0,start:{offset:8,line:1,column:9},end:{offset:17,line:1,column:18}}})})})});var Uu=F(()=>{"use strict";var Du=Ge(),F1=ht(),re=Js();Du.use(F1);var ae=Du.expect;describe("compiler pass |reportInfiniteRepetition|",()=>{it("reports infinite loops for zero_or_more",()=>{ae(re).to.reportError("start = ('')*",{message:"Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",location:{source:void 0,start:{offset:8,line:1,column:9},end:{offset:13,line:1,column:14}}})}),it("reports infinite loops for one_or_more",()=>{ae(re).to.reportError("start = ('')+",{message:"Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",location:{source:void 0,start:{offset:8,line:1,column:9},end:{offset:13,line:1,column:14}}})}),describe("reports infinite loops for repeated",()=>{describe("without delimiter",()=>{it("with constant boundaries",()=>{ae(re).to.reportError("start = ('')|..|",{message:"Possible infinite loop when parsing (unbounded range repetition used with an expression that may not consume any input)",location:{source:void 0,start:{offset:8,line:1,column:9},end:{offset:16,line:1,column:17}}}),ae(re).to.reportError("start = ('')|0..|",{message:"Possible infinite loop when parsing (unbounded range repetition used with an expression that may not consume any input)",location:{source:void 0,start:{offset:8,line:1,column:9},end:{offset:17,line:1,column:18}}}),ae(re).to.reportError("start = ('')|1..|",{message:"Possible infinite loop when parsing (unbounded range repetition used with an expression that may not consume any input)",location:{source:void 0,start:{offset:8,line:1,column:9},end:{offset:17,line:1,column:18}}}),ae(re).to.reportError("start = ('')|2..|",{message:"Possible infinite loop when parsing (unbounded range repetition used with an expression that may not consume any input)",location:{source:void 0,start:{offset:8,line:1,column:9},end:{offset:17,line:1,column:18}}}),ae(re).to.not.reportError("start = ('')| ..1|"),ae(re).to.not.reportError("start = ('')| ..3|"),ae(re).to.not.reportError("start = ('')|2..3|"),ae(re).to.not.reportError("start = ('')| 42 |")}),it("with variable boundaries",()=>{ae(re).to.reportError("start = ('')|len..|",{message:"Possible infinite loop when parsing (unbounded range repetition used with an expression that may not consume any input)",location:{source:void 0,start:{offset:8,line:1,column:9},end:{offset:19,line:1,column:20}}}),ae(re).to.not.reportError("start = ('')|..len|"),ae(re).to.not.reportError("start = ('')|len1..len2|"),ae(re).to.not.reportError("start = ('')|len|")}),it("with function boundaries",()=>{ae(re).to.reportError("start = ('')|{}..|",{message:"Possible infinite loop when parsing (unbounded range repetition used with an expression that may not consume any input)",location:{source:void 0,start:{offset:8,line:1,column:9},end:{offset:18,line:1,column:19}}}),ae(re).to.not.reportError("start = ('')|..{}|"),ae(re).to.not.reportError("start = ('')|{}..{}|"),ae(re).to.not.reportError("start = ('')|{}|")})}),describe("with empty delimiter",()=>{it("with constant boundaries",()=>{ae(re).to.reportError("start = ('')| .., ''|",{message:"Possible infinite loop when parsing (unbounded range repetition used with an expression that may not consume any input)",location:{source:void 0,start:{offset:8,line:1,column:9},end:{offset:21,line:1,column:22}}}),ae(re).to.reportError("start = ('')|0.., ''|",{message:"Possible infinite loop when parsing (unbounded range repetition used with an expression that may not consume any input)",location:{source:void 0,start:{offset:8,line:1,column:9},end:{offset:21,line:1,column:22}}}),ae(re).to.reportError("start = ('')|1.., ''|",{message:"Possible infinite loop when parsing (unbounded range repetition used with an expression that may not consume any input)",location:{source:void 0,start:{offset:8,line:1,column:9},end:{offset:21,line:1,column:22}}}),ae(re).to.reportError("start = ('')|2.., ''|",{message:"Possible infinite loop when parsing (unbounded range repetition used with an expression that may not consume any input)",location:{source:void 0,start:{offset:8,line:1,column:9},end:{offset:21,line:1,column:22}}}),ae(re).to.not.reportError("start = ('')| ..1, ''|"),ae(re).to.not.reportError("start = ('')| ..3, ''|"),ae(re).to.not.reportError("start = ('')|2..3, ''|"),ae(re).to.not.reportError("start = ('')| 42 , ''|")}),it("with variable boundaries",()=>{ae(re).to.reportError("start = ('')|len.., ''|",{message:"Possible infinite loop when parsing (unbounded range repetition used with an expression that may not consume any input)",location:{source:void 0,start:{offset:8,line:1,column:9},end:{offset:23,line:1,column:24}}}),ae(re).to.not.reportError("start = ('')|..len, ''|"),ae(re).to.not.reportError("start = ('')|len1..len2, ''|"),ae(re).to.not.reportError("start = ('')|len, ''|")}),it("with function boundaries",()=>{ae(re).to.reportError("start = ('')|{}.., ''|",{message:"Possible infinite loop when parsing (unbounded range repetition used with an expression that may not consume any input)",location:{source:void 0,start:{offset:8,line:1,column:9},end:{offset:22,line:1,column:23}}}),ae(re).to.not.reportError("start = ('')|..{}, ''|"),ae(re).to.not.reportError("start = ('')|{}..{}, ''|"),ae(re).to.not.reportError("start = ('')|{}, ''|")})}),describe("with non-empty delimiter",()=>{it("with constant boundaries",()=>{ae(re).to.not.reportError("start = ('')| .., 'a'|"),ae(re).to.not.reportError("start = ('')|0.., 'a'|"),ae(re).to.not.reportError("start = ('')|1.., 'a'|"),ae(re).to.not.reportError("start = ('')|2.., 'a'|"),ae(re).to.not.reportError("start = ('')| ..1, 'a'|"),ae(re).to.not.reportError("start = ('')| ..3, 'a'|"),ae(re).to.not.reportError("start = ('')|2..3, 'a'|"),ae(re).to.not.reportError("start = ('')| 42 , 'a'|")}),it("with variable boundaries",()=>{ae(re).to.not.reportError("start = ('')|len.., 'a'|"),ae(re).to.not.reportError("start = ('')|..len, 'a'|"),ae(re).to.not.reportError("start = ('')|len1..len2, 'a'|"),ae(re).to.not.reportError("start = ('')|len, 'a'|")}),it("with function boundaries",()=>{ae(re).to.not.reportError("start = ('')|{}.., 'a'|"),ae(re).to.not.reportError("start = ('')|..{}, 'a'|"),ae(re).to.not.reportError("start = ('')|{}..{}, 'a'|"),ae(re).to.not.reportError("start = ('')|{}, 'a'|")})})}),it("computes expressions that always consume input on success correctly",()=>{ae(re).to.reportError(["start = a*","a 'a' = ''"].join(`
`)),ae(re).to.not.reportError(["start = a*","a 'a' = 'a'"].join(`
`)),ae(re).to.reportError("start = ('' / 'a' / 'b')*"),ae(re).to.reportError("start = ('a' / '' / 'b')*"),ae(re).to.reportError("start = ('a' / 'b' / '')*"),ae(re).to.not.reportError("start = ('a' / 'b' / 'c')*"),ae(re).to.reportError("start = ('' { })*"),ae(re).to.not.reportError("start = ('a' { })*"),ae(re).to.reportError("start = ('' '' '')*"),ae(re).to.not.reportError("start = ('a' '' '')*"),ae(re).to.not.reportError("start = ('' 'a' '')*"),ae(re).to.not.reportError("start = ('' '' 'a')*"),ae(re).to.reportError("start = (a:'')*"),ae(re).to.not.reportError("start = (a:'a')*"),ae(re).to.reportError("start = ($'')*"),ae(re).to.not.reportError("start = ($'a')*"),ae(re).to.reportError("start = (&'')*"),ae(re).to.reportError("start = (&'a')*"),ae(re).to.reportError("start = (!'')*"),ae(re).to.reportError("start = (!'a')*"),ae(re).to.reportError("start = (''?)*"),ae(re).to.reportError("start = ('a'?)*"),ae(re).to.reportError("start = (''*)*"),ae(re).to.reportError("start = ('a'*)*"),ae(re).to.reportError("start = (''+)*"),ae(re).to.not.reportError("start = ('a'+)*"),ae(re).to.reportError("start = ('')*"),ae(re).to.not.reportError("start = ('a')*"),ae(re).to.reportError("start = (&{ })*"),ae(re).to.reportError("start = (!{ })*"),ae(re).to.reportError("start = 'a'|.., ('')*|"),ae(re).to.not.reportError("start = 'a'|.., ('b')*|"),ae(re).to.reportError(["start = a*","a = ''"].join(`
`)),ae(re).to.not.reportError(["start = a*","a = 'a'"].join(`
`)),ae(re).to.reportError("start = ''*"),ae(re).to.not.reportError("start = 'a'*"),ae(re).to.not.reportError("start = [a-d]*"),ae(re).to.not.reportError("start = .*")})})});var zu=F(()=>{"use strict";var Bu=Ge(),N1=ht(),ce=Hs();Bu.use(N1);var le=Bu.expect;describe("compiler pass |reportInfiniteRecursion|",()=>{it("reports direct left recursion",()=>{le(ce).to.reportError("start = start",{message:"Possible infinite loop when parsing (left recursion: start -> start)",location:{source:void 0,start:{offset:0,line:1,column:1},end:{offset:5,line:1,column:6}}})}),it("reports indirect left recursion",()=>{le(ce).to.reportError(["start = stop","stop = start"].join(`
`),{message:"Possible infinite loop when parsing (left recursion: start -> stop -> start)",location:{source:void 0,start:{offset:0,line:1,column:1},end:{offset:5,line:1,column:6}}})}),describe("in sequences",()=>{it("reports left recursion if all preceding elements match empty string",()=>{le(ce).to.reportError("start = '' '' '' start")}),it("doesn't report left recursion if some preceding element doesn't match empty string",()=>{le(ce).to.not.reportError("start = 'a' '' '' start"),le(ce).to.not.reportError("start = '' 'a' '' start"),le(ce).to.not.reportError("start = '' '' 'a' start")}),it("reports left recursion when rule reference is wrapped in an expression",()=>{le(ce).to.reportError("start = '' start?")}),it("computes expressions that always consume input on success correctly",()=>{le(ce).to.reportError(["start = a start","a 'a' = ''"].join(`
`)),le(ce).to.not.reportError(["start = a start","a 'a' = 'a'"].join(`
`)),le(ce).to.reportError("start = ('' / 'a' / 'b') start"),le(ce).to.reportError("start = ('a' / '' / 'b') start"),le(ce).to.reportError("start = ('a' / 'b' / '') start"),le(ce).to.not.reportError("start = ('a' / 'b' / 'c') start"),le(ce).to.reportError("start = ('' { }) start"),le(ce).to.not.reportError("start = ('a' { }) start"),le(ce).to.reportError("start = ('' '' '') start"),le(ce).to.not.reportError("start = ('a' '' '') start"),le(ce).to.not.reportError("start = ('' 'a' '') start"),le(ce).to.not.reportError("start = ('' '' 'a') start"),le(ce).to.reportError("start = a:'' start"),le(ce).to.not.reportError("start = a:'a' start"),le(ce).to.reportError("start = $'' start"),le(ce).to.not.reportError("start = $'a' start"),le(ce).to.reportError("start = &'' start"),le(ce).to.reportError("start = &'a' start"),le(ce).to.reportError("start = !'' start"),le(ce).to.reportError("start = !'a' start"),le(ce).to.reportError("start = ''? start"),le(ce).to.reportError("start = 'a'? start"),le(ce).to.reportError("start = ''* start"),le(ce).to.reportError("start = 'a'* start"),le(ce).to.reportError("start = ''+ start"),le(ce).to.not.reportError("start = 'a'+ start"),le(ce).to.reportError("start = ''| .. | start"),le(ce).to.reportError("start = ''|0.. | start"),le(ce).to.reportError("start = ''|1.. | start"),le(ce).to.reportError("start = ''|2.. | start"),le(ce).to.reportError("start = ''| ..1| start"),le(ce).to.reportError("start = ''| ..3| start"),le(ce).to.reportError("start = ''|2..3| start"),le(ce).to.reportError("start = ''| 42 | start"),le(ce).to.reportError("start = 'a'| .. | start"),le(ce).to.reportError("start = 'a'|0.. | start"),le(ce).to.not.reportError("start = 'a'|1.. | start"),le(ce).to.not.reportError("start = 'a'|2.. | start"),le(ce).to.reportError("start = 'a'| ..1| start"),le(ce).to.reportError("start = 'a'| ..3| start"),le(ce).to.not.reportError("start = 'a'|2..3| start"),le(ce).to.not.reportError("start = 'a'| 42 | start"),le(ce).to.reportError("start = ('') start"),le(ce).to.not.reportError("start = ('a') start"),le(ce).to.reportError("start = &{ } start"),le(ce).to.reportError("start = !{ } start"),le(ce).to.reportError(["start = a start","a = ''"].join(`
`)),le(ce).to.not.reportError(["start = a start","a = 'a'"].join(`
`)),le(ce).to.reportError("start = '' start"),le(ce).to.not.reportError("start = 'a' start"),le(ce).to.not.reportError("start = [a-d] start"),le(ce).to.not.reportError("start = . start")})}),describe("in repeated with delimiter",()=>{it("doesn't report left recursion for delimiter if expression not match empty string",()=>{le(ce).to.not.reportError("start = 'a'| .. , start|"),le(ce).to.not.reportError("start = 'a'|0.. , start|"),le(ce).to.not.reportError("start = 'a'|1.. , start|"),le(ce).to.not.reportError("start = 'a'|2.. , start|"),le(ce).to.not.reportError("start = 'a'| ..3, start|"),le(ce).to.not.reportError("start = 'a'|2..3, start|"),le(ce).to.not.reportError("start = 'a'| 42 , start|")}),it("reports left recursion for delimiter if expression match empty string",()=>{le(ce).to.reportError("start = ''| .. , start|"),le(ce).to.reportError("start = ''|0.. , start|"),le(ce).to.reportError("start = ''|1.. , start|"),le(ce).to.reportError("start = ''|2.. , start|"),le(ce).to.reportError("start = ''| ..3, start|"),le(ce).to.reportError("start = ''|2..3, start|"),le(ce).to.reportError("start = ''| 42 , start|")}),it("does not inifinite loop",()=>{le(ce).to.reportError(`
        start = expr*

        expr
          = expr "++"
      `,{message:"Possible infinite loop when parsing (left recursion: start -> expr -> expr)"})})}),it("does not fail on deeply-nested grammars",()=>{let a="";for(let e=0;e<500;e++)a+=`foo${e} = foo${e+1} / foo${e+2}
`;a+=`foo500 = "a"
`,a+=`foo501 = "a"
`,a+=`bar = 'c'
`,le(ce).to.not.reportError(a)}),it("does not continue after finding an error",()=>{le(ce).to.haveErrors("foo = foo 'b'",1),le(ce).to.haveErrors("foo = foo / ([a] 'b')",1),le(ce).to.haveErrors("foo = foo / ('b'|..|)",1),le(ce).to.haveErrors("foo = foo / (bar)",1)})})});var Wu=F(()=>{"use strict";var Gu=Ge(),j1=ht(),co=Qs();Gu.use(j1);var lo=Gu.expect;describe("compiler pass |reportIncorrectPlucking|",()=>{it('prevents "@" from being used with an action block',()=>{lo(co).to.reportError("start1 = 'a' @'b' 'c' { /* empty action block */ }",{message:'"@" cannot be used with an action block',location:{source:void 0,start:{offset:13,line:1,column:14},end:{offset:14,line:1,column:15}},diagnostics:[{message:"Action block location",location:{source:void 0,start:{offset:23,line:1,column:24},end:{offset:49,line:1,column:50}}}]}),lo(co).to.reportError("start2 = 'a' @('b' @'c' { /* empty action block */ })",{message:'"@" cannot be used with an action block',location:{source:void 0,start:{offset:19,line:1,column:20},end:{offset:20,line:1,column:21}},diagnostics:[{message:"Action block location",location:{source:void 0,start:{offset:25,line:1,column:26},end:{offset:51,line:1,column:52}}}]})}),it("allows valid plucking",()=>{lo(co).not.to.reportError(`

      start1 =  @'1'               // return '1'
      start2 =  @'1' / @'2'        // return '1' or '2'
      start2 =   '1'   @'2' '3'    // return '2'
      start3 =   '1' @b:'2' '3'    // return '2', label "b" can be used in semantic predicates
      start4 = a:'1' @b:'2' '3'    // return '2', labels "a" and "b" can be used in semantic predicates
      start5 =  @'1'   @'2' '3'    // return ['1', '2']
      start6 =  @'1' @b:'2' '3'    // return ['1', '2'], label "b" can be used in semantic predicates
      start7 = a:'1'   @'2' &{}    // return '2' if the semantic predicate doesnt fail
      start8 = @a:$[a-z]i+ &{ return a === 'foo' } // return "foo"

    `)})})});var Ku=F(()=>{"use strict";var Vu=Ge(),k1=ht(),D1=Vs();Vu.use(k1);var U1=Vu.expect;describe("compiler pass |reportDuplicateRules|",()=>{it("reports duplicate rules",()=>{U1(D1).to.reportError(["start = 'a'","start = 'b'"].join(`
`),{message:'Rule "start" is already defined',location:{source:void 0,start:{offset:12,line:2,column:1},end:{offset:17,line:2,column:6}},diagnostics:[{message:"Original rule location",location:{source:void 0,start:{offset:0,line:1,column:1},end:{offset:5,line:1,column:6}}}]})})})});var Ju=F(()=>{"use strict";var Hu=Ge(),B1=ht(),ot=Ws();Hu.use(B1);var ct=Hu.expect;describe("compiler pass |reportDuplicateLabels|",()=>{describe("in a sequence",()=>{it("reports labels duplicate with labels of preceding elements",()=>{ct(ot).to.reportError("start = a:'a' a:'a'",{message:'Label "a" is already defined',location:{source:void 0,start:{offset:14,line:1,column:15},end:{offset:15,line:1,column:16}},diagnostics:[{message:"Original label location",location:{source:void 0,start:{offset:8,line:1,column:9},end:{offset:9,line:1,column:10}}}]})}),it("doesn't report labels duplicate with labels in subexpressions",()=>{ct(ot).to.not.reportError("start = ('a' / a:'a' / 'a') a:'a'"),ct(ot).to.not.reportError("start = (a:'a' { }) a:'a'"),ct(ot).to.not.reportError("start = ('a' a:'a' 'a') a:'a'"),ct(ot).to.not.reportError("start = b:(a:'a') a:'a'"),ct(ot).to.not.reportError("start = $(a:'a') a:'a'"),ct(ot).to.not.reportError("start = &(a:'a') a:'a'"),ct(ot).to.not.reportError("start = !(a:'a') a:'a'"),ct(ot).to.not.reportError("start = (a:'a')? a:'a'"),ct(ot).to.not.reportError("start = (a:'a')* a:'a'"),ct(ot).to.not.reportError("start = (a:'a')+ a:'a'"),ct(ot).to.not.reportError("start = (a:'a')|2..3| a:'a'"),ct(ot).to.not.reportError("start = 'a'|2..3, a:'a'| a:'a'"),ct(ot).to.not.reportError("start = (a:'a') a:'a'")})}),describe("in a choice",()=>{it("doesn't report labels duplicate with labels of preceding alternatives",()=>{ct(ot).to.not.reportError("start = a:'a' / a:'a'")})}),describe("in outer sequence",()=>{it("reports labels duplicate with labels of preceding elements",()=>{ct(ot).to.reportError("start = a:'a' (a:'a')",{message:'Label "a" is already defined',location:{source:void 0,start:{offset:15,line:1,column:16},end:{offset:16,line:1,column:17}},diagnostics:[{message:"Original label location",location:{source:void 0,start:{offset:8,line:1,column:9},end:{offset:9,line:1,column:10}}}]})}),it("doesn't report labels duplicate with the label of the current element",()=>{ct(ot).to.not.reportError("start = a:(a:'a')")}),it("doesn't report labels duplicate with labels of following elements",()=>{ct(ot).to.not.reportError("start = (a:'a') a:'a'")})})})});var Qu=F(()=>{"use strict";var Yu=Ge(),z1=ht(),G1=Gs();Yu.use(z1);var W1=Yu.expect;describe("compiler pass |reportDuplicateImports|",()=>{it("Errors when the same import all name is used twice",()=>{W1(G1).to.reportError(`
import {unrelated} from "./foo.js"
import * as foo from "./foo.js"
import * as foo from "./bar.js"

a = foo.one
`,{message:'Module "foo" is already imported'})})})});var Xu=F(()=>{"use strict";var Zu=Ge(),V1=ht(),xn=zs();Zu.use(V1);var vn=Zu.expect;describe("compiler pass |removeUnusedRules|",()=>{it("removes superfluous input rules",()=>{vn(xn).to.changeAST(`
one = "a"
two = "b"`,{rules:[{name:"one"}]},{allowedStartRules:["one"]})}),it("does not remove allowedStartRules",()=>{vn(xn).to.changeAST(`
one = "a"
two = "b"`,{rules:[{name:"one"},{name:"two"}]},{allowedStartRules:["one","two"]})}),it("removes entire trees of unused rules",()=>{vn(xn).to.changeAST(`
one = "a" four
two = three three four
three = "b" four
four = "c"`,{rules:[{name:"one"},{name:"four"}]},{allowedStartRules:["one"]})}),it("does not visit subtrees twice",()=>{vn(xn).to.changeAST(`
one = "a" four two three
two = four "b"
three = four "c"
four = "4" five
five = "5"
`,{rules:[{name:"one"},{name:"two"},{name:"three"},{name:"four"},{name:"five"}]},{allowedStartRules:["one"]})})})});var tf=F(()=>{"use strict";var ef=Ge(),K1=ht(),H1=Us();ef.use(K1);var J1=ef.expect;describe("compiler pass |removeProxyRules|",()=>{it("updates references",()=>{J1(H1).to.changeAST(["start = proxy","proxy = proxied","proxied = 'a'"].join(`
`),{rules:[{name:"start",expression:{type:"rule_ref",name:"proxied"}},{name:"proxy"},{name:"proxied"}]},{allowedStartRules:["start"]})})})});var af=F(()=>{"use strict";var rf=Ge(),Y1=ht(),mr=Bs();rf.use(Y1);var gr=rf.expect;describe("compiler pass |mergeCharacterClasses|",()=>{it("Merges single character literals, class, and ref_rules",()=>{gr(mr).to.changeAST(["one = three / $('a' / 'd') / [c-f] / [efh] / [c-h] / [c-g]","two = 'P' / 'P' / three / 'P' / [Q-T]","three = $('x' / [u-w])","four = 'a' / [aaa] / 'a'"].join(`
`),{rules:[{name:"one",expression:{type:"class",parts:["a",["c","h"],["u","x"]],ignoreCase:!1,inverted:!1,location:{start:{line:1,column:7},end:{line:1,column:59}}}},{name:"two",expression:{type:"class",parts:[["P","T"],["u","x"]],ignoreCase:!1,inverted:!1,location:{start:{line:2,column:7},end:{line:2,column:38}}}},{name:"three",expression:{type:"class",parts:[["u","x"]],ignoreCase:!1,inverted:!1,location:{start:{line:3,column:9},end:{line:3,column:23}}}},{name:"four",expression:{type:"literal",value:"a",ignoreCase:!1,location:{start:{line:4,column:8},end:{line:4,column:25}}}}]},{allowedStartRules:["one"]})}),it("Merges case-independent single character literals, class, and ref_rules",()=>{gr(mr).to.changeAST(["one = three / $('a'i / 'd'i) / [c-f]i / [efh]i / [c-h]i / [c-g]i","two = 'P'i / 'P'i / three / 'P'i / [Q-T]i","three = $('x'i / [u-w]i)","four = 'a'i / [aaa]i / 'a'i"].join(`
`),{rules:[{name:"one",expression:{type:"class",parts:["a",["c","h"],["u","x"]],ignoreCase:!0,inverted:!1,location:{start:{line:1,column:7},end:{line:1,column:65}}}},{name:"two",expression:{type:"class",parts:[["P","T"],["u","x"]],ignoreCase:!0,inverted:!1,location:{start:{line:2,column:7},end:{line:2,column:42}}}},{name:"three",expression:{type:"class",parts:[["u","x"]],ignoreCase:!0,inverted:!1,location:{start:{line:3,column:9},end:{line:3,column:25}}}},{name:"four",expression:{type:"literal",value:"a",ignoreCase:!0,location:{start:{line:4,column:8},end:{line:4,column:28}}}}]},{allowedStartRules:["one"]})}),it("Doesn't merge inappropriately",()=>{gr(mr).to.changeAST(["case = action / 'a'i / [c-g]","invert = action / 'P' / [^Q-T]","action = 'x' { return 42; } / [u-w]"].join(`
`),{rules:[{name:"case",expression:{type:"choice",alternatives:[{type:"rule_ref",name:"action"},{type:"literal",value:"a",ignoreCase:!0},{type:"class",parts:[["c","g"]],ignoreCase:!1,inverted:!1}]}},{name:"invert",expression:{type:"choice",alternatives:[{type:"rule_ref",name:"action"},{type:"literal",value:"P",ignoreCase:!1},{type:"class",parts:[["Q","T"]],ignoreCase:!1,inverted:!0}]}},{name:"action",expression:{type:"choice",alternatives:[{type:"action"},{type:"class",parts:[["u","w"]],ignoreCase:!1,inverted:!1}]}}]},{allowedStartRules:["case"]})}),it("Handles undefined rule_refs",()=>{gr(mr).to.changeAST(["start = unknown / 'a' / [c-g]"].join(`
`),{rules:[{name:"start",expression:{type:"choice",alternatives:[{type:"rule_ref",name:"unknown"},{type:"class",parts:["a",["c","g"]],ignoreCase:!1,inverted:!1}]}}]},{allowedStartRules:["start"]})}),it("handles empty literals",()=>{gr(mr).to.changeAST(["start = [a] / ''"].join(`
`),{rules:[{name:"start",expression:{type:"choice",alternatives:[{type:"class",parts:["a"],ignoreCase:!1,inverted:!1,unicode:!1},{type:"literal",value:""}]}}]},{allowedStartRules:["start"]})}),it("elides surrogates from unicode ranges",()=>{gr(mr).to.changeAST(["start = [\0-\u{10FFFF}]"].join(`
`),{rules:[{name:"start",expression:{type:"class",parts:[["\0","\uD7FF"],["\uE000","\u{10FFFF}"]],inverted:!1,unicode:!0}}]},{allowedStartRules:["start"]}),gr(mr).to.haveErrors("start = [\0-\u{10FFFF}]",[["info","Removing surrogate range from [\\0-\\u{10FFFF}]",{start:{column:9,line:1,offset:8},end:{column:15,line:1,offset:14},source:void 0}]])})})});var sf=F(()=>{"use strict";var nf=Ge(),Q1=ht(),v=da();nf.use(Q1);var w=nf.expect;describe("compiler pass |inferenceMatchResult|",()=>{it("calculate |match| property for |any| correctly",()=>{w(v).to.changeAST("start = .",{rules:[{match:0}]})}),it("calculate |match| property for |literal| correctly",()=>{w(v).to.changeAST("start = ''",{rules:[{match:1}]}),w(v).to.changeAST("start = ''i",{rules:[{match:1}]}),w(v).to.changeAST("start = 'a'",{rules:[{match:0}]}),w(v).to.changeAST("start = 'a'i",{rules:[{match:0}]})}),it("calculate |match| property for |class| correctly",()=>{w(v).to.changeAST("start = []",{rules:[{match:-1}]}),w(v).to.changeAST("start = []i",{rules:[{match:-1}]}),w(v).to.changeAST("start = [a]",{rules:[{match:0}]}),w(v).to.changeAST("start = [a]i",{rules:[{match:0}]}),w(v).to.changeAST("start = [a-b]",{rules:[{match:0}]}),w(v).to.changeAST("start = [a-b]i",{rules:[{match:0}]})}),it("calculate |match| property for |sequence| correctly",()=>{w(v).to.changeAST("start = 'a' 'b'",{rules:[{match:0}]}),w(v).to.changeAST("start = 'a' ''",{rules:[{match:0}]}),w(v).to.changeAST("start = '' 'b'",{rules:[{match:0}]}),w(v).to.changeAST("start = '' ''",{rules:[{match:1}]}),w(v).to.changeAST("start = 'a' []",{rules:[{match:-1}]}),w(v).to.changeAST("start = [] 'b'",{rules:[{match:-1}]}),w(v).to.changeAST("start = [] []",{rules:[{match:-1}]})}),it("calculate |match| property for |choice| correctly",()=>{w(v).to.changeAST("start = 'a' / 'b'",{rules:[{match:0}]}),w(v).to.changeAST("start = 'a' / ''",{rules:[{match:0}]}),w(v).to.changeAST("start = ''  / 'b'",{rules:[{match:0}]}),w(v).to.changeAST("start = ''  / ''",{rules:[{match:1}]}),w(v).to.changeAST("start = 'a' / []",{rules:[{match:0}]}),w(v).to.changeAST("start = []  / 'b'",{rules:[{match:0}]}),w(v).to.changeAST("start = []  / []",{rules:[{match:-1}]}),w(v).to.changeAST("start = 'a'? / 'b'",{rules:[{match:0}]})}),it("calculate |match| property for predicates correctly",()=>{w(v).to.changeAST("start = &.",{rules:[{match:0}]}),w(v).to.changeAST("start = &''",{rules:[{match:1}]}),w(v).to.changeAST("start = &[]",{rules:[{match:-1}]}),w(v).to.changeAST("start = !.",{rules:[{match:0}]}),w(v).to.changeAST("start = !''",{rules:[{match:-1}]}),w(v).to.changeAST("start = ![]",{rules:[{match:1}]}),w(v).to.changeAST("start = &{ code }",{rules:[{match:0}]}),w(v).to.changeAST("start = !{ code }",{rules:[{match:0}]})}),it("calculate |match| property for |text| correctly",()=>{w(v).to.changeAST("start = $.",{rules:[{match:0}]}),w(v).to.changeAST("start = $''",{rules:[{match:1}]}),w(v).to.changeAST("start = $[]",{rules:[{match:-1}]})}),it("calculate |match| property for |action| correctly",()=>{w(v).to.changeAST("start = .  { code }",{rules:[{match:0}]}),w(v).to.changeAST("start = '' { code }",{rules:[{match:1}]}),w(v).to.changeAST("start = [] { code }",{rules:[{match:-1}]})}),it("calculate |match| property for |labeled| correctly",()=>{w(v).to.changeAST("start = a:.",{rules:[{match:0}]}),w(v).to.changeAST("start = a:''",{rules:[{match:1}]}),w(v).to.changeAST("start = a:[]",{rules:[{match:-1}]})}),it("calculate |match| property for |named| correctly",()=>{w(v).to.changeAST("start 'start' = .",{rules:[{match:0}]}),w(v).to.changeAST("start 'start' = ''",{rules:[{match:1}]}),w(v).to.changeAST("start 'start' = []",{rules:[{match:-1}]})}),it("calculate |match| property for |optional| correctly",()=>{w(v).to.changeAST("start = .?",{rules:[{match:1}]}),w(v).to.changeAST("start = ''?",{rules:[{match:1}]}),w(v).to.changeAST("start = []?",{rules:[{match:1}]})}),it("calculate |match| property for |zero_or_more| correctly",()=>{w(v).to.changeAST("start = .*",{rules:[{match:1}]}),w(v).to.changeAST("start = ''*",{rules:[{match:1}]}),w(v).to.changeAST("start = []*",{rules:[{match:1}]})}),it("calculate |match| property for |one_or_more| correctly",()=>{w(v).to.changeAST("start = .+",{rules:[{match:0}]}),w(v).to.changeAST("start = ''+",{rules:[{match:1}]}),w(v).to.changeAST("start = []+",{rules:[{match:-1}]})}),describe("calculate |match| property for |repeated|",()=>{describe("without delimiter",()=>{describe("with constant boundaries",()=>{it("for | .. | correctly",()=>{w(v).to.changeAST("start =  .| .. |",{rules:[{match:1}]}),w(v).to.changeAST("start = ''| .. |",{rules:[{match:1}]}),w(v).to.changeAST("start = []| .. |",{rules:[{match:1}]})}),it("for | ..1| correctly",()=>{w(v).to.changeAST("start =  .| ..1|",{rules:[{match:1}]}),w(v).to.changeAST("start = ''| ..1|",{rules:[{match:1}]}),w(v).to.changeAST("start = []| ..1|",{rules:[{match:1}]})}),it("for | ..3| correctly",()=>{w(v).to.changeAST("start =  .| ..3|",{rules:[{match:1}]}),w(v).to.changeAST("start = ''| ..3|",{rules:[{match:1}]}),w(v).to.changeAST("start = []| ..3|",{rules:[{match:1}]})}),it("for |0.. | correctly",()=>{w(v).to.changeAST("start =  .|0.. |",{rules:[{match:1}]}),w(v).to.changeAST("start = ''|0.. |",{rules:[{match:1}]}),w(v).to.changeAST("start = []|0.. |",{rules:[{match:1}]})}),it("for |1.. | correctly",()=>{w(v).to.changeAST("start =  .|1.. |",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|1.. |",{rules:[{match:1}]}),w(v).to.changeAST("start = []|1.. |",{rules:[{match:-1}]})}),it("for |2.. | correctly",()=>{w(v).to.changeAST("start =  .|2.. |",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|2.. |",{rules:[{match:1}]}),w(v).to.changeAST("start = []|2.. |",{rules:[{match:-1}]})}),it("for |2..3| correctly",()=>{w(v).to.changeAST("start =  .|2..3|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|2..3|",{rules:[{match:1}]}),w(v).to.changeAST("start = []|2..3|",{rules:[{match:-1}]})}),it("for | 42 | correctly",()=>{w(v).to.changeAST("start =  .| 42 |",{rules:[{match:0}]}),w(v).to.changeAST("start = ''| 42 |",{rules:[{match:1}]}),w(v).to.changeAST("start = []| 42 |",{rules:[{match:-1}]})})}),describe("with variable boundaries",()=>{it("for |   ..max| correctly",()=>{w(v).to.changeAST("start =  .|   ..max|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|   ..max|",{rules:[{match:0}]}),w(v).to.changeAST("start = []|   ..max|",{rules:[{match:0}]})}),it("for |min..   | correctly",()=>{w(v).to.changeAST("start =  .|min..   |",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|min..   |",{rules:[{match:0}]}),w(v).to.changeAST("start = []|min..   |",{rules:[{match:0}]})}),it("for |min..max| correctly",()=>{w(v).to.changeAST("start =  .|min..max|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|min..max|",{rules:[{match:0}]}),w(v).to.changeAST("start = []|min..max|",{rules:[{match:0}]})}),it("for | exact  | correctly",()=>{w(v).to.changeAST("start =  .|exact|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|exact|",{rules:[{match:0}]}),w(v).to.changeAST("start = []|exact|",{rules:[{match:0}]})})}),describe("with function boundaries",()=>{it("for |  ..{}| correctly",()=>{w(v).to.changeAST("start =  .|   ..{}|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|   ..{}|",{rules:[{match:0}]}),w(v).to.changeAST("start = []|   ..{}|",{rules:[{match:0}]})}),it("for |{}..  | correctly",()=>{w(v).to.changeAST("start =  .|{}..   |",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|{}..   |",{rules:[{match:0}]}),w(v).to.changeAST("start = []|{}..   |",{rules:[{match:0}]})}),it("for |{}..{}| correctly",()=>{w(v).to.changeAST("start =  .|{}..{}|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|{}..{}|",{rules:[{match:0}]}),w(v).to.changeAST("start = []|{}..{}|",{rules:[{match:0}]})}),it("for |  {}  | correctly",()=>{w(v).to.changeAST("start =  .|{}|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|{}|",{rules:[{match:0}]}),w(v).to.changeAST("start = []|{}|",{rules:[{match:0}]})})})}),describe("with delimiter",()=>{describe("with constant boundaries",()=>{it("for | .. , delimiter| correctly",()=>{w(v).to.changeAST("start =  .| .. , .|",{rules:[{match:1}]}),w(v).to.changeAST("start =  .| .. ,''|",{rules:[{match:1}]}),w(v).to.changeAST("start =  .| .. ,[]|",{rules:[{match:1}]}),w(v).to.changeAST("start = ''| .. , .|",{rules:[{match:1}]}),w(v).to.changeAST("start = ''| .. ,''|",{rules:[{match:1}]}),w(v).to.changeAST("start = ''| .. ,[]|",{rules:[{match:1}]}),w(v).to.changeAST("start = []| .. , .|",{rules:[{match:1}]}),w(v).to.changeAST("start = []| .. ,''|",{rules:[{match:1}]}),w(v).to.changeAST("start = []| .. ,[]|",{rules:[{match:1}]})}),it("for | ..1, delimiter| correctly",()=>{w(v).to.changeAST("start =  .| ..1, .|",{rules:[{match:1}]}),w(v).to.changeAST("start =  .| ..1,''|",{rules:[{match:1}]}),w(v).to.changeAST("start =  .| ..1,[]|",{rules:[{match:1}]}),w(v).to.changeAST("start = ''| ..1, .|",{rules:[{match:1}]}),w(v).to.changeAST("start = ''| ..1,''|",{rules:[{match:1}]}),w(v).to.changeAST("start = ''| ..1,[]|",{rules:[{match:1}]}),w(v).to.changeAST("start = []| ..1, .|",{rules:[{match:1}]}),w(v).to.changeAST("start = []| ..1,''|",{rules:[{match:1}]}),w(v).to.changeAST("start = []| ..1,[]|",{rules:[{match:1}]})}),it("for | ..3, delimiter| correctly",()=>{w(v).to.changeAST("start =  .| ..3, .|",{rules:[{match:1}]}),w(v).to.changeAST("start =  .| ..3,''|",{rules:[{match:1}]}),w(v).to.changeAST("start =  .| ..3,[]|",{rules:[{match:1}]}),w(v).to.changeAST("start = ''| ..3, .|",{rules:[{match:1}]}),w(v).to.changeAST("start = ''| ..3,''|",{rules:[{match:1}]}),w(v).to.changeAST("start = ''| ..3,[]|",{rules:[{match:1}]}),w(v).to.changeAST("start = []| ..3, .|",{rules:[{match:1}]}),w(v).to.changeAST("start = []| ..3,''|",{rules:[{match:1}]}),w(v).to.changeAST("start = []| ..3,[]|",{rules:[{match:1}]})}),it("for |0.. , delimiter| correctly",()=>{w(v).to.changeAST("start =  .|0.. , .|",{rules:[{match:1}]}),w(v).to.changeAST("start =  .|0.. ,''|",{rules:[{match:1}]}),w(v).to.changeAST("start =  .|0.. ,[]|",{rules:[{match:1}]}),w(v).to.changeAST("start = ''|0.. , .|",{rules:[{match:1}]}),w(v).to.changeAST("start = ''|0.. ,''|",{rules:[{match:1}]}),w(v).to.changeAST("start = ''|0.. ,[]|",{rules:[{match:1}]}),w(v).to.changeAST("start = []|0.. , .|",{rules:[{match:1}]}),w(v).to.changeAST("start = []|0.. ,''|",{rules:[{match:1}]}),w(v).to.changeAST("start = []|0.. ,[]|",{rules:[{match:1}]})}),it("for |1.. , delimiter| correctly",()=>{w(v).to.changeAST("start =  .|1.. , .|",{rules:[{match:0}]}),w(v).to.changeAST("start =  .|1.. ,''|",{rules:[{match:0}]}),w(v).to.changeAST("start =  .|1.. ,[]|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|1.. , .|",{rules:[{match:1}]}),w(v).to.changeAST("start = ''|1.. ,''|",{rules:[{match:1}]}),w(v).to.changeAST("start = ''|1.. ,[]|",{rules:[{match:1}]}),w(v).to.changeAST("start = []|1.. , .|",{rules:[{match:-1}]}),w(v).to.changeAST("start = []|1.. ,''|",{rules:[{match:-1}]}),w(v).to.changeAST("start = []|1.. ,[]|",{rules:[{match:-1}]})}),it("for |2.. , delimiter| correctly",()=>{w(v).to.changeAST("start =  .|2.. , .|",{rules:[{match:0}]}),w(v).to.changeAST("start =  .|2.. ,''|",{rules:[{match:0}]}),w(v).to.changeAST("start =  .|2.. ,[]|",{rules:[{match:-1}]}),w(v).to.changeAST("start = ''|2.. , .|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|2.. ,''|",{rules:[{match:1}]}),w(v).to.changeAST("start = ''|2.. ,[]|",{rules:[{match:-1}]}),w(v).to.changeAST("start = []|2.. , .|",{rules:[{match:-1}]}),w(v).to.changeAST("start = []|2.. ,''|",{rules:[{match:-1}]}),w(v).to.changeAST("start = []|2.. ,[]|",{rules:[{match:-1}]})}),it("for |2..3, delimiter| correctly",()=>{w(v).to.changeAST("start =  .|2..3, .|",{rules:[{match:0}]}),w(v).to.changeAST("start =  .|2..3,''|",{rules:[{match:0}]}),w(v).to.changeAST("start =  .|2..3,[]|",{rules:[{match:-1}]}),w(v).to.changeAST("start = ''|2..3, .|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|2..3,''|",{rules:[{match:1}]}),w(v).to.changeAST("start = ''|2..3,[]|",{rules:[{match:-1}]}),w(v).to.changeAST("start = []|2..3, .|",{rules:[{match:-1}]}),w(v).to.changeAST("start = []|2..3,''|",{rules:[{match:-1}]}),w(v).to.changeAST("start = []|2..3,[]|",{rules:[{match:-1}]})}),it("for | 42 , delimiter| correctly",()=>{w(v).to.changeAST("start =  .| 42 , .|",{rules:[{match:0}]}),w(v).to.changeAST("start =  .| 42 ,''|",{rules:[{match:0}]}),w(v).to.changeAST("start =  .| 42 ,[]|",{rules:[{match:-1}]}),w(v).to.changeAST("start = ''| 42 , .|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''| 42 ,''|",{rules:[{match:1}]}),w(v).to.changeAST("start = ''| 42 ,[]|",{rules:[{match:-1}]}),w(v).to.changeAST("start = []| 42 , .|",{rules:[{match:-1}]}),w(v).to.changeAST("start = []| 42 ,''|",{rules:[{match:-1}]}),w(v).to.changeAST("start = []| 42 ,[]|",{rules:[{match:-1}]})})}),describe("with variable boundaries",()=>{it("for |   ..max, delimiter| correctly",()=>{w(v).to.changeAST("start =  .|   ..max, .|",{rules:[{match:0}]}),w(v).to.changeAST("start =  .|   ..max,''|",{rules:[{match:0}]}),w(v).to.changeAST("start =  .|   ..max,[]|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|   ..max, .|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|   ..max,''|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|   ..max,[]|",{rules:[{match:0}]}),w(v).to.changeAST("start = []|   ..max, .|",{rules:[{match:0}]}),w(v).to.changeAST("start = []|   ..max,''|",{rules:[{match:0}]}),w(v).to.changeAST("start = []|   ..max,[]|",{rules:[{match:0}]})}),it("for |min..   , delimiter| correctly",()=>{w(v).to.changeAST("start =  .|min..   , .|",{rules:[{match:0}]}),w(v).to.changeAST("start =  .|min..   ,''|",{rules:[{match:0}]}),w(v).to.changeAST("start =  .|min..   ,[]|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|min..   , .|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|min..   ,''|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|min..   ,[]|",{rules:[{match:0}]}),w(v).to.changeAST("start = []|min..   , .|",{rules:[{match:0}]}),w(v).to.changeAST("start = []|min..   ,''|",{rules:[{match:0}]}),w(v).to.changeAST("start = []|min..   ,[]|",{rules:[{match:0}]})}),it("for |min..max, delimiter| correctly",()=>{w(v).to.changeAST("start =  .|min..max, .|",{rules:[{match:0}]}),w(v).to.changeAST("start =  .|min..max,''|",{rules:[{match:0}]}),w(v).to.changeAST("start =  .|min..max,[]|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|min..max, .|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|min..max,''|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|min..max,[]|",{rules:[{match:0}]}),w(v).to.changeAST("start = []|min..max, .|",{rules:[{match:0}]}),w(v).to.changeAST("start = []|min..max,''|",{rules:[{match:0}]}),w(v).to.changeAST("start = []|min..max,[]|",{rules:[{match:0}]})}),it("for | exact  , delimiter| correctly",()=>{w(v).to.changeAST("start =  .| exact  , .|",{rules:[{match:0}]}),w(v).to.changeAST("start =  .| exact  ,''|",{rules:[{match:0}]}),w(v).to.changeAST("start =  .| exact  ,[]|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''| exact  , .|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''| exact  ,''|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''| exact  ,[]|",{rules:[{match:0}]}),w(v).to.changeAST("start = []| exact  , .|",{rules:[{match:0}]}),w(v).to.changeAST("start = []| exact  ,''|",{rules:[{match:0}]}),w(v).to.changeAST("start = []| exact  ,[]|",{rules:[{match:0}]})})}),describe("with function boundaries",()=>{it("for |  ..{}, delimiter| correctly",()=>{w(v).to.changeAST("start =  .|   ..{}, .|",{rules:[{match:0}]}),w(v).to.changeAST("start =  .|   ..{},''|",{rules:[{match:0}]}),w(v).to.changeAST("start =  .|   ..{},[]|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|   ..{}, .|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|   ..{},''|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|   ..{},[]|",{rules:[{match:0}]}),w(v).to.changeAST("start = []|   ..{}, .|",{rules:[{match:0}]}),w(v).to.changeAST("start = []|   ..{},''|",{rules:[{match:0}]}),w(v).to.changeAST("start = []|   ..{},[]|",{rules:[{match:0}]})}),it("for |{}..  , delimiter| correctly",()=>{w(v).to.changeAST("start =  .|{}..   , .|",{rules:[{match:0}]}),w(v).to.changeAST("start =  .|{}..   ,''|",{rules:[{match:0}]}),w(v).to.changeAST("start =  .|{}..   ,[]|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|{}..   , .|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|{}..   ,''|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|{}..   ,[]|",{rules:[{match:0}]}),w(v).to.changeAST("start = []|{}..   , .|",{rules:[{match:0}]}),w(v).to.changeAST("start = []|{}..   ,''|",{rules:[{match:0}]}),w(v).to.changeAST("start = []|{}..   ,[]|",{rules:[{match:0}]})}),it("for |{}..{}, delimiter| correctly",()=>{w(v).to.changeAST("start =  .|{}..{}, .|",{rules:[{match:0}]}),w(v).to.changeAST("start =  .|{}..{},''|",{rules:[{match:0}]}),w(v).to.changeAST("start =  .|{}..{},[]|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|{}..{}, .|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|{}..{},''|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''|{}..{},[]|",{rules:[{match:0}]}),w(v).to.changeAST("start = []|{}..{}, .|",{rules:[{match:0}]}),w(v).to.changeAST("start = []|{}..{},''|",{rules:[{match:0}]}),w(v).to.changeAST("start = []|{}..{},[]|",{rules:[{match:0}]})}),it("for |  {}  , delimiter| correctly",()=>{w(v).to.changeAST("start =  .| {}  , .|",{rules:[{match:0}]}),w(v).to.changeAST("start =  .| {}  ,''|",{rules:[{match:0}]}),w(v).to.changeAST("start =  .| {}  ,[]|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''| {}  , .|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''| {}  ,''|",{rules:[{match:0}]}),w(v).to.changeAST("start = ''| {}  ,[]|",{rules:[{match:0}]}),w(v).to.changeAST("start = []| {}  , .|",{rules:[{match:0}]}),w(v).to.changeAST("start = []| {}  ,''|",{rules:[{match:0}]}),w(v).to.changeAST("start = []| {}  ,[]|",{rules:[{match:0}]})})})})}),it("calculate |match| property for |group| correctly",()=>{w(v).to.changeAST("start = (.)",{rules:[{match:0}]}),w(v).to.changeAST("start = ('')",{rules:[{match:1}]}),w(v).to.changeAST("start = ([])",{rules:[{match:-1}]})}),it("calculate |match| property for |rule_ref| correctly",()=>{w(v).to.changeAST(["start = end","end = . "].join(`
`),{rules:[{match:0},{match:0}]}),w(v).to.changeAST(["start = end","end = ''"].join(`
`),{rules:[{match:1},{match:1}]}),w(v).to.changeAST(["start = end","end = []"].join(`
`),{rules:[{match:-1},{match:-1}]}),w(v).to.changeAST("start = .  start",{rules:[{match:0}]}),w(v).to.changeAST("start = '' start",{rules:[{match:0}]}),w(v).to.changeAST("start = [] start",{rules:[{match:-1}]}),w(v).to.changeAST("start = . start []",{rules:[{match:-1}]})})})});var of=F(()=>{"use strict";var Z1=Ge(),Yt=Ds(),{expect:Qt}=Z1;describe("compiler pass |generateJS|",()=>{describe("coverage",()=>{let a={type:"grammar",imports:[],rules:[],location:{source:"",start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}}},t={};it("throws unless various grammar fields are set",()=>{Qt(()=>Yt(a,t)).to.throw(Error,"generateJS: generate bytecode was not called."),a.literals=[],Qt(()=>Yt({...a,literals:[]},t)).to.throw(Error,"generateJS: generate bytecode was not called."),a.locations=[],Qt(()=>Yt({...a,literals:[]},t)).to.throw(Error,"generateJS: generate bytecode was not called."),a.classes=[],Qt(()=>Yt({...a,literals:[]},t)).to.throw(Error,"generateJS: generate bytecode was not called."),a.expectations=[],Qt(()=>Yt({...a,literals:[]},t)).to.throw(Error,"generateJS: generate bytecode was not called."),a.functions=[],Qt(()=>Yt({...a,literals:[]},t)).to.throw(Error,"generateJS: generate bytecode was not called."),a.importedNames=[],Qt(()=>Yt(a,t)).to.throw(Error,"generateJS: options.allowedStartRules was not set."),t.allowedStartRules=["start"],Qt(()=>Yt(a,t)).to.not.throw()})})})});var lf=F(()=>{"use strict";var cf=Ge(),X1=ht(),z=Es();cf.use(X1);var G=cf.expect;describe("compiler pass |generateBytecode|",()=>{function a(o){return{rules:[{bytecode:o}]}}function t(o,r){return{rules:[{bytecode:o}],locations:r}}function e(o,r,s,n){return{literals:o,classes:r,expectations:s,functions:n}}describe("for grammar",()=>{it("generates correct bytecode",()=>{G(z).to.changeAST(["a = 'a'","b = 'b'","c = 'c'"].join(`
`),{rules:[{bytecode:[18,0,2,2,22,0,23,0]},{bytecode:[18,1,2,2,22,1,23,1]},{bytecode:[18,2,2,2,22,2,23,2]}]})}),it("allows Object prototype property names as literals",()=>{G(z).to.changeAST(["a = '__proto__'","b = 'constructor'","c = 'hasOwnProperty'","d = 'isPrototypeOf'","e = 'propertyIsEnumerable'","f = 'toLocaleString'","g = 'toString'","h = 'valueOf'"].join(`
`),{rules:[{bytecode:[18,0,2,2,22,0,23,0]},{bytecode:[18,1,2,2,22,1,23,1]},{bytecode:[18,2,2,2,22,2,23,2]},{bytecode:[18,3,2,2,22,3,23,3]},{bytecode:[18,4,2,2,22,4,23,4]},{bytecode:[18,5,2,2,22,5,23,5]},{bytecode:[18,6,2,2,22,6,23,6]},{bytecode:[18,7,2,2,22,7,23,7]}]})}),it("defines correct constants",()=>{G(z).to.changeAST(["a = 'a'","b = 'b'","c = 'c'"].join(`
`),e(["a","b","c"],[],[{type:"literal",value:"a",ignoreCase:!1},{type:"literal",value:"b",ignoreCase:!1},{type:"literal",value:"c",ignoreCase:!1}],[]))}),it("generates correct source mapping",()=>{G(z).to.changeAST(["a = 'a'"].join(`
`),t([37,0,18,0,2,2,22,0,23,0,38],[{source:"-",start:{offset:4,line:1,column:5},end:{offset:7,line:1,column:8}}]),{grammarSource:"-",output:"source-and-map"})}),it("generates correct plucking bytecode",()=>{G(z).to.changeAST("start = 'a' @'b' 'c'",a([5,18,0,2,2,22,0,23,0,15,34,3,18,1,2,2,22,1,23,1,15,19,4,18,2,2,2,22,2,23,2,15,4,4,36,4,1,1,8,3,7,3,8,2,7,3,6,7,3])),G(z).to.changeAST("start = 'a' @'b' @'c'",a([5,18,0,2,2,22,0,23,0,15,35,3,18,1,2,2,22,1,23,1,15,20,4,18,2,2,2,22,2,23,2,15,5,4,36,4,2,1,0,8,3,7,3,8,2,7,3,6,7,3]))})}),describe("for rule",()=>{it("generates correct bytecode",()=>{G(z).to.changeAST("start = 'a'",a([18,0,2,2,22,0,23,0]))})}),describe("for named",()=>{let o="start 'start' = 'a'";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([28,18,0,2,2,22,0,23,1,29,14,2,0,23,0]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"rule",value:"start"},{type:"literal",value:"a",ignoreCase:!1}],[]))})}),describe("for choice",()=>{it("generates correct bytecode and source mapping",()=>{G(z).to.changeAST("start = 'a' / label:'b' / 'c'",t([37,5,37,0,18,0,2,2,22,0,23,0,38,14,36,0,6,37,3,39,0,2,2,37,1,18,1,2,2,22,1,23,1,38,40,0,38,14,12,0,6,37,4,18,3,2,2,22,3,23,2,38,38],[{source:"-",start:{offset:8,line:1,column:9},end:{offset:11,line:1,column:12}},{source:"-",start:{offset:20,line:1,column:21},end:{offset:23,line:1,column:24}},{source:"-",start:{offset:14,line:1,column:15},end:{offset:19,line:1,column:20}},{source:"-",start:{offset:14,line:1,column:15},end:{offset:23,line:1,column:24}},{source:"-",start:{offset:26,line:1,column:27},end:{offset:29,line:1,column:30}},{source:"-",start:{offset:8,line:1,column:9},end:{offset:29,line:1,column:30}}]),{grammarSource:"-",output:"source-and-map"})})}),describe("for action",()=>{describe("without labels",()=>{let o="start = 'a' { code }";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,18,0,2,2,22,0,23,0,15,6,0,24,1,26,0,1,0,9]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[{predicate:!1,params:[],body:" code ",location:{source:void 0,start:{offset:13,line:1,column:14},end:{offset:19,line:1,column:20}}}]))})}),describe("with one label",()=>{let o="start = a:'a' { code }";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,18,0,2,2,22,0,23,0,15,7,0,24,1,26,0,1,1,0,9]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[{predicate:!1,params:["a"],body:" code ",location:{source:void 0,start:{offset:15,line:1,column:16},end:{offset:21,line:1,column:22}}}]))})}),describe("with multiple labels",()=>{let o="start = a:'a' b:'b' c:'c' { code }";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,18,0,2,2,22,0,23,0,15,39,3,18,1,2,2,22,1,23,1,15,24,4,18,2,2,2,22,2,23,2,15,9,4,24,3,26,0,4,3,2,1,0,8,3,7,3,8,2,7,3,6,7,3]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a","b","c"],[],[{type:"literal",value:"a",ignoreCase:!1},{type:"literal",value:"b",ignoreCase:!1},{type:"literal",value:"c",ignoreCase:!1}],[{predicate:!1,params:["a","b","c"],body:" code ",location:{source:void 0,start:{offset:27,line:1,column:28},end:{offset:33,line:1,column:34}}}]))})})}),describe("for sequence",()=>{let o="start = 'a' 'b' 'c'";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,18,0,2,2,22,0,23,0,15,33,3,18,1,2,2,22,1,23,1,15,18,4,18,2,2,2,22,2,23,2,15,3,4,11,3,9,8,3,7,3,8,2,7,3,6,7,3]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a","b","c"],[],[{type:"literal",value:"a",ignoreCase:!1},{type:"literal",value:"b",ignoreCase:!1},{type:"literal",value:"c",ignoreCase:!1}],[]))})}),describe("for labeled",()=>{it("generates correct bytecode",()=>{G(z).to.changeAST("start = a:'a'",a([18,0,2,2,22,0,23,0]))})}),describe("for text",()=>{it("generates correct bytecode",()=>{G(z).to.changeAST("start = $'a'",a([5,18,0,2,2,22,0,23,0,15,2,1,6,12,9]))})}),describe("for simple_and",()=>{let o="start = &'a'";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,28,18,0,2,2,22,0,23,0,29,15,3,3,6,7,1,6,6,3]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[]))})}),describe("for simple_not",()=>{let o="start = !'a'";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,28,18,0,2,2,22,0,23,0,29,14,3,3,6,6,1,6,7,3]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[]))})}),describe("for optional",()=>{let o="start = 'a'?";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([18,0,2,2,22,0,23,0,14,2,0,6,2]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[]))})}),describe("for zero_or_more",()=>{let o="start = 'a'*";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([4,18,0,2,2,22,0,23,0,16,9,10,18,0,2,2,22,0,23,0,6]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[]))})}),describe("for one_or_more",()=>{let o="start = 'a'+";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([4,18,0,2,2,22,0,23,0,15,12,3,16,9,10,18,0,2,2,22,0,23,0,6,6,6,3]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[]))})}),describe("for repeated",()=>{describe("without delimiter",()=>{describe("| .. | (edge case -- no boundaries)",()=>{let o="start = 'a'| .. |";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([4,18,0,2,2,22,0,23,0,16,9,10,18,0,2,2,22,0,23,0,6]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[]))})}),describe("with constant boundaries",()=>{describe("| ..3| (edge case -- no min boundary)",()=>{let o="start = 'a'| ..3|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([4,18,0,2,2,22,0,23,0,16,14,10,31,3,1,8,3,18,0,2,2,22,0,23,0,6]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[]))})}),describe("| ..1| (edge case -- no min boundary -- same as |optional|)",()=>{let o="start = 'a'| ..1|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([4,18,0,2,2,22,0,23,0,16,14,10,31,1,1,8,3,18,0,2,2,22,0,23,0,6]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[]))})}),describe("|2.. | (edge case -- no max boundary)",()=>{let o="start = 'a'|2.. |";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,4,18,0,2,2,22,0,23,0,16,9,10,18,0,2,2,22,0,23,0,6,30,2,3,1,6,7,3,9]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[]))})}),describe("|0.. | (edge case -- no max boundary -- same as |zero or more|)",()=>{let o="start = 'a'|0.. |";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([4,18,0,2,2,22,0,23,0,16,9,10,18,0,2,2,22,0,23,0,6]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[]))})}),describe("|1.. | (edge case -- no max boundary -- same as |one or more|)",()=>{let o="start = 'a'|1.. |";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,4,18,0,2,2,22,0,23,0,16,9,10,18,0,2,2,22,0,23,0,6,30,1,3,1,6,7,3,9]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[]))})}),describe("|2..3|",()=>{let o="start = 'a'|2..3|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,4,18,0,2,2,22,0,23,0,16,14,10,31,3,1,8,3,18,0,2,2,22,0,23,0,6,30,2,3,1,6,7,3,9]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[]))})}),describe("| 42 | (edge case -- exact repetitions)",()=>{let o="start = 'a'|42|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,4,18,0,2,2,22,0,23,0,16,14,10,31,42,1,8,3,18,0,2,2,22,0,23,0,6,30,42,3,1,6,7,3,9]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[]))})})}),describe("with variable boundaries",()=>{describe("| ..x| (edge case -- no min boundary)",()=>{let o="start = max:('a'{return 42;}) 'a'| ..max|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,5,18,0,2,2,22,0,23,0,15,6,0,24,1,26,0,1,0,9,15,41,3,4,33,1,1,8,3,18,0,2,2,22,0,23,0,16,14,10,33,1,1,8,3,18,0,2,2,22,0,23,0,6,15,3,4,11,2,9,8,2,7,3,6,7,3]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[{predicate:!1,params:[],body:"return 42;"}]))})}),describe("|x.. | (edge case -- no max boundary)",()=>{let o="start = min:('a'{return 42;}) 'a'|min.. |";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,5,18,0,2,2,22,0,23,0,15,6,0,24,1,26,0,1,0,9,15,40,3,5,4,18,0,2,2,22,0,23,0,16,9,10,18,0,2,2,22,0,23,0,6,32,2,3,1,6,7,3,9,15,3,4,11,2,9,8,2,7,3,6,7,3]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[{predicate:!1,params:[],body:"return 42;"}]))})}),describe("|x..y|",()=>{let o="start = min:('a'{return 42;}) max:('a'{return 42;}) 'a'|min..max|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,5,18,0,2,2,22,0,23,0,15,6,0,24,1,26,0,1,0,9,15,77,3,5,18,0,2,2,22,0,23,0,15,7,0,24,1,26,1,1,1,2,9,15,50,4,5,4,33,2,1,8,3,18,0,2,2,22,0,23,0,16,14,10,33,2,1,8,3,18,0,2,2,22,0,23,0,6,32,3,3,1,6,7,3,9,15,3,4,11,3,9,8,3,7,3,8,2,7,3,6,7,3]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[{predicate:!1,params:[],body:"return 42;"},{predicate:!1,params:["min"],body:"return 42;"}]))})}),describe("|exact| (edge case -- exact repetitions)",()=>{let o="start = exact:('a'{return 42;}) 'a'|exact|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,5,18,0,2,2,22,0,23,0,15,6,0,24,1,26,0,1,0,9,15,50,3,5,4,33,2,1,8,3,18,0,2,2,22,0,23,0,16,14,10,33,2,1,8,3,18,0,2,2,22,0,23,0,6,32,2,3,1,6,7,3,9,15,3,4,11,2,9,8,2,7,3,6,7,3]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[{predicate:!1,params:[],body:"return 42;"}]))})})}),describe("with function boundaries",()=>{describe("| ..x| (edge case -- no min boundary)",()=>{let o="start = 'a'| ..{return 42;}|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([26,0,0,0,4,33,1,1,8,3,18,0,2,2,22,0,23,0,16,14,10,33,1,1,8,3,18,0,2,2,22,0,23,0,6,9]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[{predicate:!0,params:[],body:"return 42;"}]))})}),describe("|x.. | (edge case -- no max boundary)",()=>{let o="start = 'a'|{return 42;}.. |";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([26,0,0,0,5,4,18,0,2,2,22,0,23,0,16,9,10,18,0,2,2,22,0,23,0,6,32,2,3,1,6,7,3,9,9]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[{predicate:!0,params:[],body:"return 42;"}]))})}),describe("|x..y|",()=>{let o="start = 'a'|{return 41;}..{return 43;}|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([26,0,0,0,26,1,0,0,5,4,33,2,1,8,3,18,0,2,2,22,0,23,0,16,14,10,33,2,1,8,3,18,0,2,2,22,0,23,0,6,32,3,3,1,6,7,3,9,9,9]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[{predicate:!0,params:[],body:"return 41;"},{predicate:!0,params:[],body:"return 43;"}]))})}),describe("|exact| (edge case -- exact repetitions)",()=>{let o="start = 'a'|{return 42;}|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([26,0,0,0,5,4,33,2,1,8,3,18,0,2,2,22,0,23,0,16,14,10,33,2,1,8,3,18,0,2,2,22,0,23,0,6,32,2,3,1,6,7,3,9,9]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[{predicate:!0,params:[],body:"return 42;"}]))})})})}),describe("with delimiter",()=>{describe("| .. , delim| (edge case -- no boundaries)",()=>{let o="start = 'a'| .. , 'b'|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([4,18,0,2,2,22,0,23,0,16,30,10,5,18,1,2,2,22,1,23,1,15,16,1,6,18,0,2,2,22,0,23,0,14,3,1,6,7,3,9,9,6]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a","b"],[],[{type:"literal",value:"a",ignoreCase:!1},{type:"literal",value:"b",ignoreCase:!1}],[]))})}),describe("with constant boundaries",()=>{describe("| ..3, delim| (edge case -- no min boundary)",()=>{let o="start = 'a'| ..3, 'b'|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([4,18,0,2,2,22,0,23,0,16,35,10,31,3,1,29,3,5,18,1,2,2,22,1,23,1,15,16,1,6,18,0,2,2,22,0,23,0,14,3,1,6,7,3,9,9,6]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a","b"],[],[{type:"literal",value:"a",ignoreCase:!1},{type:"literal",value:"b",ignoreCase:!1}],[]))})}),describe("| ..1, delim| (edge case -- no min boundary -- same as |optional|)",()=>{let o="start = 'a'| ..1, 'b'|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([4,18,0,2,2,22,0,23,0,16,35,10,31,1,1,29,3,5,18,1,2,2,22,1,23,1,15,16,1,6,18,0,2,2,22,0,23,0,14,3,1,6,7,3,9,9,6]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a","b"],[],[{type:"literal",value:"a",ignoreCase:!1},{type:"literal",value:"b",ignoreCase:!1}],[]))})}),describe("|2.. , delim| (edge case -- no max boundary)",()=>{let o="start = 'a'|2.. , 'b'|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,4,18,0,2,2,22,0,23,0,16,30,10,5,18,1,2,2,22,1,23,1,15,16,1,6,18,0,2,2,22,0,23,0,14,3,1,6,7,3,9,9,6,30,2,3,1,6,7,3,9]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a","b"],[],[{type:"literal",value:"a",ignoreCase:!1},{type:"literal",value:"b",ignoreCase:!1}],[]))})}),describe("|0.. , delim| (edge case -- no max boundary -- same as |zero or more|)",()=>{let o="start = 'a'|0.. , 'b'|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([4,18,0,2,2,22,0,23,0,16,30,10,5,18,1,2,2,22,1,23,1,15,16,1,6,18,0,2,2,22,0,23,0,14,3,1,6,7,3,9,9,6]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a","b"],[],[{type:"literal",value:"a",ignoreCase:!1},{type:"literal",value:"b",ignoreCase:!1}],[]))})}),describe("|1.. , delim| (edge case -- no max boundary -- same as |one or more|)",()=>{let o="start = 'a'|1.. , 'b'|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,4,18,0,2,2,22,0,23,0,16,30,10,5,18,1,2,2,22,1,23,1,15,16,1,6,18,0,2,2,22,0,23,0,14,3,1,6,7,3,9,9,6,30,1,3,1,6,7,3,9]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a","b"],[],[{type:"literal",value:"a",ignoreCase:!1},{type:"literal",value:"b",ignoreCase:!1}],[]))})}),describe("|2..3, delim|",()=>{let o="start = 'a'|2..3, 'b'|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,4,18,0,2,2,22,0,23,0,16,35,10,31,3,1,29,3,5,18,1,2,2,22,1,23,1,15,16,1,6,18,0,2,2,22,0,23,0,14,3,1,6,7,3,9,9,6,30,2,3,1,6,7,3,9]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a","b"],[],[{type:"literal",value:"a",ignoreCase:!1},{type:"literal",value:"b",ignoreCase:!1}],[]))})}),describe("| 42 , delim| (edge case -- exact repetitions)",()=>{let o="start = 'a'|42, 'b'|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,4,18,0,2,2,22,0,23,0,16,35,10,31,42,1,29,3,5,18,1,2,2,22,1,23,1,15,16,1,6,18,0,2,2,22,0,23,0,14,3,1,6,7,3,9,9,6,30,42,3,1,6,7,3,9]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a","b"],[],[{type:"literal",value:"a",ignoreCase:!1},{type:"literal",value:"b",ignoreCase:!1}],[]))})})}),describe("with variable boundaries",()=>{describe("| ..x, delim| (edge case -- no min boundary)",()=>{let o="start = max:(''{return 42;}) 'a'| ..max, 'b'|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,5,35,15,6,0,24,1,26,0,1,0,9,15,62,3,4,33,1,1,8,3,18,0,2,2,22,0,23,0,16,35,10,33,1,1,29,3,5,18,1,2,2,22,1,23,1,15,16,1,6,18,0,2,2,22,0,23,0,14,3,1,6,7,3,9,9,6,15,3,4,11,2,9,8,2,7,3,6,7,3]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a","b"],[],[{type:"literal",value:"a",ignoreCase:!1},{type:"literal",value:"b",ignoreCase:!1}],[{predicate:!1,params:[],body:"return 42;"}]))})}),describe("|x.. , delim| (edge case -- no max boundary)",()=>{let o="start = min:(''{return 42;}) 'a'|min.. , 'b'|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,5,35,15,6,0,24,1,26,0,1,0,9,15,61,3,5,4,18,0,2,2,22,0,23,0,16,30,10,5,18,1,2,2,22,1,23,1,15,16,1,6,18,0,2,2,22,0,23,0,14,3,1,6,7,3,9,9,6,32,2,3,1,6,7,3,9,15,3,4,11,2,9,8,2,7,3,6,7,3]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a","b"],[],[{type:"literal",value:"a",ignoreCase:!1},{type:"literal",value:"b",ignoreCase:!1}],[{predicate:!1,params:[],body:"return 42;"}]))})}),describe("|x..y, delim|",()=>{let o="start = min:(''{return 42;}) max:(''{return 42;}) 'a'|min..max, 'b'|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,5,35,15,6,0,24,1,26,0,1,0,9,15,91,3,5,35,15,7,0,24,1,26,1,1,1,2,9,15,71,4,5,4,33,2,1,8,3,18,0,2,2,22,0,23,0,16,35,10,33,2,1,29,3,5,18,1,2,2,22,1,23,1,15,16,1,6,18,0,2,2,22,0,23,0,14,3,1,6,7,3,9,9,6,32,3,3,1,6,7,3,9,15,3,4,11,3,9,8,3,7,3,8,2,7,3,6,7,3]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a","b"],[],[{type:"literal",value:"a",ignoreCase:!1},{type:"literal",value:"b",ignoreCase:!1}],[{predicate:!1,params:[],body:"return 42;"},{predicate:!1,params:["min"],body:"return 42;"}]))})}),describe("|exact, delim| (edge case -- exact repetitions)",()=>{let o="start = exact:(''{return 42;}) 'a'|exact, 'b'|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,5,35,15,6,0,24,1,26,0,1,0,9,15,71,3,5,4,33,2,1,8,3,18,0,2,2,22,0,23,0,16,35,10,33,2,1,29,3,5,18,1,2,2,22,1,23,1,15,16,1,6,18,0,2,2,22,0,23,0,14,3,1,6,7,3,9,9,6,32,2,3,1,6,7,3,9,15,3,4,11,2,9,8,2,7,3,6,7,3]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a","b"],[],[{type:"literal",value:"a",ignoreCase:!1},{type:"literal",value:"b",ignoreCase:!1}],[{predicate:!1,params:[],body:"return 42;"}]))})}),describe("used in delimiter",()=>{describe("delim|min..|",()=>{let o="start = min:(''{return 42;}) 'a'|.., 'b'|min..| |";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,5,35,15,6,0,24,1,26,0,1,0,9,15,74,3,4,18,0,2,2,22,0,23,0,16,52,10,5,5,4,18,1,2,2,22,1,23,1,16,9,10,18,1,2,2,22,1,23,1,6,32,4,3,1,6,7,3,9,15,16,1,6,18,0,2,2,22,0,23,0,14,3,1,6,7,3,9,9,6,15,3,4,11,2,9,8,2,7,3,6,7,3]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a","b"],[],[{type:"literal",value:"a",ignoreCase:!1},{type:"literal",value:"b",ignoreCase:!1}],[{predicate:!1,params:[],body:"return 42;"}]))})}),describe("delim|..max|",()=>{let o="start = max:(''{return 42;}) 'a'|.., 'b'|..max| |";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,5,35,15,6,0,24,1,26,0,1,0,9,15,75,3,4,18,0,2,2,22,0,23,0,16,53,10,5,4,33,3,1,8,3,18,1,2,2,22,1,23,1,16,14,10,33,3,1,8,3,18,1,2,2,22,1,23,1,6,15,16,1,6,18,0,2,2,22,0,23,0,14,3,1,6,7,3,9,9,6,15,3,4,11,2,9,8,2,7,3,6,7,3]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a","b"],[],[{type:"literal",value:"a",ignoreCase:!1},{type:"literal",value:"b",ignoreCase:!1}],[{predicate:!1,params:[],body:"return 42;"}]))})}),describe("delim|exact|",()=>{let o="start = exact:(''{return 42;}) 'a'|.., 'b'|exact| |";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,5,35,15,6,0,24,1,26,0,1,0,9,15,84,3,4,18,0,2,2,22,0,23,0,16,62,10,5,5,4,33,4,1,8,3,18,1,2,2,22,1,23,1,16,14,10,33,4,1,8,3,18,1,2,2,22,1,23,1,6,32,4,3,1,6,7,3,9,15,16,1,6,18,0,2,2,22,0,23,0,14,3,1,6,7,3,9,9,6,15,3,4,11,2,9,8,2,7,3,6,7,3]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a","b"],[],[{type:"literal",value:"a",ignoreCase:!1},{type:"literal",value:"b",ignoreCase:!1}],[{predicate:!1,params:[],body:"return 42;"}]))})})})}),describe("with function boundaries",()=>{describe("| ..x, delim| (edge case -- no min boundary)",()=>{let o="start = 'a'| ..{return 42;}, 'b'|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([26,0,0,0,4,33,1,1,8,3,18,0,2,2,22,0,23,0,16,35,10,33,1,1,29,3,5,18,1,2,2,22,1,23,1,15,16,1,6,18,0,2,2,22,0,23,0,14,3,1,6,7,3,9,9,6,9]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a","b"],[],[{type:"literal",value:"a",ignoreCase:!1},{type:"literal",value:"b",ignoreCase:!1}],[{predicate:!0,params:[],body:"return 42;"}]))})}),describe("|x.. , delim| (edge case -- no max boundary)",()=>{let o="start = 'a'|{return 42;}.. , 'b'|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([26,0,0,0,5,4,18,0,2,2,22,0,23,0,16,30,10,5,18,1,2,2,22,1,23,1,15,16,1,6,18,0,2,2,22,0,23,0,14,3,1,6,7,3,9,9,6,32,2,3,1,6,7,3,9,9]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a","b"],[],[{type:"literal",value:"a",ignoreCase:!1},{type:"literal",value:"b",ignoreCase:!1}],[{predicate:!0,params:[],body:"return 42;"}]))})}),describe("|x..y, delim|",()=>{let o="start = 'a'|{return 41;}..{return 43;}, 'b'|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([26,0,0,0,26,1,0,0,5,4,33,2,1,8,3,18,0,2,2,22,0,23,0,16,35,10,33,2,1,29,3,5,18,1,2,2,22,1,23,1,15,16,1,6,18,0,2,2,22,0,23,0,14,3,1,6,7,3,9,9,6,32,3,3,1,6,7,3,9,9,9]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a","b"],[],[{type:"literal",value:"a",ignoreCase:!1},{type:"literal",value:"b",ignoreCase:!1}],[{predicate:!0,params:[],body:"return 41;"},{predicate:!0,params:[],body:"return 43;"}]))})}),describe("|exact, delim| (edge case -- exact repetitions)",()=>{let o="start = 'a'|{return 42;}, 'b'|";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([26,0,0,0,5,4,33,2,1,8,3,18,0,2,2,22,0,23,0,16,35,10,33,2,1,29,3,5,18,1,2,2,22,1,23,1,15,16,1,6,18,0,2,2,22,0,23,0,14,3,1,6,7,3,9,9,6,32,2,3,1,6,7,3,9,9]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a","b"],[],[{type:"literal",value:"a",ignoreCase:!1},{type:"literal",value:"b",ignoreCase:!1}],[{predicate:!0,params:[],body:"return 42;"}]))})})})})}),describe("for group",()=>{let o="start = ('a')";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([18,0,2,2,22,0,23,0]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[]))})}),describe("for semantic_and",()=>{describe("without labels",()=>{let o="start = &{ code }";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([25,26,0,0,0,13,2,2,6,1,6,3]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e([],[],[],[{predicate:!0,params:[],body:" code ",location:{source:void 0,start:{offset:10,line:1,column:11},end:{offset:16,line:1,column:17}}}]))})}),describe("with labels",()=>{let o="start = a:'a' b:'b' c:'c' &{ code }";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,18,0,2,2,22,0,23,0,15,55,3,18,1,2,2,22,1,23,1,15,40,4,18,2,2,2,22,2,23,2,15,25,4,25,26,0,0,3,2,1,0,13,2,2,6,1,6,3,15,3,4,11,4,9,8,4,7,3,8,3,7,3,8,2,7,3,6,7,3]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a","b","c"],[],[{type:"literal",value:"a",ignoreCase:!1},{type:"literal",value:"b",ignoreCase:!1},{type:"literal",value:"c",ignoreCase:!1}],[{predicate:!0,params:["a","b","c"],body:" code ",location:{source:void 0,start:{offset:28,line:1,column:29},end:{offset:34,line:1,column:35}}}]))})})}),describe("for semantic_not",()=>{describe("without labels",()=>{let o="start = !{ code }";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([25,26,0,0,0,13,2,2,6,3,6,1]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e([],[],[],[{predicate:!0,params:[],body:" code ",location:{source:void 0,start:{offset:10,line:1,column:11},end:{offset:16,line:1,column:17}}}]))})}),describe("with labels",()=>{let o="start = a:'a' b:'b' c:'c' !{ code }";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([5,18,0,2,2,22,0,23,0,15,55,3,18,1,2,2,22,1,23,1,15,40,4,18,2,2,2,22,2,23,2,15,25,4,25,26,0,0,3,2,1,0,13,2,2,6,3,6,1,15,3,4,11,4,9,8,4,7,3,8,3,7,3,8,2,7,3,6,7,3]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a","b","c"],[],[{type:"literal",value:"a",ignoreCase:!1},{type:"literal",value:"b",ignoreCase:!1},{type:"literal",value:"c",ignoreCase:!1}],[{predicate:!0,params:["a","b","c"],body:" code ",location:{source:void 0,start:{offset:28,line:1,column:29},end:{offset:34,line:1,column:35}}}]))})})}),describe("for rule_ref",()=>{it("generates correct bytecode",()=>{G(z).to.changeAST(["start = other","other = 'other'"].join(`
`),{rules:[{bytecode:[27,1]},{}]})})}),describe("for literal",()=>{describe("empty",()=>{let o="start = ''";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([35]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e([],[],[],[]))})}),describe("non-empty case-sensitive",()=>{let o="start = 'a'";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([18,0,2,2,22,0,23,0]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"a",ignoreCase:!1}],[]))})}),describe("non-empty case-insensitive",()=>{let o="start = 'A'i";it("generates correct bytecode",()=>{G(z).to.changeAST(o,a([19,0,2,2,21,1,23,0]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e(["a"],[],[{type:"literal",value:"A",ignoreCase:!0}],[]))})})}),describe("for class",()=>{it("generates correct bytecode",()=>{G(z).to.changeAST("start = [a]",a([20,0,2,2,21,1,23,0]))}),describe("non-inverted case-sensitive",()=>{it("defines correct constants",()=>{G(z).to.changeAST("start = [a]",e([],[{value:["a"],ignoreCase:!1,inverted:!1}],[{type:"class",value:["a"],ignoreCase:!1,inverted:!1}],[]))})}),describe("inverted case-sensitive",()=>{it("defines correct constants",()=>{G(z).to.changeAST("start = [^a]",e([],[{value:["a"],ignoreCase:!1,inverted:!0}],[{type:"class",value:["a"],ignoreCase:!1,inverted:!0}],[]))})}),describe("non-inverted case-insensitive",()=>{it("defines correct constants",()=>{G(z).to.changeAST("start = [a]i",e([],[{value:["a"],ignoreCase:!0,inverted:!1}],[{type:"class",value:["a"],ignoreCase:!0,inverted:!1}],[]))})}),describe("complex",()=>{it("defines correct constants",()=>{G(z).to.changeAST("start = [ab-def-hij-l]",e([],[{value:["a",["b","d"],"e",["f","h"],"i",["j","l"]],ignoreCase:!1,inverted:!1}],[{type:"class",value:["a",["b","d"],"e",["f","h"],"i",["j","l"]],ignoreCase:!1,inverted:!1}],[]))})})}),describe("for any",()=>{let o="start = .";it("generates bytecode",()=>{G(z).to.changeAST(o,a([17,2,2,21,1,23,0]))}),it("defines correct constants",()=>{G(z).to.changeAST(o,e([],[],[{type:"any"}],[]))})})})});var df=F(()=>{"use strict";var pf=Ge(),e0=ht(),uf=As();pf.use(e0);var ff=pf.expect;describe("compiler pass |fixLibraryNumbers|",()=>{it("Adds library numbers for import * as",()=>{ff(uf).to.changeAST(`
import * as foo from "./foo.js";
import * as bar from "./foo.js";

a = foo.one / bar.two
      `,{rules:[{type:"rule",name:"a",expression:{type:"choice",alternatives:[{type:"library_ref",name:"one",library:"foo",libraryNumber:0},{type:"library_ref",name:"two",library:"bar",libraryNumber:1}]}}]})}),it("fails on unknown module names",()=>{ff(uf).to.reportError("a = foo.bar",{message:'Unknown module "foo"'})})})});var mf=F(()=>{"use strict";var hf=Ge(),t0=ht(),xa=ws();hf.use(t0);var va=hf.expect;describe("compiler pass |addImportedRules|",()=>{it("creates default rules with undefined startRule",()=>{va(xa).to.changeAST(`
import foo from './foo.js'
import bar from './bar.js'

a = foo / bar
`,{rules:[{type:"rule",name:"a",expression:{type:"choice",alternatives:[{name:"foo",type:"rule_ref"},{name:"bar",type:"rule_ref"}]}},{type:"rule",name:"foo",expression:{type:"library_ref",name:void 0,library:"./foo.js",libraryNumber:0}},{type:"rule",name:"bar",expression:{type:"library_ref",name:void 0,library:"./bar.js",libraryNumber:1}}]})}),it("creates bound rules with named startRule",()=>{va(xa).to.changeAST(`
import {foo} from './foo.js'
import {bar} from './bar.js'

a = foo / bar
`,{rules:[{type:"rule",name:"a",expression:{type:"choice",alternatives:[{name:"foo",type:"rule_ref"},{name:"bar",type:"rule_ref"}]}},{type:"rule",name:"foo",expression:{type:"library_ref",name:"foo",library:"./foo.js",libraryNumber:0}},{type:"rule",name:"bar",expression:{type:"library_ref",name:"bar",library:"./bar.js",libraryNumber:1}}]})}),it("creates bound rules with renamed startRule",()=>{va(xa).to.changeAST(`
import {foo as foo1} from './foo.js'
import {bar as bar2} from './bar.js'

a = foo1 / bar2
`,{rules:[{type:"rule",name:"a",expression:{type:"choice",alternatives:[{name:"foo1",type:"rule_ref"},{name:"bar2",type:"rule_ref"}]}},{type:"rule",name:"foo1",expression:{type:"library_ref",name:"foo",library:"./foo.js",libraryNumber:0}},{type:"rule",name:"bar2",expression:{type:"library_ref",name:"bar",library:"./bar.js",libraryNumber:1}}]})}),it("skips import as",()=>{va(xa).to.changeAST(`
import * as foo from './foo.js'

a = foo.one / foo.two
`,{rules:[{type:"rule",name:"a",expression:{type:"choice",alternatives:[{type:"library_ref",name:"one",library:"foo",libraryNumber:-1},{type:"library_ref",name:"two",library:"foo",libraryNumber:-1}]}}]})}),it("errors on bad types",()=>{va(()=>{xa({imports:[{what:[{type:"unknown"}],from:{module:"foo.js"}}]})}).to.throw(TypeError)})})});var wn=F(fo=>{"use strict";var r0=Ge(),uo=class{constructor(t){this.args=t}calledWithExactly(...t){let e=r0.util.eql(this.args,t);return e||console.error("Not equal",{calledWith:this.args,expected:t}),e}};function gf(){function a(...t){a.callCount++,a.called=!0,a.calls.push(new uo(t))}return a.called=!1,a.callCount=0,a.calls=[],a.getCall=t=>a.calls[t],a}fo.spy=function(){return gf()};fo.stub=function(t,e){let o=t[e],r=gf();return t[e]=r,r.restore=()=>{t[e]=o},o}});var bf=F(()=>{"use strict";var po=Ge(),S=Jt(),u=po.expect,{stub:a0}=wn();describe("generated parser behavior",()=>{function a(r){let s={};return Object.keys(r).forEach(n=>{s[n]=r[n]}),s}function t(r){[{cache:!1,trace:!1},{cache:!1,trace:!0},{cache:!0,trace:!1},{cache:!0,trace:!0}].forEach(n=>{describe("with options "+po.util.inspect(n),()=>{r(a(n))})})}function e(r){typeof console=="object"&&a0(console,"log");try{return r()}finally{typeof console=="object"&&console.log.restore()}}function o(r,s){let n=r.Assertion;n.addMethod("parse",function(c,l,h){h=h!==void 0?h:{};let b=e(()=>s.flag(this,"object").parse(c,h));l!==void 0&&this.assert(s.eql(b,l),"expected #{this} to parse input as #{exp} but got #{act}","expected #{this} to not parse input as #{exp}",l,b,!s.flag(this,"negate"))}),n.addMethod("failToParse",function(c,l,h){h=h!==void 0?h:{};let b=!1,T;try{T=e(()=>s.flag(this,"object").parse(c,h)),b=!0}catch(A){T=A}this.assert(!b,"expected #{this} to fail to parse input but got #{act}","expected #{this} to not fail to parse input but #{act} was thrown",null,T),!b&&l!==void 0&&Object.keys(l).forEach(A=>{new n(T).to.have.property(A).that.is.deep.equal(l[A])})})}beforeEach(()=>{po.use(o)}),t(r=>{describe("initializer",()=>{it("executes the code before parsing starts",()=>{let s=S.generate(["{ var result = 42; }","start = 'a' { return result; }"].join(`
`),r);u(s).to.parse("a",42)}),describe("available variables and functions",()=>{it("|options| contains options",()=>{let s=S.generate(["{ var result = options; }","start = 'a' { return result; }"].join(`
`),r);u(s).to.parse("a",{a:42},{a:42})})})}),describe("rule",()=>{r.cache?it("caches rule match results",()=>{let s=S.generate(["{ var n = 0; }","start = (a 'b') / (a 'c') { return n; }","a = 'a' { n++; }"].join(`
`),r);u(s).to.parse("ac",1)}):it("doesn't cache rule match results",()=>{let s=S.generate(["{ var n = 0; }","start = (a 'b') / (a 'c') { return n; }","a = 'a' { n++; }"].join(`
`),r);u(s).to.parse("ac",2)}),describe("when the expression matches",()=>{describe("without display name",()=>{describe("returns its match result",()=>{it("when expression may match",()=>{let s=S.generate("start = 'a'",r);u(s).to.parse("a","a")}),it("when expression always match",()=>{let s=S.generate("start = 'a'*",r);u(s).to.parse("",[])})})}),describe("with display name",()=>{describe("returns its match result",()=>{it("when expression may match",()=>{let s=S.generate("start 'start' = 'a'",r);u(s).to.parse("a","a")}),it("when expression always match",()=>{let s=S.generate("start 'start' = 'a'*",r);u(s).to.parse("",[])})})})}),describe("when the expression doesn't match",()=>{describe("without display name",()=>{describe("reports match failure and records an expectation",()=>{it("when expression may match",()=>{let s=S.generate("start = 'a'",r);u(s).to.failToParse("b",{expected:[{type:"literal",text:"a",ignoreCase:!1}]})}),it("when expression never match",()=>{let s=S.generate("start = []",r);u(s).to.failToParse("b",{expected:[{type:"class",parts:[],inverted:!1,ignoreCase:!1,unicode:!1}]})})})}),describe("with display name",()=>{it('reports match failure and records an expectation of type "other" when expression may match',()=>{let s=S.generate("start 'start' = 'a'",r);u(s).to.failToParse("b",{expected:[{type:"other",description:"start"}]})}),it('reports match failure and records an expectation of type "other" when expression never match',()=>{let s=S.generate("start 'start' = []",r);u(s).to.failToParse("b",{expected:[{type:"other",description:"start"}]})}),it("discards any expectations recorded when matching the expression",()=>{let s=S.generate("start 'start' = 'a'",r);u(s).to.failToParse("b",{expected:[{type:"other",description:"start"}]})})})})}),describe("literal",()=>{describe("matching",()=>{it("matches empty literals",()=>{let s=S.generate("start = ''",r);u(s).to.parse("")}),it("matches one-character literals",()=>{let s=S.generate("start = 'a'",r);u(s).to.parse("a"),u(s).to.failToParse("b")}),it("matches multi-character literals",()=>{let s=S.generate("start = 'abcd'",r);u(s).to.parse("abcd"),u(s).to.failToParse("efgh")}),it('is case sensitive without the "i" flag',()=>{let s=S.generate("start = 'a'",r);u(s).to.parse("a"),u(s).to.failToParse("A")}),it('is case insensitive with the "i" flag',()=>{let s=S.generate("start = 'a'i",r);u(s).to.parse("a"),u(s).to.parse("A")})}),describe("when it matches",()=>{it("returns the matched text",()=>{let s=S.generate("start = 'a'",r);u(s).to.parse("a","a")}),it("consumes the matched text",()=>{let s=S.generate("start = 'a' .",r);u(s).to.parse("ab")})}),describe("when it doesn't match",()=>{it('reports match failure and records an expectation of type "literal"',()=>{let s=S.generate("start = 'a'",r);u(s).to.failToParse("b",{expected:[{type:"literal",text:"a",ignoreCase:!1}]})})})}),describe("character class",()=>{describe("matching",()=>{it("matches empty classes",()=>{let s=S.generate("start = []",r);u(s).to.failToParse("a")}),it("matches classes with a character list",()=>{let s=S.generate("start = [abc]",r);u(s).to.parse("a"),u(s).to.parse("b"),u(s).to.parse("c"),u(s).to.failToParse("d")}),it("matches classes with a character range",()=>{let s=S.generate("start = [a-c]",r);u(s).to.parse("a"),u(s).to.parse("b"),u(s).to.parse("c"),u(s).to.failToParse("d")}),it("matches inverted classes",()=>{let s=S.generate("start = [^a]",r);u(s).to.failToParse("a"),u(s).to.parse("b")}),it('is case sensitive without the "i" flag',()=>{let s=S.generate("start = [a]",r);u(s).to.parse("a"),u(s).to.failToParse("A")}),it('is case insensitive with the "i" flag',()=>{let s=S.generate("start = [a]i",r);u(s).to.parse("a"),u(s).to.parse("A")}),it("matches unicode classes",()=>{let s=S.generate("start = [\\u{1F4A9}]",r);u(s).to.parse("\u{1F4A9}")}),it("matches unicode class range",()=>{let s=S.generate("start = [\\ue000-\\u{10ffff}]",r);u(s).to.parse("\u{1F4A9}")}),it("matches explicit unicode classes",()=>{let s=S.generate("start = [^a]u",r);u(s).to.parse("\u{1F4A9}"),u(s).to.parse("A"),u(s).to.failToParse("a")}),it("matches explicit unicode classes, case-insensitive",()=>{let s=S.generate("start = [^a]ui",r);u(s).to.parse("\u{1F4A9}"),u(s).to.failToParse("A"),u(s).to.failToParse("a")}),it("matches not-nothing class",()=>{let s=S.generate("start = [^]+",r);u(s).to.parse("A"),u(s).to.parse("\u{1F4A9}"),u(s).to.failToParse("")}),it("matches not-nothing unicode class",()=>{let s=S.generate("start = [^]u",r);u(s).to.parse("A"),u(s).to.parse("\u{1F4A9}"),u(s).to.failToParse("")})}),describe("when it matches",()=>{it("returns the matched character",()=>{let s=S.generate("start = [a]",r);u(s).to.parse("a","a")}),it("consumes the matched character",()=>{let s=S.generate("start = [a] .",r);u(s).to.parse("ab")})}),describe("when it doesn't match",()=>{it('reports match failure and records an expectation of type "class"',()=>{let s=S.generate("start = [a]",r);u(s).to.failToParse("b",{expected:[{type:"class",parts:["a"],inverted:!1,ignoreCase:!1,unicode:!1}]})})})}),describe("dot",()=>{describe("matching",()=>{it("matches any character",()=>{let s=S.generate("start = .",r);u(s).to.parse("a"),u(s).to.parse("b"),u(s).to.parse("c")})}),describe("when it matches",()=>{it("returns the matched character",()=>{let s=S.generate("start = .",r);u(s).to.parse("a","a")}),it("consumes the matched character",()=>{let s=S.generate("start = . .",r);u(s).to.parse("ab")})}),describe("when it doesn't match",()=>{it('reports match failure and records an expectation of type "any"',()=>{let s=S.generate("start = .",r);u(s).to.failToParse("",{expected:[{type:"any"}]})})})}),describe("rule reference",()=>{describe("when referenced rule's expression matches",()=>{it("returns its result",()=>{let s=S.generate(["start = a","a = 'a'"].join(`
`),r);u(s).to.parse("a","a")})}),describe("when referenced rule's expression doesn't match",()=>{it("reports match failure",()=>{let s=S.generate(["start = a","a = 'a'"].join(`
`),r);u(s).to.failToParse("b")})})}),describe("positive semantic predicate",()=>{describe("when the code returns a truthy value",()=>{it("returns |undefined|",()=>{let s=S.generate("start = &{ return true; } ''",r);u(s).to.parse("",[void 0,""])})}),describe("when the code returns a falsey value",()=>{it("reports match failure",()=>{let s=S.generate("start = &{ return false; }",r);u(s).to.failToParse("")})}),describe("label variables",()=>{describe("in containing sequence",()=>{it("can access variables defined by preceding labeled elements",()=>{let s=S.generate("start = a:'a' &{ return a === 'a'; }",r);u(s).to.parse("a")}),it("cannot access variable defined by labeled predicate element",()=>{let s=S.generate("start = 'a' b:&{ return b === undefined; } 'c'",r);u(s).to.failToParse("ac")}),it("cannot access variables defined by following labeled elements",()=>{let s=S.generate("start = &{ return a === 'a'; } a:'a'",r);u(s).to.failToParse("a")}),it("cannot access variables defined by subexpressions",()=>{[{grammar:"start = (a:'a') &{ return a === 'a'; }",input:"a"},{grammar:"start = (a:'a')? &{ return a === 'a'; }",input:"a"},{grammar:"start = (a:'a')* &{ return a === 'a'; }",input:"a"},{grammar:"start = (a:'a')+ &{ return a === 'a'; }",input:"a"},{grammar:"start = (a:'a')| .. | &{ return a === 'a'; }",input:"a"},{grammar:"start = (a:'a')|0.. | &{ return a === 'a'; }",input:"a"},{grammar:"start = (a:'a')|1.. | &{ return a === 'a'; }",input:"a"},{grammar:"start = (a:'a')|2.. | &{ return a === 'a'; }",input:"aa"},{grammar:"start = (a:'a')| ..1| &{ return a === 'a'; }",input:"a"},{grammar:"start = (a:'a')| ..3| &{ return a === 'a'; }",input:"a"},{grammar:"start = (a:'a')|2..3| &{ return a === 'a'; }",input:"aa"},{grammar:"start = (a:'a')|3| &{ return a === 'a'; }",input:"aaa"},{grammar:"start = $(a:'a') &{ return a === 'a'; }",input:"a"},{grammar:"start = &(a:'a') 'a' &{ return a === 'a'; }",input:"a"},{grammar:"start = !(a:'a') 'b' &{ return a === 'a'; }",input:"b"},{grammar:"start = b:(a:'a') &{ return a === 'a'; }",input:"a"},{grammar:"start = ('a' b:'b' 'c') &{ return b === 'b'; }",input:"abc"},{grammar:"start = (a:'a' { return a; }) &{ return a === 'a'; }",input:"a"},{grammar:"start = ('a' / b:'b' / 'c') &{ return b === 'b'; }",input:"b"}].forEach(n=>{let c=S.generate(n.grammar,r);u(c).to.failToParse(n.input)})})}),describe("in outer sequence",()=>{it("can access variables defined by preceding labeled elements",()=>{let s=S.generate("start = a:'a' ('b' &{ return a === 'a'; })",r);u(s).to.parse("ab")}),it("cannot access variable defined by labeled predicate element",()=>{let s=S.generate("start = 'a' b:('b' &{ return b === undefined; }) 'c'",r);u(s).to.failToParse("abc")}),it("cannot access variables defined by following labeled elements",()=>{let s=S.generate("start = ('a' &{ return b === 'b'; }) b:'b'",r);u(s).to.failToParse("ab")})})}),describe("initializer variables & functions",()=>{it("can access variables defined in the initializer",()=>{let s=S.generate(["{ var v = 42 }","start = &{ return v === 42; }"].join(`
`),r);u(s).to.parse("")}),it("can access functions defined in the initializer",()=>{let s=S.generate(["{ function f() { return 42; } }","start = &{ return f() === 42; }"].join(`
`),r);u(s).to.parse("")})}),describe("available variables & functions",()=>{it("|options| contains options",()=>{let s=S.generate(["{ var result; }","start = &{ result = options; return true; } { return result; }"].join(`
`),r);u(s).to.parse("",{a:42},{a:42})}),it("|location| returns current location info",()=>{let s=S.generate(["{ var result; }","start = line (nl+ line)* { return result; }","line = thing (' '+ thing)*","thing = digit / mark","digit = [0-9]","mark = &{ result = location(); return true; } 'x'","nl = '\\r'? '\\n'"].join(`
`),r);u(s).to.parse(`1
2

3


4 5 x`,{source:void 0,start:{offset:13,line:7,column:5},end:{offset:13,line:7,column:5}}),u(s).to.parse(`1
x`,{source:void 0,start:{offset:2,line:2,column:1},end:{offset:2,line:2,column:1}}),u(s).to.parse(`1\r
x`,{source:void 0,start:{offset:3,line:2,column:1},end:{offset:3,line:2,column:1}})}),it("|offset| returns current start offset",()=>{let s=S.generate(["start = [0-9]+ @mark","mark = 'xx' { return offset(); }"].join(`
`),r);u(s).to.parse("0123456xx",7)}),it("|range| returns current range",()=>{let s=S.generate(["start = [0-9]+ @mark","mark = 'xx' { return range(); }"].join(`
`),r);u(s).to.parse("0123456xx",{source:void 0,start:7,end:9})})})}),describe("negative semantic predicate",()=>{describe("when the code returns a falsey value",()=>{it("returns |undefined|",()=>{let s=S.generate("start = !{ return false; } ''",r);u(s).to.parse("",[void 0,""])})}),describe("when the code returns a truthy value",()=>{it("reports match failure",()=>{let s=S.generate("start = !{ return true; }",r);u(s).to.failToParse("")})}),describe("label variables",()=>{describe("in containing sequence",()=>{it("can access variables defined by preceding labeled elements",()=>{let s=S.generate("start = a:'a' !{ return a !== 'a'; }",r);u(s).to.parse("a")}),it("cannot access variable defined by labeled predicate element",()=>{let s=S.generate("start = 'a' b:!{ return b !== undefined; } 'c'",r);u(s).to.failToParse("ac")}),it("cannot access variables defined by following labeled elements",()=>{let s=S.generate("start = !{ return a !== 'a'; } a:'a'",r);u(s).to.failToParse("a")}),it("cannot access variables defined by subexpressions",()=>{[{grammar:"start = (a:'a') !{ return a !== 'a'; }",input:"a"},{grammar:"start = (a:'a')? !{ return a !== 'a'; }",input:"a"},{grammar:"start = (a:'a')* !{ return a !== 'a'; }",input:"a"},{grammar:"start = (a:'a')+ !{ return a !== 'a'; }",input:"a"},{grammar:"start = (a:'a')| .. | !{ return a !== 'a'; }",input:"a"},{grammar:"start = (a:'a')|0.. | !{ return a !== 'a'; }",input:"a"},{grammar:"start = (a:'a')|1.. | !{ return a !== 'a'; }",input:"a"},{grammar:"start = (a:'a')|2.. | !{ return a !== 'a'; }",input:"aa"},{grammar:"start = (a:'a')| ..1| !{ return a !== 'a'; }",input:"a"},{grammar:"start = (a:'a')| ..3| !{ return a !== 'a'; }",input:"a"},{grammar:"start = (a:'a')|2..3| !{ return a !== 'a'; }",input:"aa"},{grammar:"start = (a:'a')|3| !{ return a !== 'a'; }",input:"aaa"},{grammar:"start = $(a:'a') !{ return a !== 'a'; }",input:"a"},{grammar:"start = &(a:'a') 'a' !{ return a !== 'a'; }",input:"a"},{grammar:"start = !(a:'a') 'b' !{ return a !== 'a'; }",input:"b"},{grammar:"start = b:(a:'a') !{ return a !== 'a'; }",input:"a"},{grammar:"start = ('a' b:'b' 'c') !{ return b !== 'b'; }",input:"abc"},{grammar:"start = (a:'a' { return a; }) !{ return a !== 'a'; }",input:"a"},{grammar:"start = ('a' / b:'b' / 'c') !{ return b !== 'b'; }",input:"b"}].forEach(n=>{let c=S.generate(n.grammar,r);u(c).to.failToParse(n.input)})})}),describe("in outer sequence",()=>{it("can access variables defined by preceding labeled elements",()=>{let s=S.generate("start = a:'a' ('b' !{ return a !== 'a'; })",r);u(s).to.parse("ab")}),it("cannot access variable defined by labeled predicate element",()=>{let s=S.generate("start = 'a' b:('b' !{ return b !== undefined; }) 'c'",r);u(s).to.failToParse("abc")}),it("cannot access variables defined by following labeled elements",()=>{let s=S.generate("start = ('a' !{ return b !== 'b'; }) b:'b'",r);u(s).to.failToParse("ab")})})}),describe("initializer variables & functions",()=>{it("can access variables defined in the initializer",()=>{let s=S.generate(["{ var v = 42 }","start = !{ return v !== 42; }"].join(`
`),r);u(s).to.parse("")}),it("can access functions defined in the initializer",()=>{let s=S.generate(["{ function f() { return 42; } }","start = !{ return f() !== 42; }"].join(`
`),r);u(s).to.parse("")})}),describe("available variables & functions",()=>{it("|options| contains options",()=>{let s=S.generate(["{ var result; }","start = !{ result = options; return false; } { return result; }"].join(`
`),r);u(s).to.parse("",{a:42},{a:42})}),it("|location| returns current location info",()=>{let s=S.generate(["{ var result; }","start = line (nl+ line)* { return result; }","line = thing (' '+ thing)*","thing = digit / mark","digit = [0-9]","mark = !{ result = location(); return false; } 'x'","nl = '\\r'? '\\n'"].join(`
`),r);u(s).to.parse(`1
2

3


4 5 x`,{source:void 0,start:{offset:13,line:7,column:5},end:{offset:13,line:7,column:5}}),u(s).to.parse(`1
x`,{source:void 0,start:{offset:2,line:2,column:1},end:{offset:2,line:2,column:1}}),u(s).to.parse(`1\r
x`,{source:void 0,start:{offset:3,line:2,column:1},end:{offset:3,line:2,column:1}})})})}),describe("group",()=>{describe("when the expression matches",()=>{it("returns its match result",()=>{let s=S.generate("start = ('a')",r);u(s).to.parse("a","a")})}),describe("when the expression doesn't match",()=>{it("reports match failure",()=>{let s=S.generate("start = ('a')",r);u(s).to.failToParse("b")})})}),describe("optional",()=>{describe("when the expression matches",()=>{it("returns its match result",()=>{let s=S.generate("start = 'a'?",r);u(s).to.parse("a","a")})}),describe("when the expression doesn't match",()=>{it("returns |null|",()=>{let s=S.generate("start = 'a'?",r);u(s).to.parse("",null)})})}),describe("zero or more",()=>{describe("when the expression matches zero or more times",()=>{it("returns an array of its match results",()=>{let s=S.generate("start = 'a'*",r);u(s).to.parse("",[]),u(s).to.parse("a",["a"]),u(s).to.parse("aaa",["a","a","a"])})})}),describe("one or more",()=>{describe("when the expression matches one or more times",()=>{it("returns an array of its match results",()=>{let s=S.generate("start = 'a'+",r);u(s).to.parse("a",["a"]),u(s).to.parse("aaa",["a","a","a"])})}),describe("when the expression doesn't match",()=>{it("reports match failure",()=>{let s=S.generate("start = 'a'+",r);u(s).to.failToParse("")})})}),describe("repeated",()=>{function s(n){let c=[];for(let h=1;h<=4;++h)for(let b=1;b<=4;++b)c[c.length]="start"+String(h)+b;let l=a(r);return l.allowedStartRules=c,S.generate(["start11 =         val:n1      x|"+n+"|      $.*","start12 =         val:n1 data:x|"+n+"|      $.*","start13 =         val:n1      x|"+n+"| rest:$.*","start14 =         val:n1 data:x|"+n+"| rest:$.*","start21 = .       val:n1      x|"+n+"|      $.*","start22 = .       val:n1 data:x|"+n+"|      $.*","start23 = .       val:n1      x|"+n+"| rest:$.*","start24 = .       val:n1 data:x|"+n+"| rest:$.*","start31 = a:.     val:n1      x|"+n+"|      $.*","start32 = a:.     val:n1 data:x|"+n+"|      $.*","start33 = a:.     val:n1      x|"+n+"| rest:$.*","start34 = a:.     val:n1 data:x|"+n+"| rest:$.*","start41 = a:. b:. val:n1      x|"+n+"|      $.*","start42 = a:. b:. val:n1 data:x|"+n+"|      $.*","start43 = a:. b:. val:n1      x|"+n+"| rest:$.*","start44 = a:. b:. val:n1 data:x|"+n+"| rest:$.*","n1 = n:$[0-9] { return parseInt(n, 10); }","x = '='"].join(`;
`),l)}describe("without delimiter",()=>{describe("with constant boundaries",()=>{it("| .. | matches correctly",()=>{let n=S.generate("start = 'a'|..|",r);u(n).to.parse("",[]),u(n).to.parse("a",["a"]),u(n).to.parse("aa",["a","a"]),u(n).to.parse("aaa",["a","a","a"])}),it("|0.. | matches correctly",()=>{let n=S.generate("start = 'a'|0..|",r);u(n).to.parse("",[]),u(n).to.parse("a",["a"]),u(n).to.parse("aa",["a","a"]),u(n).to.parse("aaa",["a","a","a"])}),it("|1.. | matches correctly",()=>{let n=S.generate("start = 'a'|1..|",r);u(n).to.failToParse(""),u(n).to.parse("a",["a"]),u(n).to.parse("aa",["a","a"]),u(n).to.parse("aaa",["a","a","a"])}),it("|2.. | matches correctly",()=>{let n=S.generate("start = 'a'|2..|",r);u(n).to.failToParse(""),u(n).to.failToParse("a"),u(n).to.parse("aa",["a","a"]),u(n).to.parse("aaa",["a","a","a"])}),it("| ..1| matches correctly",()=>{let n=S.generate("start = 'a'|..1|",r);u(n).to.parse("",[]),u(n).to.parse("a",["a"]),u(n).to.failToParse("aa"),u(n).to.failToParse("aaa")}),it("| ..2| matches correctly",()=>{let n=S.generate("start = 'a'|..2|",r);u(n).to.parse("",[]),u(n).to.parse("a",["a"]),u(n).to.parse("aa",["a","a"]),u(n).to.failToParse("aaa")}),it("|2..3| matches correctly",()=>{let n=S.generate("start = 'a'|2..3|",r);u(n).to.failToParse(""),u(n).to.failToParse("a"),u(n).to.parse("aa",["a","a"]),u(n).to.parse("aaa",["a","a","a"]),u(n).to.failToParse("aaaa")}),it("|2..2| matches correctly",()=>{let n=S.generate("start = 'a'|2..2|",r);u(n).to.failToParse(""),u(n).to.failToParse("a"),u(n).to.parse("aa",["a","a"]),u(n).to.failToParse("aaa")}),it("| 2  | matches correctly",()=>{let n=S.generate("start = 'a'|2|",r);u(n).to.failToParse(""),u(n).to.failToParse("a"),u(n).to.parse("aa",["a","a"]),u(n).to.failToParse("aaa")}),it("|3..2| matches correctly",()=>{let n=S.generate("start = 'a'|3..2|",r);u(n).to.failToParse(""),u(n).to.failToParse("a"),u(n).to.failToParse("aa"),u(n).to.failToParse("aaa")}),it("does not consume input on failure",()=>{let n=S.generate("start = 'a'|3| / 'a'|2| { return 42; }",r);u(n).to.parse("aa",42)}),it("correctly pass external references to labels to repeated expression",()=>{let n=S.generate("start = ref:'a' ('b' &{ return ref === 'a'; })|..|",r);u(n).to.parse("abb",["a",[["b",void 0],["b",void 0]]]),n=S.generate("start = ref:'a' ('b' &{ return ref === 'a'; })|2..|",r),u(n).to.parse("abb",["a",[["b",void 0],["b",void 0]]]),n=S.generate("start = ref:'a' ('b' &{ return ref === 'a'; })|..3|",r),u(n).to.parse("abb",["a",[["b",void 0],["b",void 0]]]),n=S.generate("start = ref:'a' ('b' &{ return ref === 'a'; })|2..3|",r),u(n).to.parse("abb",["a",[["b",void 0],["b",void 0]]]),n=S.generate("start = ref:'a' ('b' &{ return ref === 'a'; })|2|",r),u(n).to.parse("abb",["a",[["b",void 0],["b",void 0]]])})}),describe("with variable boundaries",()=>{it("|min..   | matches correctly",()=>{let n=s("val..");for(let c=1;c<=4;++c){let l={startRule:"start1"+c};u(n).to.failToParse("",void 0,l),u(n).to.parse("0",[0,[],""],l),u(n).to.parse("0==",[0,["=","="],""],l),u(n).to.failToParse("1",void 0,l),u(n).to.failToParse("2=",void 0,l),u(n).to.parse("2==",[2,["=","="],""],l),u(n).to.parse("2=====",[2,["=","=","=","=","="],""],l)}for(let c=1;c<=4;++c){let l={startRule:"start2"+c};u(n).to.failToParse("-",void 0,l),u(n).to.parse("-0",["-",0,[],""],l),u(n).to.parse("-0==",["-",0,["=","="],""],l),u(n).to.failToParse("-1",void 0,l),u(n).to.failToParse("-2=",void 0,l),u(n).to.parse("-2==",["-",2,["=","="],""],l),u(n).to.parse("-2=====",["-",2,["=","=","=","=","="],""],l)}for(let c=1;c<=4;++c){let l={startRule:"start3"+c};u(n).to.failToParse("-",void 0,l),u(n).to.parse("-0",["-",0,[],""],l),u(n).to.parse("-0==",["-",0,["=","="],""],l),u(n).to.failToParse("-1",void 0,l),u(n).to.failToParse("-2=",void 0,l),u(n).to.parse("-2==",["-",2,["=","="],""],l),u(n).to.parse("-2=====",["-",2,["=","=","=","=","="],""],l)}for(let c=1;c<=4;++c){let l={startRule:"start4"+c};u(n).to.failToParse("--",void 0,l),u(n).to.parse("--0",["-","-",0,[],""],l),u(n).to.parse("--0==",["-","-",0,["=","="],""],l),u(n).to.failToParse("--1",void 0,l),u(n).to.failToParse("--2=",void 0,l),u(n).to.parse("--2==",["-","-",2,["=","="],""],l),u(n).to.parse("--2=====",["-","-",2,["=","=","=","=","="],""],l)}}),it("|   ..max| matches correctly",()=>{let n=s("..val");for(let c=1;c<=4;++c){let l={startRule:"start1"+c};u(n).to.failToParse("",void 0,l),u(n).to.parse("0",[0,[],""],l),u(n).to.parse("0==",[0,[],"=="],l),u(n).to.parse("3",[3,[],""],l),u(n).to.parse("3=",[3,["="],""],l),u(n).to.parse("3===",[3,["=","=","="],""],l),u(n).to.parse("3=====",[3,["=","=","="],"=="],l)}for(let c=1;c<=4;++c){let l={startRule:"start2"+c};u(n).to.failToParse("-",void 0,l),u(n).to.parse("-0",["-",0,[],""],l),u(n).to.parse("-0==",["-",0,[],"=="],l),u(n).to.parse("-3",["-",3,[],""],l),u(n).to.parse("-3=",["-",3,["="],""],l),u(n).to.parse("-3===",["-",3,["=","=","="],""],l),u(n).to.parse("-3=====",["-",3,["=","=","="],"=="],l)}for(let c=1;c<=4;++c){let l={startRule:"start3"+c};u(n).to.failToParse("-",void 0,l),u(n).to.parse("-0",["-",0,[],""],l),u(n).to.parse("-0==",["-",0,[],"=="],l),u(n).to.parse("-3",["-",3,[],""],l),u(n).to.parse("-3=",["-",3,["="],""],l),u(n).to.parse("-3===",["-",3,["=","=","="],""],l),u(n).to.parse("-3=====",["-",3,["=","=","="],"=="],l)}for(let c=1;c<=4;++c){let l={startRule:"start4"+c};u(n).to.failToParse("--",void 0,l),u(n).to.parse("--0",["-","-",0,[],""],l),u(n).to.parse("--0==",["-","-",0,[],"=="],l),u(n).to.parse("--3",["-","-",3,[],""],l),u(n).to.parse("--3=",["-","-",3,["="],""],l),u(n).to.parse("--3===",["-","-",3,["=","=","="],""],l),u(n).to.parse("--3=====",["-","-",3,["=","=","="],"=="],l)}}),it("|min..max| matches correctly",()=>{function n(){let l=[];for(let b=1;b<=4;++b)for(let T=1;T<=4;++T)l[l.length]="start"+String(b)+T;let h=a(r);return h.allowedStartRules=l,S.generate(["start11 =         min:n1 max:n1      .|min..max|      $.*","start12 =         min:n1 max:n1 data:.|min..max|      $.*","start13 =         min:n1 max:n1      .|min..max| rest:$.*","start14 =         min:n1 max:n1 data:.|min..max| rest:$.*","start21 = .       min:n1 max:n1      .|min..max|      $.*","start22 = .       min:n1 max:n1 data:.|min..max|      $.*","start23 = .       min:n1 max:n1      .|min..max| rest:$.*","start24 = .       min:n1 max:n1 data:.|min..max| rest:$.*","start31 = a:.     min:n1 max:n1      .|min..max|      $.*","start32 = a:.     min:n1 max:n1 data:.|min..max|      $.*","start33 = a:.     min:n1 max:n1      .|min..max| rest:$.*","start34 = a:.     min:n1 max:n1 data:.|min..max| rest:$.*","start41 = a:. b:. min:n1 max:n1      .|min..max|      $.*","start42 = a:. b:. min:n1 max:n1 data:.|min..max|      $.*","start43 = a:. b:. min:n1 max:n1      .|min..max| rest:$.*","start44 = a:. b:. min:n1 max:n1 data:.|min..max| rest:$.*","n1 = n:$[0-9] { return parseInt(n, 10); }"].join(`;
`),h)}let c=n();for(let l=1;l<=4;++l){let h={startRule:"start1"+l};u(c).to.failToParse("",void 0,h),u(c).to.parse("00",[0,0,[],""],h),u(c).to.parse("00==",[0,0,[],"=="],h),u(c).to.failToParse("23",void 0,h),u(c).to.failToParse("23=",void 0,h),u(c).to.parse("23==",[2,3,["=","="],""],h),u(c).to.parse("23===",[2,3,["=","=","="],""],h),u(c).to.parse("23=====",[2,3,["=","=","="],"=="],h)}for(let l=1;l<=4;++l){let h={startRule:"start2"+l};u(c).to.failToParse("-",void 0,h),u(c).to.parse("-00",["-",0,0,[],""],h),u(c).to.parse("-00==",["-",0,0,[],"=="],h),u(c).to.failToParse("-23",void 0,h),u(c).to.failToParse("-23=",void 0,h),u(c).to.parse("-23==",["-",2,3,["=","="],""],h),u(c).to.parse("-23===",["-",2,3,["=","=","="],""],h),u(c).to.parse("-23=====",["-",2,3,["=","=","="],"=="],h)}for(let l=1;l<=4;++l){let h={startRule:"start3"+l};u(c).to.failToParse("-",void 0,h),u(c).to.parse("-00",["-",0,0,[],""],h),u(c).to.parse("-00==",["-",0,0,[],"=="],h),u(c).to.failToParse("-23",void 0,h),u(c).to.failToParse("-23=",void 0,h),u(c).to.parse("-23==",["-",2,3,["=","="],""],h),u(c).to.parse("-23===",["-",2,3,["=","=","="],""],h),u(c).to.parse("-23=====",["-",2,3,["=","=","="],"=="],h)}for(let l=1;l<=4;++l){let h={startRule:"start4"+l};u(c).to.failToParse("--",void 0,h),u(c).to.parse("--00",["-","-",0,0,[],""],h),u(c).to.parse("--00==",["-","-",0,0,[],"=="],h),u(c).to.failToParse("--23",void 0,h),u(c).to.failToParse("--23=",void 0,h),u(c).to.parse("--23==",["-","-",2,3,["=","="],""],h),u(c).to.parse("--23===",["-","-",2,3,["=","=","="],""],h),u(c).to.parse("--23=====",["-","-",2,3,["=","=","="],"=="],h)}}),it("|val..val| matches correctly",()=>{let n=s("val");for(let c=1;c<=4;++c){let l={startRule:"start1"+c};u(n).to.failToParse("",void 0,l),u(n).to.parse("0",[0,[],""],l),u(n).to.parse("0==",[0,[],"=="],l),u(n).to.failToParse("3",void 0,l),u(n).to.failToParse("3=",void 0,l),u(n).to.parse("3===",[3,["=","=","="],""],l),u(n).to.parse("3=====",[3,["=","=","="],"=="],l)}for(let c=1;c<=4;++c){let l={startRule:"start2"+c};u(n).to.failToParse("-",void 0,l),u(n).to.parse("-0",["-",0,[],""],l),u(n).to.parse("-0==",["-",0,[],"=="],l),u(n).to.failToParse("-3",void 0,l),u(n).to.failToParse("-3=",void 0,l),u(n).to.parse("-3===",["-",3,["=","=","="],""],l),u(n).to.parse("-3=====",["-",3,["=","=","="],"=="],l)}for(let c=1;c<=4;++c){let l={startRule:"start3"+c};u(n).to.failToParse("-",void 0,l),u(n).to.parse("-0",["-",0,[],""],l),u(n).to.parse("-0==",["-",0,[],"=="],l),u(n).to.failToParse("-3",void 0,l),u(n).to.failToParse("-3=",void 0,l),u(n).to.parse("-3===",["-",3,["=","=","="],""],l),u(n).to.parse("-3=====",["-",3,["=","=","="],"=="],l)}for(let c=1;c<=4;++c){let l={startRule:"start4"+c};u(n).to.failToParse("--",void 0,l),u(n).to.parse("--0",["-","-",0,[],""],l),u(n).to.parse("--0==",["-","-",0,[],"=="],l),u(n).to.failToParse("--3",void 0,l),u(n).to.failToParse("--3=",void 0,l),u(n).to.parse("--3===",["-","-",3,["=","=","="],""],l),u(n).to.parse("--3=====",["-","-",3,["=","=","="],"=="],l)}}),it("| exact  | matches correctly",()=>{let n=s("val");for(let c=1;c<=4;++c){let l={startRule:"start1"+c};u(n).to.failToParse("",void 0,l),u(n).to.parse("0",[0,[],""],l),u(n).to.parse("0==",[0,[],"=="],l),u(n).to.failToParse("3",void 0,l),u(n).to.failToParse("3=",void 0,l),u(n).to.parse("3===",[3,["=","=","="],""],l),u(n).to.parse("3=====",[3,["=","=","="],"=="],l)}for(let c=1;c<=4;++c){let l={startRule:"start2"+c};u(n).to.failToParse("-",void 0,l),u(n).to.parse("-0",["-",0,[],""],l),u(n).to.parse("-0==",["-",0,[],"=="],l),u(n).to.failToParse("-3",void 0,l),u(n).to.failToParse("-3=",void 0,l),u(n).to.parse("-3===",["-",3,["=","=","="],""],l),u(n).to.parse("-3=====",["-",3,["=","=","="],"=="],l)}for(let c=1;c<=4;++c){let l={startRule:"start3"+c};u(n).to.failToParse("-",void 0,l),u(n).to.parse("-0",["-",0,[],""],l),u(n).to.parse("-0==",["-",0,[],"=="],l),u(n).to.failToParse("-3",void 0,l),u(n).to.failToParse("-3=",void 0,l),u(n).to.parse("-3===",["-",3,["=","=","="],""],l),u(n).to.parse("-3=====",["-",3,["=","=","="],"=="],l)}for(let c=1;c<=4;++c){let l={startRule:"start4"+c};u(n).to.failToParse("--",void 0,l),u(n).to.parse("--0",["-","-",0,[],""],l),u(n).to.parse("--0==",["-","-",0,[],"=="],l),u(n).to.failToParse("--3",void 0,l),u(n).to.failToParse("--3=",void 0,l),u(n).to.parse("--3===",["-","-",3,["=","=","="],""],l),u(n).to.parse("--3=====",["-","-",3,["=","=","="],"=="],l)}})}),describe("with function boundaries",()=>{it("|{min}..     | matches correctly",()=>{let n=S.generate("start = 'a'|{ return 2; }..|",r);u(n).to.failToParse(""),u(n).to.failToParse("a"),u(n).to.parse("aa",["a","a"]),u(n).to.parse("aaa",["a","a","a"])}),it("|     ..{max}| matches correctly",()=>{let n=S.generate("start = 'a'|..{ return 2; }|",r);u(n).to.parse("",[]),u(n).to.parse("a",["a"]),u(n).to.parse("aa",["a","a"]),u(n).to.failToParse("aaa")}),it("|{min}..{max}| matches correctly",()=>{let n=S.generate("start = 'a'|{ return 2; }..{ return 3; }|",r);u(n).to.failToParse(""),u(n).to.failToParse("a"),u(n).to.parse("aa",["a","a"]),u(n).to.parse("aaa",["a","a","a"]),u(n).to.failToParse("aaaa")}),it("|{val}..{val}| matches correctly",()=>{let n=S.generate("start = 'a'|{ return 2; }..{ return 2; }|",r);u(n).to.failToParse(""),u(n).to.failToParse("a"),u(n).to.parse("aa",["a","a"]),u(n).to.failToParse("aaa")}),it("|  {exact}   | matches correctly",()=>{let n=S.generate("start = 'a'|{ return 2; }|",r);u(n).to.failToParse(""),u(n).to.failToParse("a"),u(n).to.parse("aa",["a","a"]),u(n).to.failToParse("aaa")}),describe("function called only once",()=>{it("in |{min}..     |",()=>{let n=S.generate(`
                { let min = 0; }
                start = 'a'|{ ++min; return 2; }..| { return min; }
              `,r);u(n).to.parse("aa",1),u(n).to.parse("aaa",1)}),it("in |     ..{max}|",()=>{let n=S.generate(`
                { let max = 0; }
                start = 'a'|..{ ++max; return 3; }| { return max; }
              `,r);u(n).to.parse("aa",1),u(n).to.parse("aaa",1)}),it("in |{min}..{max}|",()=>{let n=S.generate(`
                {
                  let min = 0;
                  let max = 0;
                }
                start = 'a'|
                  { ++min; return 0; }
                  ..
                  { ++max; return 3; }
                | { return [min, max]; }
              `,r);u(n).to.parse("",[1,1]),u(n).to.parse("a",[1,1]),u(n).to.parse("aa",[1,1]),u(n).to.parse("aaa",[1,1])}),it("in |  {exact}   |",()=>{let n=S.generate(`
                { let count = 0; }
                start = 'a'|{ ++count; return options.exact; }| { return count; }
              `,r);u(n).to.parse("",1,{exact:0}),u(n).to.parse("aa",1,{exact:2})})}),it("correctly pass external references to labels to boundary expression",()=>{let n=S.generate("start = ref:'a' 'b'|{ return ref === 'a' ? 2 : 0; }..|",r);u(n).to.parse("abb",["a",["b","b"]]),n=S.generate("start = ref:'a' 'b'|..{ return ref === 'a' ? 3 : 0; }|",r),u(n).to.parse("abb",["a",["b","b"]]),n=S.generate("start = ref:'a' 'b'|{ return ref === 'a' ? 2 : 0; }..{ return ref === 'a' ? 3 : 0; }|",r),u(n).to.parse("abb",["a",["b","b"]]),n=S.generate("start = ref:'a' 'b'|{ return ref === 'a' ? 2 : 0; }|",r),u(n).to.parse("abb",["a",["b","b"]])})}),it("with functions returning non-integers",()=>{let n=S.generate("start = 'a'|{ return 'a' }|",r);u(n).to.parse("",[]),u(n).to.failToParse("aaa",{expected:[{type:"end"}]}),n=S.generate("start = 'a'|{ return 'a' }..2|",r),u(n).to.parse("",[]),u(n).to.parse("a",["a"]),u(n).to.parse("aa",["a","a"]),u(n).to.failToParse("aaa",{expected:[{type:"end"}]}),n=S.generate("start = 'a'|..{ return 'a' }|",r),u(n).to.parse("",[]),u(n).to.failToParse("a",{expected:[{type:"end"}]}),n=S.generate("start = 'a'|{return '1.8e0' }..{ return 2.8 }|",r),u(n).to.parse("a",["a"]),u(n).to.parse("aa",["a","a"]),u(n).to.failToParse("aaa",{expected:[{type:"end"}]})})}),describe("with delimiter",()=>{describe("with constant boundaries",()=>{it("| .. , delimiter| matches correctly",()=>{let n=S.generate("start = 'a'|.., '~'|",r);u(n).to.parse("",[]),u(n).to.parse("a",["a"]),u(n).to.parse("a~a",["a","a"]),u(n).to.parse("a~a~a",["a","a","a"])}),it("|0.. , delimiter| matches correctly",()=>{let n=S.generate("start = 'a'|0.., '~'|",r);u(n).to.parse("",[]),u(n).to.parse("a",["a"]),u(n).to.parse("a~a",["a","a"]),u(n).to.parse("a~a~a",["a","a","a"])}),it("|1.. , delimiter| matches correctly",()=>{let n=S.generate("start = 'a'|1.., '~'|",r);u(n).to.failToParse(""),u(n).to.parse("a",["a"]),u(n).to.parse("a~a",["a","a"]),u(n).to.parse("a~a~a",["a","a","a"])}),it("|2.. , delimiter| matches correctly",()=>{let n=S.generate("start = 'a'|2.., '~'|",r);u(n).to.failToParse(""),u(n).to.failToParse("a"),u(n).to.parse("a~a",["a","a"]),u(n).to.parse("a~a~a",["a","a","a"])}),it("| ..1, delimiter| matches correctly",()=>{let n=S.generate("start = 'a'|..1, '~'|",r);u(n).to.parse("",[]),u(n).to.parse("a",["a"]),u(n).to.failToParse("a~a"),u(n).to.failToParse("a~a~a")}),it("| ..2, delimiter| matches correctly",()=>{let n=S.generate("start = 'a'|..2, '~'|",r);u(n).to.parse("",[]),u(n).to.parse("a",["a"]),u(n).to.parse("a~a",["a","a"]),u(n).to.failToParse("a~a~a")}),it("|2..3, delimiter| matches correctly",()=>{let n=S.generate("start = 'a'|2..3, '~'|",r);u(n).to.failToParse(""),u(n).to.failToParse("a"),u(n).to.parse("a~a",["a","a"]),u(n).to.parse("a~a~a",["a","a","a"]),u(n).to.failToParse("a~a~a~a")}),it("|2..2, delimiter| matches correctly",()=>{let n=S.generate("start = 'a'|2..2, '~'|",r);u(n).to.failToParse(""),u(n).to.failToParse("a"),u(n).to.parse("a~a",["a","a"]),u(n).to.failToParse("a~a~a")}),it("|2   , delimiter| matches correctly",()=>{let n=S.generate("start = 'a'|2, '~'|",r);u(n).to.failToParse(""),u(n).to.failToParse("a"),u(n).to.parse("a~a",["a","a"]),u(n).to.failToParse("a~a~a")}),it("|3..2, delimiter| matches correctly",()=>{let n=S.generate("start = 'a'|3..2, '~'|",r);u(n).to.failToParse(""),u(n).to.failToParse("a"),u(n).to.failToParse("a~a"),u(n).to.failToParse("a~a~a")}),it("correctly pass external references to labels to repeated expression",()=>{let n=S.generate("start = ref:'a' ('b' &{ return ref === 'a'; })|.., ' '|",r);u(n).to.parse("ab b",["a",[["b",void 0],["b",void 0]]]),n=S.generate("start = ref:'a' ('b' &{ return ref === 'a'; })|2.., ' '|",r),u(n).to.parse("ab b",["a",[["b",void 0],["b",void 0]]]),n=S.generate("start = ref:'a' ('b' &{ return ref === 'a'; })|..3, ' '|",r),u(n).to.parse("ab b",["a",[["b",void 0],["b",void 0]]]),n=S.generate("start = ref:'a' ('b' &{ return ref === 'a'; })|2..3, ' '|",r),u(n).to.parse("ab b",["a",[["b",void 0],["b",void 0]]]),n=S.generate("start = ref:'a' ('b' &{ return ref === 'a'; })|2, ' '|",r),u(n).to.parse("ab b",["a",[["b",void 0],["b",void 0]]]),n=S.generate("start = ref:'a' 'b'|{ return ref === 'a' ? 2 : 0; }, ' '|",r),u(n).to.parse("ab b",["a",["b","b"]])})}),describe("with variable boundaries",()=>{it("|min..   , delimiter| matches correctly",()=>{let n=s("val.., '~'");for(let c=1;c<=4;++c){let l={startRule:"start1"+c};u(n).to.failToParse("",void 0,l),u(n).to.parse("0",[0,[],""],l),u(n).to.parse("0==",[0,["="],"="],l),u(n).to.parse("0=~=",[0,["=","="],""],l),u(n).to.failToParse("1",void 0,l),u(n).to.failToParse("1~",void 0,l),u(n).to.failToParse("2=",void 0,l),u(n).to.failToParse("2=~",void 0,l),u(n).to.failToParse("2==",void 0,l),u(n).to.parse("2=~=",[2,["=","="],""],l),u(n).to.parse("2=~=~",[2,["=","="],"~"],l),u(n).to.parse("2=~=~=~=~=",[2,["=","=","=","=","="],""],l)}for(let c=1;c<=4;++c){let l={startRule:"start2"+c};u(n).to.failToParse("-",void 0,l),u(n).to.parse("-0",["-",0,[],""],l),u(n).to.parse("-0==",["-",0,["="],"="],l),u(n).to.parse("-0=~=",["-",0,["=","="],""],l),u(n).to.failToParse("-1",void 0,l),u(n).to.failToParse("-1~",void 0,l),u(n).to.failToParse("-2=",void 0,l),u(n).to.failToParse("-2=~",void 0,l),u(n).to.failToParse("-2==",void 0,l),u(n).to.parse("-2=~=",["-",2,["=","="],""],l),u(n).to.parse("-2=~=~",["-",2,["=","="],"~"],l),u(n).to.parse("-2=~=~=~=~=",["-",2,["=","=","=","=","="],""],l)}for(let c=1;c<=4;++c){let l={startRule:"start3"+c};u(n).to.failToParse("-",void 0,l),u(n).to.parse("-0",["-",0,[],""],l),u(n).to.parse("-0==",["-",0,["="],"="],l),u(n).to.parse("-0=~=",["-",0,["=","="],""],l),u(n).to.failToParse("-1",void 0,l),u(n).to.failToParse("-1~",void 0,l),u(n).to.failToParse("-2=",void 0,l),u(n).to.failToParse("-2=~",void 0,l),u(n).to.failToParse("-2==",void 0,l),u(n).to.parse("-2=~=",["-",2,["=","="],""],l),u(n).to.parse("-2=~=~",["-",2,["=","="],"~"],l),u(n).to.parse("-2=~=~=~=~=",["-",2,["=","=","=","=","="],""],l)}for(let c=1;c<=4;++c){let l={startRule:"start4"+c};u(n).to.failToParse("--",void 0,l),u(n).to.parse("--0",["-","-",0,[],""],l),u(n).to.parse("--0==",["-","-",0,["="],"="],l),u(n).to.parse("--0=~=",["-","-",0,["=","="],""],l),u(n).to.failToParse("--1",void 0,l),u(n).to.failToParse("--1~",void 0,l),u(n).to.failToParse("--2=",void 0,l),u(n).to.failToParse("--2=~",void 0,l),u(n).to.failToParse("--2==",void 0,l),u(n).to.parse("--2=~=",["-","-",2,["=","="],""],l),u(n).to.parse("--2=~=~",["-","-",2,["=","="],"~"],l),u(n).to.parse("--2=~=~=~=~=",["-","-",2,["=","=","=","=","="],""],l)}}),it("|   ..max, delimiter| matches correctly",()=>{let n=s("..val, '~'");for(let c=1;c<=4;++c){let l={startRule:"start1"+c};u(n).to.failToParse("",void 0,l),u(n).to.parse("0",[0,[],""],l),u(n).to.parse("0==",[0,[],"=="],l),u(n).to.parse("0=~=",[0,[],"=~="],l),u(n).to.parse("3",[3,[],""],l),u(n).to.parse("3=",[3,["="],""],l),u(n).to.parse("3===",[3,["="],"=="],l),u(n).to.parse("3=~=~",[3,["=","="],"~"],l),u(n).to.parse("3=~=~=",[3,["=","=","="],""],l),u(n).to.parse("3=~=~=~=~=",[3,["=","=","="],"~=~="],l)}for(let c=1;c<=4;++c){let l={startRule:"start2"+c};u(n).to.failToParse("-",void 0,l),u(n).to.parse("-0",["-",0,[],""],l),u(n).to.parse("-0==",["-",0,[],"=="],l),u(n).to.parse("-0=~=",["-",0,[],"=~="],l),u(n).to.parse("-3",["-",3,[],""],l),u(n).to.parse("-3=",["-",3,["="],""],l),u(n).to.parse("-3===",["-",3,["="],"=="],l),u(n).to.parse("-3=~=~",["-",3,["=","="],"~"],l),u(n).to.parse("-3=~=~=",["-",3,["=","=","="],""],l),u(n).to.parse("-3=~=~=~=~=",["-",3,["=","=","="],"~=~="],l)}for(let c=1;c<=4;++c){let l={startRule:"start3"+c};u(n).to.failToParse("-",void 0,l),u(n).to.parse("-0",["-",0,[],""],l),u(n).to.parse("-0==",["-",0,[],"=="],l),u(n).to.parse("-0=~=",["-",0,[],"=~="],l),u(n).to.parse("-3",["-",3,[],""],l),u(n).to.parse("-3=",["-",3,["="],""],l),u(n).to.parse("-3===",["-",3,["="],"=="],l),u(n).to.parse("-3=~=~",["-",3,["=","="],"~"],l),u(n).to.parse("-3=~=~=",["-",3,["=","=","="],""],l),u(n).to.parse("-3=~=~=~=~=",["-",3,["=","=","="],"~=~="],l)}for(let c=1;c<=4;++c){let l={startRule:"start4"+c};u(n).to.failToParse("--",void 0,l),u(n).to.parse("--0",["-","-",0,[],""],l),u(n).to.parse("--0==",["-","-",0,[],"=="],l),u(n).to.parse("--0=~=",["-","-",0,[],"=~="],l),u(n).to.parse("--3",["-","-",3,[],""],l),u(n).to.parse("--3=",["-","-",3,["="],""],l),u(n).to.parse("--3===",["-","-",3,["="],"=="],l),u(n).to.parse("--3=~=~",["-","-",3,["=","="],"~"],l),u(n).to.parse("--3=~=~=",["-","-",3,["=","=","="],""],l),u(n).to.parse("--3=~=~=~=~=",["-","-",3,["=","=","="],"~=~="],l)}}),it("|min..max, delimiter| matches correctly",()=>{function n(){let l=[];for(let b=1;b<=4;++b)for(let T=1;T<=4;++T)l[l.length]="start"+String(b)+T;let h=a(r);return h.allowedStartRules=l,S.generate(["start11 =         min:n1 max:n1      .|min..max, '~'|      $.*","start12 =         min:n1 max:n1 data:.|min..max, '~'|      $.*","start13 =         min:n1 max:n1      .|min..max, '~'| rest:$.*","start14 =         min:n1 max:n1 data:.|min..max, '~'| rest:$.*","start21 = .       min:n1 max:n1      .|min..max, '~'|      $.*","start22 = .       min:n1 max:n1 data:.|min..max, '~'|      $.*","start23 = .       min:n1 max:n1      .|min..max, '~'| rest:$.*","start24 = .       min:n1 max:n1 data:.|min..max, '~'| rest:$.*","start31 = a:.     min:n1 max:n1      .|min..max, '~'|      $.*","start32 = a:.     min:n1 max:n1 data:.|min..max, '~'|      $.*","start33 = a:.     min:n1 max:n1      .|min..max, '~'| rest:$.*","start34 = a:.     min:n1 max:n1 data:.|min..max, '~'| rest:$.*","start41 = a:. b:. min:n1 max:n1      .|min..max, '~'|      $.*","start42 = a:. b:. min:n1 max:n1 data:.|min..max, '~'|      $.*","start43 = a:. b:. min:n1 max:n1      .|min..max, '~'| rest:$.*","start44 = a:. b:. min:n1 max:n1 data:.|min..max, '~'| rest:$.*","n1 = n:$[0-9] { return parseInt(n, 10); }"].join(`;
`),h)}let c=n();for(let l=1;l<=4;++l){let h={startRule:"start1"+l};u(c).to.failToParse("",void 0,h),u(c).to.parse("00",[0,0,[],""],h),u(c).to.parse("00==",[0,0,[],"=="],h),u(c).to.parse("00=~=",[0,0,[],"=~="],h),u(c).to.failToParse("23",void 0,h),u(c).to.failToParse("23=",void 0,h),u(c).to.failToParse("23=~",void 0,h),u(c).to.failToParse("23==",void 0,h),u(c).to.parse("23=~=",[2,3,["=","="],""],h),u(c).to.parse("23=~=~",[2,3,["=","="],"~"],h),u(c).to.parse("23=~=~=",[2,3,["=","=","="],""],h),u(c).to.parse("23=~=~=~=~=",[2,3,["=","=","="],"~=~="],h)}for(let l=1;l<=4;++l){let h={startRule:"start2"+l};u(c).to.failToParse("-",void 0,h),u(c).to.parse("-00",["-",0,0,[],""],h),u(c).to.parse("-00==",["-",0,0,[],"=="],h),u(c).to.parse("-00=~=",["-",0,0,[],"=~="],h),u(c).to.failToParse("-23",void 0,h),u(c).to.failToParse("-23=",void 0,h),u(c).to.failToParse("-23=~",void 0,h),u(c).to.failToParse("-23==",void 0,h),u(c).to.parse("-23=~=",["-",2,3,["=","="],""],h),u(c).to.parse("-23=~=~",["-",2,3,["=","="],"~"],h),u(c).to.parse("-23=~=~=",["-",2,3,["=","=","="],""],h),u(c).to.parse("-23=~=~=~=~=",["-",2,3,["=","=","="],"~=~="],h)}for(let l=1;l<=4;++l){let h={startRule:"start3"+l};u(c).to.failToParse("-",void 0,h),u(c).to.parse("-00",["-",0,0,[],""],h),u(c).to.parse("-00==",["-",0,0,[],"=="],h),u(c).to.parse("-00=~=",["-",0,0,[],"=~="],h),u(c).to.failToParse("-23",void 0,h),u(c).to.failToParse("-23=",void 0,h),u(c).to.failToParse("-23=~",void 0,h),u(c).to.failToParse("-23==",void 0,h),u(c).to.parse("-23=~=",["-",2,3,["=","="],""],h),u(c).to.parse("-23=~=~",["-",2,3,["=","="],"~"],h),u(c).to.parse("-23=~=~=",["-",2,3,["=","=","="],""],h),u(c).to.parse("-23=~=~=~=~=",["-",2,3,["=","=","="],"~=~="],h)}for(let l=1;l<=4;++l){let h={startRule:"start4"+l};u(c).to.failToParse("--",void 0,h),u(c).to.parse("--00",["-","-",0,0,[],""],h),u(c).to.parse("--00==",["-","-",0,0,[],"=="],h),u(c).to.parse("--00=~=",["-","-",0,0,[],"=~="],h),u(c).to.failToParse("--23",void 0,h),u(c).to.failToParse("--23=",void 0,h),u(c).to.failToParse("--23=~",void 0,h),u(c).to.failToParse("--23==",void 0,h),u(c).to.parse("--23=~=",["-","-",2,3,["=","="],""],h),u(c).to.parse("--23=~=~",["-","-",2,3,["=","="],"~"],h),u(c).to.parse("--23=~=~=",["-","-",2,3,["=","=","="],""],h),u(c).to.parse("--23=~=~=~=~=",["-","-",2,3,["=","=","="],"~=~="],h)}}),it("|val..val, delimiter| matches correctly",()=>{let n=s("val, '~'");for(let c=1;c<=4;++c){let l={startRule:"start1"+c};u(n).to.failToParse("",void 0,l),u(n).to.parse("0",[0,[],""],l),u(n).to.parse("0==",[0,[],"=="],l),u(n).to.parse("0=~=",[0,[],"=~="],l),u(n).to.failToParse("3",void 0,l),u(n).to.failToParse("3=",void 0,l),u(n).to.failToParse("3=~",void 0,l),u(n).to.parse("3=~=~=",[3,["=","=","="],""],l),u(n).to.parse("3=~=~=~",[3,["=","=","="],"~"],l),u(n).to.parse("3=~=~=~=~=",[3,["=","=","="],"~=~="],l)}for(let c=1;c<=4;++c){let l={startRule:"start2"+c};u(n).to.failToParse("-",void 0,l),u(n).to.parse("-0",["-",0,[],""],l),u(n).to.parse("-0==",["-",0,[],"=="],l),u(n).to.parse("-0=~=",["-",0,[],"=~="],l),u(n).to.failToParse("-3",void 0,l),u(n).to.failToParse("-3=",void 0,l),u(n).to.failToParse("-3=~",void 0,l),u(n).to.parse("-3=~=~=",["-",3,["=","=","="],""],l),u(n).to.parse("-3=~=~=~",["-",3,["=","=","="],"~"],l),u(n).to.parse("-3=~=~=~=~=",["-",3,["=","=","="],"~=~="],l)}for(let c=1;c<=4;++c){let l={startRule:"start3"+c};u(n).to.failToParse("-",void 0,l),u(n).to.parse("-0",["-",0,[],""],l),u(n).to.parse("-0==",["-",0,[],"=="],l),u(n).to.parse("-0=~=",["-",0,[],"=~="],l),u(n).to.failToParse("-3",void 0,l),u(n).to.failToParse("-3=",void 0,l),u(n).to.failToParse("-3=~",void 0,l),u(n).to.parse("-3=~=~=",["-",3,["=","=","="],""],l),u(n).to.parse("-3=~=~=~",["-",3,["=","=","="],"~"],l),u(n).to.parse("-3=~=~=~=~=",["-",3,["=","=","="],"~=~="],l)}for(let c=1;c<=4;++c){let l={startRule:"start4"+c};u(n).to.failToParse("--",void 0,l),u(n).to.parse("--0",["-","-",0,[],""],l),u(n).to.parse("--0==",["-","-",0,[],"=="],l),u(n).to.parse("--0=~=",["-","-",0,[],"=~="],l),u(n).to.failToParse("--3",void 0,l),u(n).to.failToParse("--3=",void 0,l),u(n).to.failToParse("--3=~",void 0,l),u(n).to.parse("--3=~=~=",["-","-",3,["=","=","="],""],l),u(n).to.parse("--3=~=~=~",["-","-",3,["=","=","="],"~"],l),u(n).to.parse("--3=~=~=~=~=",["-","-",3,["=","=","="],"~=~="],l)}}),it("| exact  , delimiter| matches correctly",()=>{let n=s("val, '~'");for(let c=1;c<=4;++c){let l={startRule:"start1"+c};u(n).to.failToParse("",void 0,l),u(n).to.parse("0",[0,[],""],l),u(n).to.parse("0==",[0,[],"=="],l),u(n).to.parse("0=~=",[0,[],"=~="],l),u(n).to.failToParse("3",void 0,l),u(n).to.failToParse("3=",void 0,l),u(n).to.failToParse("3=~",void 0,l),u(n).to.parse("3=~=~=",[3,["=","=","="],""],l),u(n).to.parse("3=~=~=~",[3,["=","=","="],"~"],l),u(n).to.parse("3=~=~=~=~=",[3,["=","=","="],"~=~="],l)}for(let c=1;c<=4;++c){let l={startRule:"start2"+c};u(n).to.failToParse("-",void 0,l),u(n).to.parse("-0",["-",0,[],""],l),u(n).to.parse("-0==",["-",0,[],"=="],l),u(n).to.parse("-0=~=",["-",0,[],"=~="],l),u(n).to.failToParse("-3",void 0,l),u(n).to.failToParse("-3=",void 0,l),u(n).to.failToParse("-3=~",void 0,l),u(n).to.parse("-3=~=~=",["-",3,["=","=","="],""],l),u(n).to.parse("-3=~=~=~",["-",3,["=","=","="],"~"],l),u(n).to.parse("-3=~=~=~=~=",["-",3,["=","=","="],"~=~="],l)}for(let c=1;c<=4;++c){let l={startRule:"start3"+c};u(n).to.failToParse("-",void 0,l),u(n).to.parse("-0",["-",0,[],""],l),u(n).to.parse("-0==",["-",0,[],"=="],l),u(n).to.parse("-0=~=",["-",0,[],"=~="],l),u(n).to.failToParse("-3",void 0,l),u(n).to.failToParse("-3=",void 0,l),u(n).to.failToParse("-3=~",void 0,l),u(n).to.parse("-3=~=~=",["-",3,["=","=","="],""],l),u(n).to.parse("-3=~=~=~",["-",3,["=","=","="],"~"],l),u(n).to.parse("-3=~=~=~=~=",["-",3,["=","=","="],"~=~="],l)}for(let c=1;c<=4;++c){let l={startRule:"start4"+c};u(n).to.failToParse("--",void 0,l),u(n).to.parse("--0",["-","-",0,[],""],l),u(n).to.parse("--0==",["-","-",0,[],"=="],l),u(n).to.parse("--0=~=",["-","-",0,[],"=~="],l),u(n).to.failToParse("--3",void 0,l),u(n).to.failToParse("--3=",void 0,l),u(n).to.failToParse("--3=~",void 0,l),u(n).to.parse("--3=~=~=",["-","-",3,["=","=","="],""],l),u(n).to.parse("--3=~=~=~",["-","-",3,["=","=","="],"~"],l),u(n).to.parse("--3=~=~=~=~=",["-","-",3,["=","=","="],"~=~="],l)}})}),describe("with function boundaries",()=>{it("|{2}..   , delimiter| matches correctly",()=>{let n=S.generate("start = 'a'|{ return 2; }.., '~'|",r);u(n).to.failToParse(""),u(n).to.failToParse("a"),u(n).to.parse("a~a",["a","a"]),u(n).to.parse("a~a~a",["a","a","a"])}),it("|   ..{2}, delimiter| matches correctly",()=>{let n=S.generate("start = 'a'|..{ return 2; }, '~'|",r);u(n).to.parse("",[]),u(n).to.parse("a",["a"]),u(n).to.parse("a~a",["a","a"]),u(n).to.failToParse("a~a~a")}),it("|{2}..{3}, delimiter| matches correctly",()=>{let n=S.generate("start = 'a'|{ return 2; }..{ return 3; }, '~'|",r);u(n).to.failToParse(""),u(n).to.failToParse("a"),u(n).to.parse("a~a",["a","a"]),u(n).to.parse("a~a~a",["a","a","a"]),u(n).to.failToParse("a~a~a~a")}),it("|{2}..{2}, delimiter| matches correctly",()=>{let n=S.generate("start = 'a'|{ return 2; }..{ return 2; }, '~'|",r);u(n).to.failToParse(""),u(n).to.failToParse("a"),u(n).to.parse("a~a",["a","a"]),u(n).to.failToParse("a~a~a")}),it("|{2}     , delimiter| matches correctly",()=>{let n=S.generate("start = 'a'|{ return 2; }, '~'|",r);u(n).to.failToParse(""),u(n).to.failToParse("a"),u(n).to.parse("a~a",["a","a"]),u(n).to.failToParse("a~a~a")}),it("|{3}..{2}, delimiter| matches correctly",()=>{let n=S.generate("start = 'a'|{ return 3; }..{ return 2; }, '~'|",r);u(n).to.failToParse(""),u(n).to.failToParse("a"),u(n).to.failToParse("a~a"),u(n).to.failToParse("a~a~a")}),it("correctly pass external references to labels to boundary expression",()=>{let n=S.generate("start = ref:'a' 'b'|{ return ref === 'a' ? 2 : 0; }.., ' '|",r);u(n).to.parse("ab b",["a",["b","b"]]),n=S.generate("start = ref:'a' 'b'|..{ return ref === 'a' ? 3 : 0; }, ' '|",r),u(n).to.parse("ab b",["a",["b","b"]]),n=S.generate("start = ref:'a' 'b'|{ return ref === 'a' ? 2 : 0; }..{ return ref === 'a' ? 3 : 0; }, ' '|",r),u(n).to.parse("ab b",["a",["b","b"]]),n=S.generate("start = ref:'a' 'b'|{ return ref === 'a' ? 2 : 0; }, ' '|",r),u(n).to.parse("ab b",["a",["b","b"]])})})}),describe("handle delimiter correctly",()=>{it("with constant boundaries",()=>{let n=S.generate("start = 'a'|2..3, '~'|",r);u(n).to.failToParse(""),u(n).to.failToParse("a"),u(n).to.failToParse("aa"),u(n).to.failToParse("a~"),u(n).to.parse("a~a",["a","a"]),u(n).to.failToParse("a~a~"),u(n).to.parse("a~a~a",["a","a","a"]),u(n).to.failToParse("a~a~a~"),u(n).to.failToParse("a~a~a~a")}),it("with variable boundaries",()=>{let n=S.generate(["start = min:n1 max:n1 'a'|min..max, '~'|","n1 = n:$[0-9] { return parseInt(n, 10); }"].join(`;
`),r);u(n).to.failToParse("23"),u(n).to.failToParse("23a"),u(n).to.failToParse("23aa"),u(n).to.failToParse("23a~"),u(n).to.parse("23a~a",[2,3,["a","a"]]),u(n).to.failToParse("23a~a~"),u(n).to.parse("23a~a~a",[2,3,["a","a","a"]]),u(n).to.failToParse("23a~a~a~"),u(n).to.failToParse("23a~a~a~a")}),it("with variable boundaries in delimiter",()=>{let n=S.generate(["start = min:n1 max:n1 'a'|2, '~'|min..max||","n1 = n:$[0-9] { return parseInt(n, 10); }"].join(`;
`),r);u(n).to.failToParse("23"),u(n).to.failToParse("23a"),u(n).to.failToParse("23aa"),u(n).to.failToParse("23a~"),u(n).to.failToParse("23a~a"),u(n).to.failToParse("23a~~"),u(n).to.parse("23a~~a",[2,3,["a","a"]]),u(n).to.parse("23a~~~a",[2,3,["a","a"]]),u(n).to.failToParse("23a~~~~a"),u(n).to.failToParse("23a~~a~~a")}),it("with function boundaries",()=>{let n=S.generate("start = 'a'|{ return 2; }..{ return 3; }, '~'|",r);u(n).to.failToParse(""),u(n).to.failToParse("a"),u(n).to.failToParse("aa"),u(n).to.failToParse("a~"),u(n).to.parse("a~a",["a","a"]),u(n).to.failToParse("a~a~"),u(n).to.parse("a~a~a",["a","a","a"]),u(n).to.failToParse("a~a~a~"),u(n).to.failToParse("a~a~a~a")})})}),describe("text",()=>{describe("when the expression matches",()=>{it("returns the matched text",()=>{let s=S.generate("start = $('a' 'b' 'c')",r);u(s).to.parse("abc","abc")})}),describe("when the expression doesn't match",()=>{it("reports match failure",()=>{let s=S.generate("start = $('a')",r);u(s).to.failToParse("b")})})}),describe("positive simple predicate",()=>{describe("when the expression matches",()=>{it("returns |undefined|",()=>{let s=S.generate("start = &'a' 'a'",r);u(s).to.parse("a",[void 0,"a"])}),it("resets parse position",()=>{let s=S.generate("start = &'a' 'a'",r);u(s).to.parse("a")})}),describe("when the expression doesn't match",()=>{it("reports match failure",()=>{let s=S.generate("start = &'a'",r);u(s).to.failToParse("b")}),it("discards any expectations recorded when matching the expression",()=>{let s=S.generate("start = 'a' / &'b' / 'c'",r);u(s).to.failToParse("d",{expected:[{type:"literal",text:"a",ignoreCase:!1},{type:"literal",text:"c",ignoreCase:!1}]})})})}),describe("negative simple predicate",()=>{describe("when the expression matches",()=>{it("reports match failure",()=>{let s=S.generate("start = !'a'",r);u(s).to.failToParse("a")})}),describe("when the expression doesn't match",()=>{it("returns |undefined|",()=>{let s=S.generate("start = !'a' 'b'",r);u(s).to.parse("b",[void 0,"b"])}),it("resets parse position",()=>{let s=S.generate("start = !'a' 'b'",r);u(s).to.parse("b")}),it("discards any expectations recorded when matching the expression",()=>{let s=S.generate("start = 'a' / !'b' / 'c'",r);u(s).to.failToParse("b",{expected:[{type:"literal",text:"a",ignoreCase:!1},{type:"literal",text:"c",ignoreCase:!1}]})})})}),describe("label",()=>{describe("when the expression matches",()=>{it("returns its match result",()=>{let s=S.generate("start = a:'a'",r);u(s).to.parse("a","a")})}),describe("when the expression doesn't match",()=>{it("reports match failure",()=>{let s=S.generate("start = a:'a'",r);u(s).to.failToParse("b")})})}),describe("sequence",()=>{describe("when all expressions match",()=>{it("returns an array of their match results",()=>{let s=S.generate("start = 'a' 'b' 'c'",r);u(s).to.parse("abc",["a","b","c"])}),it("plucks a single value",()=>{let s=S.generate("start = @'a'",r);u(s).to.parse("a","a"),s=S.generate("start = @'a' / @'b'",r),u(s).to.parse("a","a"),u(s).to.parse("b","b"),s=S.generate("start = 'a' @'b' 'c'",r),u(s).to.parse("abc","b"),s=S.generate("start = 'a' ( @'b' 'c' )",r),u(s).to.parse("abc",["a","b"]),s=S.generate("start = 'a' @( 'b' @'c' 'd' )",r),u(s).to.parse("abcd","c"),s=S.generate("start = 'a' ( @'b' 'c' ) @'d'",r),u(s).to.parse("abcd","d"),s=S.generate("start = 'a' @'b' 'c' / 'd' 'e' @'f'",r),u(s).to.parse("def","f")}),it("plucks a multiple values",()=>{let s=S.generate("start = 'a' @'b' @'c'",r);u(s).to.parse("abc",["b","c"]),s=S.generate("start = 'a' ( @'b' @'c' )",r),u(s).to.parse("abc",["a",["b","c"]]),s=S.generate("start = 'a' @( 'b' @'c' @'d' )",r),u(s).to.parse("abcd",["c","d"]),s=S.generate("start = 'a' @( @'b' 'c' ) @'d' 'e'",r),u(s).to.parse("abcde",["b","d"]),s=S.generate("start = 'a' @'b' 'c' / @'d' 'e' @'f'",r),u(s).to.parse("def",["d","f"])}),it('prevents "@" on a semantic predicate',()=>{u(()=>S.generate("start1 = 'a' @&{ /* semantic_and */ } 'c'"),r).to.throw(),u(()=>S.generate("start2 = 'a' @!{ /* semantic_not */ } 'c'"),r).to.throw()})}),describe("when any expression doesn't match",()=>{it("reports match failure",()=>{let s=S.generate("start = 'a' 'b' 'c'",r);u(s).to.failToParse("dbc"),u(s).to.failToParse("adc"),u(s).to.failToParse("abd")}),it("resets parse position",()=>{let s=S.generate("start = 'a' 'b' / 'a'",r);u(s).to.parse("a","a")})})}),describe("action",()=>{describe("when the expression matches",()=>{it("returns the value returned by the code",()=>{let s=S.generate("start = 'a' { return 42; }",r);u(s).to.parse("a",42)}),describe("label variables",()=>{describe("in the expression",()=>{it("can access variable defined by labeled expression",()=>{let s=S.generate("start = a:'a' { return a; }",r);u(s).to.parse("a","a")}),it("can access variables defined by labeled sequence elements",()=>{let s=S.generate("start = a:'a' b:'b' c:'c' { return [a, b, c]; }",r);u(s).to.parse("abc",["a","b","c"])}),it("cannot access variables defined by subexpressions",()=>{[{grammar:"start = (a:'a') { return a; }",input:"a"},{grammar:"start = (a:'a')? { return a; }",input:"a"},{grammar:"start = (a:'a')* { return a; }",input:"a"},{grammar:"start = (a:'a')+ { return a; }",input:"a"},{grammar:"start = (a:'a')| .. | { return a; }",input:"a"},{grammar:"start = (a:'a')|0.. | { return a; }",input:"a"},{grammar:"start = (a:'a')|1.. | { return a; }",input:"a"},{grammar:"start = (a:'a')|2.. | { return a; }",input:"aa"},{grammar:"start = (a:'a')| ..1| { return a; }",input:"a"},{grammar:"start = (a:'a')| ..3| { return a; }",input:"a"},{grammar:"start = (a:'a')|2..3| { return a; }",input:"aa"},{grammar:"start = (a:'a')|3| { return a; }",input:"aaa"},{grammar:"start = $(a:'a') { return a; }",input:"a"},{grammar:"start = &(a:'a') 'a' { return a; }",input:"a"},{grammar:"start = !(a:'a') 'b' { return a; }",input:"b"},{grammar:"start = b:(a:'a') { return a; }",input:"a"},{grammar:"start = ('a' b:'b' 'c') { return b; }",input:"abc"},{grammar:"start = (a:'a' { return a; }) { return a; }",input:"a"},{grammar:"start = ('a' / b:'b' / 'c') { return b; }",input:"b"}].forEach(n=>{let c=S.generate(n.grammar,r);u(c).to.failToParse(n.input)})})}),describe("in outer sequence",()=>{it("can access variables defined by preceding labeled elements",()=>{let s=S.generate("start = a:'a' ('b' { return a; })",r);u(s).to.parse("ab",["a","a"])}),it("cannot access variable defined by labeled action element",()=>{let s=S.generate("start = 'a' b:('b' { return b; }) c:'c'",r);u(s).to.failToParse("abc")}),it("cannot access variables defined by following labeled elements",()=>{let s=S.generate("start = ('a' { return b; }) b:'b'",r);u(s).to.failToParse("ab")})})}),describe("initializer variables & functions",()=>{it("can access variables defined in the initializer",()=>{let s=S.generate(["{ var v = 42 }","start = 'a' { return v; }"].join(`
`),r);u(s).to.parse("a",42)}),it("can access functions defined in the initializer",()=>{let s=S.generate(["{ function f() { return 42; } }","start = 'a' { return f(); }"].join(`
`),r);u(s).to.parse("a",42)})}),describe("available variables & functions",()=>{it("|options| contains options",()=>{let s=S.generate("start = 'a' { return options; }",r);u(s).to.parse("a",{a:42},{a:42})}),it("|text| returns text matched by the expression",()=>{let s=S.generate("start = 'a' { return text(); }",r);u(s).to.parse("a","a")}),it("|location| returns location info of the expression",()=>{let s=S.generate(["{ var result; }","start = line (nl+ line)* { return result; }","line = thing (' '+ thing)*","thing = digit / mark","digit = [0-9]","mark = 'x' { result = location(); }","nl = '\\r'? '\\n'"].join(`
`),r);u(s).to.parse(`1
2

3


4 5 x`,{source:void 0,start:{offset:13,line:7,column:5},end:{offset:14,line:7,column:6}}),u(s).to.parse(`1
x`,{source:void 0,start:{offset:2,line:2,column:1},end:{offset:3,line:2,column:2}}),u(s).to.parse(`1\r
x`,{source:void 0,start:{offset:3,line:2,column:1},end:{offset:4,line:2,column:2}})}),describe("|expected|",()=>{it("terminates parsing and throws an exception",()=>{let s=S.generate("start = 'a' { expected('a'); }",r);u(s).to.failToParse("a",{message:'Expected a but "a" found.',expected:[{type:"other",description:"a"}],found:"a",location:{source:void 0,start:{offset:0,line:1,column:1},end:{offset:1,line:1,column:2}}})}),it("allows to set custom location info",()=>{let s=S.generate(["start = 'a' {","  expected('a', {","    start: { offset: 1, line: 1, column: 2 },","    end: { offset: 2, line: 1, column: 3 }","  });","}"].join(`
`),r);u(s).to.failToParse("a",{message:'Expected a but "a" found.',expected:[{type:"other",description:"a"}],found:"a",location:{start:{offset:1,line:1,column:2},end:{offset:2,line:1,column:3}}})})}),describe("|error|",()=>{it("terminates parsing and throws an exception",()=>{let s=S.generate("start = 'a' { error('a'); }",r);u(s).to.failToParse("a",{message:"a",found:null,expected:null,location:{source:void 0,start:{offset:0,line:1,column:1},end:{offset:1,line:1,column:2}}})}),it("allows to set custom location info",()=>{let s=S.generate(["start = 'a' {","  error('a', {","    start: { offset: 1, line: 1, column: 2 },","    end: { offset: 2, line: 1, column: 3 }","  });","}"].join(`
`),r);u(s).to.failToParse("a",{message:"a",expected:null,found:null,location:{start:{offset:1,line:1,column:2},end:{offset:2,line:1,column:3}}})})})})}),describe("when the expression doesn't match",()=>{it("reports match failure",()=>{let s=S.generate("start = 'a' { return 42; }",r);u(s).to.failToParse("b")}),it("doesn't execute the code",()=>{let s=S.generate("start = 'a' { throw 'Boom!'; } / 'b'",r);u(s).to.parse("b")})})}),describe("choice",()=>{describe("when any expression matches",()=>{it("returns its match result",()=>{let s=S.generate("start = 'a' / 'b' / 'c'",r);u(s).to.parse("a","a"),u(s).to.parse("b","b"),u(s).to.parse("c","c")})}),describe("when all expressions don't match",()=>{it("reports match failure",()=>{let s=S.generate("start = 'a' / 'b' / 'c'",r);u(s).to.failToParse("d")})})}),describe("error reporting",()=>{describe("behavior",()=>{it("reports only the rightmost error",()=>{let s=S.generate("start = 'a' 'b' / 'a' 'c' 'd'",r);u(s).to.failToParse("ace",{expected:[{type:"literal",text:"d",ignoreCase:!1}]})})}),describe("expectations reporting",()=>{it("reports expectations correctly with no alternative",()=>{let s=S.generate("start = 'a'",r);u(s).to.failToParse("ab",{expected:[{type:"end"}]})}),it("reports expectations correctly with one alternative",()=>{let s=S.generate("start = 'a'",r);u(s).to.failToParse("b",{expected:[{type:"literal",text:"a",ignoreCase:!1}]})}),it("reports expectations correctly with multiple alternatives",()=>{let s=S.generate("start = 'aa' / 'bb' / 'cc'",r);u(s).to.failToParse("dd",{expected:[{type:"literal",text:"aa",ignoreCase:!1},{type:"literal",text:"bb",ignoreCase:!1},{type:"literal",text:"cc",ignoreCase:!1}]})})}),describe("found string reporting",()=>{it("reports found string correctly at the end of input",()=>{let s=S.generate("start = 'a'",r);u(s).to.failToParse("",{found:null})}),it("reports found string correctly in the middle of input",()=>{let s=S.generate("start = 'a'",r);u(s).to.failToParse("b",{found:"b"})})}),describe("message building",()=>{it("builds message correctly with no alternative",()=>{let s=S.generate("start = 'a'",r);u(s).to.failToParse("ab",{message:'Expected end of input but "b" found.'})}),it("builds message correctly with one alternative",()=>{let s=S.generate("start = 'a'",r);u(s).to.failToParse("b",{message:'Expected "a" but "b" found.'})}),it("builds message correctly with multiple alternatives",()=>{let s=S.generate("start = 'aa' / 'bb' / 'cc'",r);u(s).to.failToParse("dd",{message:'Expected "aa", "bb", or "cc" but "d" found.'})}),it("builds message correctly at the end of input",()=>{let s=S.generate("start = 'a'",r);u(s).to.failToParse("",{message:'Expected "a" but end of input found.'})}),it("builds message correctly in the middle of input",()=>{let s=S.generate("start = 'a'",r);u(s).to.failToParse("b",{message:'Expected "a" but "b" found.'})}),it("removes duplicates from expectations",()=>{let s=S.generate("start = 'a' / 'a'",r);u(s).to.failToParse("b",{message:'Expected "a" but "b" found.'})}),it("sorts expectations",()=>{let s=S.generate("start = 'cc' / 'bb' / 'aa'",r);u(s).to.failToParse("d",{message:'Expected "aa", "bb", or "cc" but "d" found.'})})}),describe("position reporting",()=>{it("reports position correctly at the end of input",()=>{let s=S.generate("start = 'a'",r);u(s).to.failToParse("",{location:{source:void 0,start:{offset:0,line:1,column:1},end:{offset:0,line:1,column:1}}})}),it("reports position correctly in the middle of input",()=>{let s=S.generate("start = 'a'",r);u(s).to.failToParse("b",{location:{source:void 0,start:{offset:0,line:1,column:1},end:{offset:1,line:1,column:2}}})}),it("reports position correctly with trailing input",()=>{let s=S.generate("start = 'a'",r);u(s).to.failToParse("aa",{location:{source:void 0,start:{offset:1,line:1,column:2},end:{offset:2,line:1,column:3}}})}),it("reports position correctly in complex cases",()=>{let s=S.generate(["start = line (nl+ line)*","line = digit (' '+ digit)*","digit = [0-9]","nl = '\\r'? '\\n'"].join(`
`),r);u(s).to.failToParse(`1
2

3


4 5 x`,{location:{source:void 0,start:{offset:13,line:7,column:5},end:{offset:14,line:7,column:6}}}),u(s).to.failToParse(`1
x`,{location:{source:void 0,start:{offset:2,line:2,column:1},end:{offset:3,line:2,column:2}}}),u(s).to.failToParse(`1\r
x`,{location:{source:void 0,start:{offset:3,line:2,column:1},end:{offset:4,line:2,column:2}}})}),it("reports location source correctly",()=>{let s={source:"object"},n=S.generate(["start = line (nl+ line)*","line = digit (' '+ digit)*","digit = [0-9]","nl = '\\r'? '\\n'"].join(`
`),r);u(n).to.failToParse(`1
2

3


4 5 x`,{location:{source:s,start:{offset:13,line:7,column:5},end:{offset:14,line:7,column:6}}},{grammarSource:s})})})}),describe("complex examples",()=>{it("handles arithmetics example correctly",()=>{let s=S.generate(["Expr = Sum","Sum = head:Product tail:(('+' / '-') Product)* {","        return tail.reduce(function(result, element) {","          if (element[0] === '+') { return result + element[1]; }","          if (element[0] === '-') { return result - element[1]; }","        }, head);","      }","Product = head:Value tail:(('*' / '/') Value)* {","            return tail.reduce(function(result, element) {","              if (element[0] === '*') { return result * element[1]; }","              if (element[0] === '/') { return result / element[1]; }","            }, head);","          }","Value = digits:[0-9]+     { return parseInt(digits.join(''), 10); }","      / '(' expr:Expr ')' { return expr; }"].join(`
`),r);u(s).to.parse("0",0),u(s).to.parse("123",123),u(s).to.parse("(42+43)",85),u(s).to.parse("42",42),u(s).to.parse("42*43",1806),u(s).to.parse("42*43*44*45",1806*44*45),u(s).to.parse("42/43",42/43),u(s).to.parse("42/43/44/45",42/43/44/45),u(s).to.parse("42*43",1806),u(s).to.parse("42*43+44*45",3786),u(s).to.parse("42*43+44*45+46*47+48*49",8300),u(s).to.parse("42*43-44*45",-174),u(s).to.parse("42*43-44*45-46*47-48*49",-4688),u(s).to.parse("42+43",85),u(s).to.parse("(1+2)*(3+4)",21)}),it("handles non-context-free language correctly",()=>{let s=S.generate(["S = &(A 'c') a:'a'+ B:B !('a' / 'b' / 'c') { return a.join('') + B; }","A = a:'a' A:A? b:'b' { return [a, A, b].join(''); }","B = b:'b' B:B? c:'c' { return [b, B, c].join(''); }"].join(`
`),r);u(s).to.parse("abc","abc"),u(s).to.parse("aaabbbccc","aaabbbccc"),u(s).to.failToParse("aabbbccc"),u(s).to.failToParse("aaaabbbccc"),u(s).to.failToParse("aaabbccc"),u(s).to.failToParse("aaabbbbccc"),u(s).to.failToParse("aaabbbcc"),u(s).to.failToParse("aaabbbcccc")}),it("handles nested comments example correctly",()=>{let s=S.generate(["C = begin:Begin ns:N* end:End { return begin + ns.join('') + end; }","N = C","  / !Begin !End z:Z { return z; }","Z = .","Begin = '(*'","End = '*)'"].join(`
`),r);u(s).to.parse("(**)","(**)"),u(s).to.parse("(*abc*)","(*abc*)"),u(s).to.parse("(*(**)*)","(*(**)*)"),u(s).to.parse("(*abc(*def*)ghi(*(*(*jkl*)*)*)mno*)","(*abc(*def*)ghi(*(*(*jkl*)*)*)mno*)")})}),describe("run side-effects in non-matching",()=>{it("positive semantic predicate",()=>{let s=S.generate(`
        { let i = 0; }
        start = (neverMatched / .) { return i; };
        neverMatched = &{ i = 1; return true; } [];
        `,r);u(s).to.parse("b",1),s=S.generate(`
        { let i = 0; }
        start = ("a" / neverMatched / .) { return i; };
        neverMatched = &{ i = 1; return true; } [];
        `,r),u(s).to.parse("b",1)}),it("negative semantic predicate",()=>{let s=S.generate(`
        { let i = 0; }
        start = (neverMatched / .) { return i; };
        neverMatched = !{ i = 1; return false; } [];
        `,r);u(s).to.parse("b",1),s=S.generate(`
        { let i = 0; }
        start = ("a" / neverMatched / .) { return i; };
        neverMatched = !{ i = 1; return false; } [];
        `,r),u(s).to.parse("b",1)}),it("action",()=>{let s=S.generate(`
        { let i = 0; }
        start = (neverMatched / .) { return i; };
        neverMatched = (. { i = 1; }) [];
        `,r);u(s).to.parse("b",1),s=S.generate(`
        { let i = 0; }
        start = ("a" / neverMatched / .) { return i; };
        neverMatched = (. { i = 1; }) [];
        `,r),u(s).to.parse("b",1)})})}),describe("syntax errors",()=>{it("formats",()=>{let r={source:"stdin",text:"==="};try{S.generate(r.text,{grammarSource:r.source})}catch(s){u(s).to.be.an.instanceof(S.parser.SyntaxError),u(s.format([r])).to.equal(`Error: Expected "import", "{", code block, comment, end of line, identifier, or whitespace but "=" found.
 --> stdin:1:1
  |
1 | ===
  | ^`)}try{S.generate("===",{grammarSource:"stdin"})}catch(s){u(s).to.be.an.instanceof(S.parser.SyntaxError),u(s.format([])).to.equal(`Error: Expected "import", "{", code block, comment, end of line, identifier, or whitespace but "=" found.
 at stdin:1:1`)}}),it("detects infinite loops before other errors",()=>{try{S.generate(`
          start = start
          dup = label:"foo" label:"bar"
        `)}catch(r){u(r).with.property("stage","prepare"),u(r).with.property("problems").to.be.an("array");let s=r.problems.filter(n=>n[0]==="error").map(n=>n[1]);u(s).to.deep.equal(["Possible infinite loop when parsing (left recursion: start -> start)"])}}),it("reports multiple errors in each compilation stage",()=>{try{S.generate(`
          start = leftRecursion
          leftRecursion = duplicatedLabel:duplicatedRule duplicatedLabel:missingRule
          duplicatedRule = missingRule
          duplicatedRule = "nothing"
        `)}catch(r){u(r).with.property("stage","check"),u(r).with.property("problems").to.be.an("array"),r.problems.forEach(n=>{u(n).to.be.an("array").lengthOf.gte(2),u(n[0]).to.be.oneOf(["error","warning","info"])});let s=r.problems.filter(n=>n[0]==="error").map(n=>n[1]);u(s).to.include.members(['Rule "missingRule" is not defined','Rule "duplicatedRule" is already defined','Label "duplicatedLabel" is already defined'])}})})})});var vf=F(xf=>{var yf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");xf.encode=function(a){if(0<=a&&a<yf.length)return yf[a];throw new TypeError("Must be between 0 and 63: "+a)}});var ho=F(Sf=>{var n0=vf(),wf=5,Af=1<<wf,s0=Af-1,o0=Af;function i0(a){return a<0?(-a<<1)+1:(a<<1)+0}Sf.encode=function(t){let e="",o,r=i0(t);do o=r&s0,r>>>=wf,r>0&&(o|=o0),e+=n0.encode(o);while(r>0);return e}});var Tf=F((kr,Dr)=>{(function(a){var t=typeof kr=="object"&&kr&&!kr.nodeType&&kr,e=typeof Dr=="object"&&Dr&&!Dr.nodeType&&Dr,o=typeof global=="object"&&global;(o.global===o||o.window===o||o.self===o)&&(a=o);var r,s=2147483647,n=36,c=1,l=26,h=38,b=700,T=72,A=128,P="-",H=/^xn--/,me=/[^\x20-\x7E]/,ye=/[\x2E\u3002\uFF0E\uFF61]/g,_e={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ie=n-c,ne=Math.floor,Pe=String.fromCharCode,ve;function Se(Z){throw new RangeError(_e[Z])}function je(Z,y){for(var E=Z.length,N=[];E--;)N[E]=y(Z[E]);return N}function fe(Z,y){var E=Z.split("@"),N="";E.length>1&&(N=E[0]+"@",Z=E[1]),Z=Z.replace(ye,".");var R=Z.split("."),Y=je(R,y).join(".");return N+Y}function x(Z){for(var y=[],E=0,N=Z.length,R,Y;E<N;)R=Z.charCodeAt(E++),R>=55296&&R<=56319&&E<N?(Y=Z.charCodeAt(E++),(Y&64512)==56320?y.push(((R&1023)<<10)+(Y&1023)+65536):(y.push(R),E--)):y.push(R);return y}function q(Z){return je(Z,function(y){var E="";return y>65535&&(y-=65536,E+=Pe(y>>>10&1023|55296),y=56320|y&1023),E+=Pe(y),E}).join("")}function J(Z){return Z-48<10?Z-22:Z-65<26?Z-65:Z-97<26?Z-97:n}function j(Z,y){return Z+22+75*(Z<26)-((y!=0)<<5)}function B(Z,y,E){var N=0;for(Z=E?ne(Z/b):Z>>1,Z+=ne(Z/y);Z>ie*l>>1;N+=n)Z=ne(Z/ie);return ne(N+(ie+1)*Z/(Z+h))}function te(Z){var y=[],E=Z.length,N,R=0,Y=A,D=T,k,L,K,X,se,pe,he,oe,xe;for(k=Z.lastIndexOf(P),k<0&&(k=0),L=0;L<k;++L)Z.charCodeAt(L)>=128&&Se("not-basic"),y.push(Z.charCodeAt(L));for(K=k>0?k+1:0;K<E;){for(X=R,se=1,pe=n;K>=E&&Se("invalid-input"),he=J(Z.charCodeAt(K++)),(he>=n||he>ne((s-R)/se))&&Se("overflow"),R+=he*se,oe=pe<=D?c:pe>=D+l?l:pe-D,!(he<oe);pe+=n)xe=n-oe,se>ne(s/xe)&&Se("overflow"),se*=xe;N=y.length+1,D=B(R-X,N,X==0),ne(R/N)>s-Y&&Se("overflow"),Y+=ne(R/N),R%=N,y.splice(R++,0,Y)}return q(y)}function Q(Z){var y,E,N,R,Y,D,k,L,K,X,se,pe=[],he,oe,xe,Me;for(Z=x(Z),he=Z.length,y=A,E=0,Y=T,D=0;D<he;++D)se=Z[D],se<128&&pe.push(Pe(se));for(N=R=pe.length,R&&pe.push(P);N<he;){for(k=s,D=0;D<he;++D)se=Z[D],se>=y&&se<k&&(k=se);for(oe=N+1,k-y>ne((s-E)/oe)&&Se("overflow"),E+=(k-y)*oe,y=k,D=0;D<he;++D)if(se=Z[D],se<y&&++E>s&&Se("overflow"),se==y){for(L=E,K=n;X=K<=Y?c:K>=Y+l?l:K-Y,!(L<X);K+=n)Me=L-X,xe=n-X,pe.push(Pe(j(X+Me%xe,0))),L=ne(Me/xe);pe.push(Pe(j(L,0))),Y=B(E,oe,N==R),E=0,++N}++E,++y}return pe.join("")}function U(Z){return fe(Z,function(y){return H.test(y)?te(y.slice(4).toLowerCase()):y})}function Re(Z){return fe(Z,function(y){return me.test(y)?"xn--"+Q(y):y})}if(r={version:"1.4.1",ucs2:{decode:x,encode:q},decode:te,encode:Q,toASCII:Re,toUnicode:U},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return r});else if(t&&e)if(Dr.exports==t)e.exports=r;else for(ve in r)r.hasOwnProperty(ve)&&(t[ve]=r[ve]);else a.punycode=r})(kr)});var br=F((zA,Ef)=>{"use strict";Ef.exports=TypeError});var Pf=F(()=>{});var Ea=F((VA,Vf)=>{var To=typeof Map=="function"&&Map.prototype,mo=Object.getOwnPropertyDescriptor&&To?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Sn=To&&mo&&typeof mo.get=="function"?mo.get:null,_f=To&&Map.prototype.forEach,Eo=typeof Set=="function"&&Set.prototype,go=Object.getOwnPropertyDescriptor&&Eo?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Tn=Eo&&go&&typeof go.get=="function"?go.get:null,Cf=Eo&&Set.prototype.forEach,c0=typeof WeakMap=="function"&&WeakMap.prototype,Aa=c0?WeakMap.prototype.has:null,l0=typeof WeakSet=="function"&&WeakSet.prototype,Sa=l0?WeakSet.prototype.has:null,u0=typeof WeakRef=="function"&&WeakRef.prototype,$f=u0?WeakRef.prototype.deref:null,f0=Boolean.prototype.valueOf,p0=Object.prototype.toString,d0=Function.prototype.toString,h0=String.prototype.match,Po=String.prototype.slice,Zt=String.prototype.replace,m0=String.prototype.toUpperCase,Of=String.prototype.toLowerCase,kf=RegExp.prototype.test,qf=Array.prototype.concat,$t=Array.prototype.join,g0=Array.prototype.slice,Rf=Math.floor,xo=typeof BigInt=="function"?BigInt.prototype.valueOf:null,bo=Object.getOwnPropertySymbols,vo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ur=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ta=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ur||!0)?Symbol.toStringTag:null,Df=Object.prototype.propertyIsEnumerable,If=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(a){return a.__proto__}:null);function Lf(a,t){if(a===1/0||a===-1/0||a!==a||a&&a>-1e3&&a<1e3||kf.call(/e/,t))return t;var e=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof a=="number"){var o=a<0?-Rf(-a):Rf(a);if(o!==a){var r=String(o),s=Po.call(t,r.length+1);return Zt.call(r,e,"$&_")+"."+Zt.call(Zt.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Zt.call(t,e,"$&_")}var wo=Pf(),Mf=wo.custom,Ff=zf(Mf)?Mf:null,Uf={__proto__:null,double:'"',single:"'"},b0={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};Vf.exports=function a(t,e,o,r){var s=e||{};if(Nt(s,"quoteStyle")&&!Nt(Uf,s.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Nt(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var n=Nt(s,"customInspect")?s.customInspect:!0;if(typeof n!="boolean"&&n!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Nt(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Nt(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var c=s.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return Wf(t,s);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var l=String(t);return c?Lf(t,l):l}if(typeof t=="bigint"){var h=String(t)+"n";return c?Lf(t,h):h}var b=typeof s.depth>"u"?5:s.depth;if(typeof o>"u"&&(o=0),o>=b&&b>0&&typeof t=="object")return Ao(t)?"[Array]":"[Object]";var T=M0(s,o);if(typeof r>"u")r=[];else if(Gf(r,t)>=0)return"[Circular]";function A(B,te,Q){if(te&&(r=g0.call(r),r.push(te)),Q){var U={depth:s.depth};return Nt(s,"quoteStyle")&&(U.quoteStyle=s.quoteStyle),a(B,U,o+1,r)}return a(B,s,o+1,r)}if(typeof t=="function"&&!Nf(t)){var P=P0(t),H=An(t,A);return"[Function"+(P?": "+P:" (anonymous)")+"]"+(H.length>0?" { "+$t.call(H,", ")+" }":"")}if(zf(t)){var me=Ur?Zt.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):vo.call(t);return typeof t=="object"&&!Ur?wa(me):me}if(R0(t)){for(var ye="<"+Of.call(String(t.nodeName)),_e=t.attributes||[],ie=0;ie<_e.length;ie++)ye+=" "+_e[ie].name+"="+Bf(y0(_e[ie].value),"double",s);return ye+=">",t.childNodes&&t.childNodes.length&&(ye+="..."),ye+="</"+Of.call(String(t.nodeName))+">",ye}if(Ao(t)){if(t.length===0)return"[]";var ne=An(t,A);return T&&!L0(ne)?"["+So(ne,T)+"]":"[ "+$t.call(ne,", ")+" ]"}if(v0(t)){var Pe=An(t,A);return!("cause"in Error.prototype)&&"cause"in t&&!Df.call(t,"cause")?"{ ["+String(t)+"] "+$t.call(qf.call("[cause]: "+A(t.cause),Pe),", ")+" }":Pe.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+$t.call(Pe,", ")+" }"}if(typeof t=="object"&&n){if(Ff&&typeof t[Ff]=="function"&&wo)return wo(t,{depth:b-o});if(n!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(_0(t)){var ve=[];return _f&&_f.call(t,function(B,te){ve.push(A(te,t,!0)+" => "+A(B,t))}),jf("Map",Sn.call(t),ve,T)}if(O0(t)){var Se=[];return Cf&&Cf.call(t,function(B){Se.push(A(B,t))}),jf("Set",Tn.call(t),Se,T)}if(C0(t))return yo("WeakMap");if(q0(t))return yo("WeakSet");if($0(t))return yo("WeakRef");if(A0(t))return wa(A(Number(t)));if(T0(t))return wa(A(xo.call(t)));if(S0(t))return wa(f0.call(t));if(w0(t))return wa(A(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(typeof globalThis<"u"&&t===globalThis||typeof global<"u"&&t===global)return"{ [object globalThis] }";if(!x0(t)&&!Nf(t)){var je=An(t,A),fe=If?If(t)===Object.prototype:t instanceof Object||t.constructor===Object,x=t instanceof Object?"":"null prototype",q=!fe&&Ta&&Object(t)===t&&Ta in t?Po.call(Xt(t),8,-1):x?"Object":"",J=fe||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",j=J+(q||x?"["+$t.call(qf.call([],q||[],x||[]),": ")+"] ":"");return je.length===0?j+"{}":T?j+"{"+So(je,T)+"}":j+"{ "+$t.call(je,", ")+" }"}return String(t)};function Bf(a,t,e){var o=e.quoteStyle||t,r=Uf[o];return r+a+r}function y0(a){return Zt.call(String(a),/"/g,"&quot;")}function yr(a){return!Ta||!(typeof a=="object"&&(Ta in a||typeof a[Ta]<"u"))}function Ao(a){return Xt(a)==="[object Array]"&&yr(a)}function x0(a){return Xt(a)==="[object Date]"&&yr(a)}function Nf(a){return Xt(a)==="[object RegExp]"&&yr(a)}function v0(a){return Xt(a)==="[object Error]"&&yr(a)}function w0(a){return Xt(a)==="[object String]"&&yr(a)}function A0(a){return Xt(a)==="[object Number]"&&yr(a)}function S0(a){return Xt(a)==="[object Boolean]"&&yr(a)}function zf(a){if(Ur)return a&&typeof a=="object"&&a instanceof Symbol;if(typeof a=="symbol")return!0;if(!a||typeof a!="object"||!vo)return!1;try{return vo.call(a),!0}catch{}return!1}function T0(a){if(!a||typeof a!="object"||!xo)return!1;try{return xo.call(a),!0}catch{}return!1}var E0=Object.prototype.hasOwnProperty||function(a){return a in this};function Nt(a,t){return E0.call(a,t)}function Xt(a){return p0.call(a)}function P0(a){if(a.name)return a.name;var t=h0.call(d0.call(a),/^function\s*([\w$]+)/);return t?t[1]:null}function Gf(a,t){if(a.indexOf)return a.indexOf(t);for(var e=0,o=a.length;e<o;e++)if(a[e]===t)return e;return-1}function _0(a){if(!Sn||!a||typeof a!="object")return!1;try{Sn.call(a);try{Tn.call(a)}catch{return!0}return a instanceof Map}catch{}return!1}function C0(a){if(!Aa||!a||typeof a!="object")return!1;try{Aa.call(a,Aa);try{Sa.call(a,Sa)}catch{return!0}return a instanceof WeakMap}catch{}return!1}function $0(a){if(!$f||!a||typeof a!="object")return!1;try{return $f.call(a),!0}catch{}return!1}function O0(a){if(!Tn||!a||typeof a!="object")return!1;try{Tn.call(a);try{Sn.call(a)}catch{return!0}return a instanceof Set}catch{}return!1}function q0(a){if(!Sa||!a||typeof a!="object")return!1;try{Sa.call(a,Sa);try{Aa.call(a,Aa)}catch{return!0}return a instanceof WeakSet}catch{}return!1}function R0(a){return!a||typeof a!="object"?!1:typeof HTMLElement<"u"&&a instanceof HTMLElement?!0:typeof a.nodeName=="string"&&typeof a.getAttribute=="function"}function Wf(a,t){if(a.length>t.maxStringLength){var e=a.length-t.maxStringLength,o="... "+e+" more character"+(e>1?"s":"");return Wf(Po.call(a,0,t.maxStringLength),t)+o}var r=b0[t.quoteStyle||"single"];r.lastIndex=0;var s=Zt.call(Zt.call(a,r,"\\$1"),/[\x00-\x1f]/g,I0);return Bf(s,"single",t)}function I0(a){var t=a.charCodeAt(0),e={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return e?"\\"+e:"\\x"+(t<16?"0":"")+m0.call(t.toString(16))}function wa(a){return"Object("+a+")"}function yo(a){return a+" { ? }"}function jf(a,t,e,o){var r=o?So(e,o):$t.call(e,", ");return a+" ("+t+") {"+r+"}"}function L0(a){for(var t=0;t<a.length;t++)if(Gf(a[t],`
`)>=0)return!1;return!0}function M0(a,t){var e;if(a.indent==="	")e="	";else if(typeof a.indent=="number"&&a.indent>0)e=$t.call(Array(a.indent+1)," ");else return null;return{base:e,prev:$t.call(Array(t+1),e)}}function So(a,t){if(a.length===0)return"";var e=`
`+t.prev+t.base;return e+$t.call(a,","+e)+`
`+t.prev}function An(a,t){var e=Ao(a),o=[];if(e){o.length=a.length;for(var r=0;r<a.length;r++)o[r]=Nt(a,r)?t(a[r],a):""}var s=typeof bo=="function"?bo(a):[],n;if(Ur){n={};for(var c=0;c<s.length;c++)n["$"+s[c]]=s[c]}for(var l in a)Nt(a,l)&&(e&&String(Number(l))===l&&l<a.length||Ur&&n["$"+l]instanceof Symbol||(kf.call(/[^\w$]/,l)?o.push(t(l,a)+": "+t(a[l],a)):o.push(l+": "+t(a[l],a))));if(typeof bo=="function")for(var h=0;h<s.length;h++)Df.call(a,s[h])&&o.push("["+t(s[h])+"]: "+t(a[s[h]],a));return o}});var Hf=F((KA,Kf)=>{"use strict";var F0=Ea(),N0=br(),En=function(a,t,e){for(var o=a,r;(r=o.next)!=null;o=r)if(r.key===t)return o.next=r.next,e||(r.next=a.next,a.next=r),r},j0=function(a,t){if(a){var e=En(a,t);return e&&e.value}},k0=function(a,t,e){var o=En(a,t);o?o.value=e:a.next={key:t,next:a.next,value:e}},D0=function(a,t){return a?!!En(a,t):!1},U0=function(a,t){if(a)return En(a,t,!0)};Kf.exports=function(){var t,e={assert:function(o){if(!e.has(o))throw new N0("Side channel does not contain "+F0(o))},delete:function(o){var r=t&&t.next,s=U0(t,o);return s&&r&&r===s&&(t=void 0),!!s},get:function(o){return j0(t,o)},has:function(o){return D0(t,o)},set:function(o,r){t||(t={next:void 0}),k0(t,o,r)}};return e}});var _o=F((HA,Jf)=>{"use strict";Jf.exports=Object});var Qf=F((JA,Yf)=>{"use strict";Yf.exports=Error});var Xf=F((YA,Zf)=>{"use strict";Zf.exports=EvalError});var tp=F((QA,ep)=>{"use strict";ep.exports=RangeError});var ap=F((ZA,rp)=>{"use strict";rp.exports=ReferenceError});var sp=F((XA,np)=>{"use strict";np.exports=SyntaxError});var ip=F((eS,op)=>{"use strict";op.exports=URIError});var lp=F((tS,cp)=>{"use strict";cp.exports=Math.abs});var fp=F((rS,up)=>{"use strict";up.exports=Math.floor});var dp=F((aS,pp)=>{"use strict";pp.exports=Math.max});var mp=F((nS,hp)=>{"use strict";hp.exports=Math.min});var bp=F((sS,gp)=>{"use strict";gp.exports=Math.pow});var xp=F((oS,yp)=>{"use strict";yp.exports=Math.round});var wp=F((iS,vp)=>{"use strict";vp.exports=Number.isNaN||function(t){return t!==t}});var Sp=F((cS,Ap)=>{"use strict";var B0=wp();Ap.exports=function(t){return B0(t)||t===0?t:t<0?-1:1}});var Ep=F((lS,Tp)=>{"use strict";Tp.exports=Object.getOwnPropertyDescriptor});var Co=F((uS,Pp)=>{"use strict";var Pn=Ep();if(Pn)try{Pn([],"length")}catch{Pn=null}Pp.exports=Pn});var Cp=F((fS,_p)=>{"use strict";var _n=Object.defineProperty||!1;if(_n)try{_n({},"a",{value:1})}catch{_n=!1}_p.exports=_n});var Op=F((pS,$p)=>{"use strict";$p.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),o=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(o)!=="[object Symbol]")return!1;var r=42;t[e]=r;for(var s in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var n=Object.getOwnPropertySymbols(t);if(n.length!==1||n[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(t,e);if(c.value!==r||c.enumerable!==!0)return!1}return!0}});var Ip=F((dS,Rp)=>{"use strict";var qp=typeof Symbol<"u"&&Symbol,z0=Op();Rp.exports=function(){return typeof qp!="function"||typeof Symbol!="function"||typeof qp("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:z0()}});var $o=F((hS,Lp)=>{"use strict";Lp.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null});var Oo=F((mS,Mp)=>{"use strict";var G0=_o();Mp.exports=G0.getPrototypeOf||null});var jp=F((gS,Np)=>{"use strict";var W0="Function.prototype.bind called on incompatible ",V0=Object.prototype.toString,K0=Math.max,H0="[object Function]",Fp=function(t,e){for(var o=[],r=0;r<t.length;r+=1)o[r]=t[r];for(var s=0;s<e.length;s+=1)o[s+t.length]=e[s];return o},J0=function(t,e){for(var o=[],r=e||0,s=0;r<t.length;r+=1,s+=1)o[s]=t[r];return o},Y0=function(a,t){for(var e="",o=0;o<a.length;o+=1)e+=a[o],o+1<a.length&&(e+=t);return e};Np.exports=function(t){var e=this;if(typeof e!="function"||V0.apply(e)!==H0)throw new TypeError(W0+e);for(var o=J0(arguments,1),r,s=function(){if(this instanceof r){var b=e.apply(this,Fp(o,arguments));return Object(b)===b?b:this}return e.apply(t,Fp(o,arguments))},n=K0(0,e.length-o.length),c=[],l=0;l<n;l++)c[l]="$"+l;if(r=Function("binder","return function ("+Y0(c,",")+"){ return binder.apply(this,arguments); }")(s),e.prototype){var h=function(){};h.prototype=e.prototype,r.prototype=new h,h.prototype=null}return r}});var Pa=F((bS,kp)=>{"use strict";var Q0=jp();kp.exports=Function.prototype.bind||Q0});var Cn=F((yS,Dp)=>{"use strict";Dp.exports=Function.prototype.call});var qo=F((xS,Up)=>{"use strict";Up.exports=Function.prototype.apply});var zp=F((vS,Bp)=>{"use strict";Bp.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply});var Wp=F((wS,Gp)=>{"use strict";var Z0=Pa(),X0=qo(),e2=Cn(),t2=zp();Gp.exports=t2||Z0.call(e2,X0)});var Ro=F((AS,Vp)=>{"use strict";var r2=Pa(),a2=br(),n2=Cn(),s2=Wp();Vp.exports=function(t){if(t.length<1||typeof t[0]!="function")throw new a2("a function is required");return s2(r2,n2,t)}});var Zp=F((SS,Qp)=>{"use strict";var o2=Ro(),Kp=Co(),Jp;try{Jp=[].__proto__===Array.prototype}catch(a){if(!a||typeof a!="object"||!("code"in a)||a.code!=="ERR_PROTO_ACCESS")throw a}var Io=!!Jp&&Kp&&Kp(Object.prototype,"__proto__"),Yp=Object,Hp=Yp.getPrototypeOf;Qp.exports=Io&&typeof Io.get=="function"?o2([Io.get]):typeof Hp=="function"?function(t){return Hp(t==null?t:Yp(t))}:!1});var ad=F((TS,rd)=>{"use strict";var Xp=$o(),ed=Oo(),td=Zp();rd.exports=Xp?function(t){return Xp(t)}:ed?function(t){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("getProto: not an object");return ed(t)}:td?function(t){return td(t)}:null});var sd=F((ES,nd)=>{"use strict";var i2=Function.prototype.call,c2=Object.prototype.hasOwnProperty,l2=Pa();nd.exports=l2.call(i2,c2)});var qn=F((PS,fd)=>{"use strict";var Ie,u2=_o(),f2=Qf(),p2=Xf(),d2=tp(),h2=ap(),Wr=sp(),Gr=br(),m2=ip(),g2=lp(),b2=fp(),y2=dp(),x2=mp(),v2=bp(),w2=xp(),A2=Sp(),ld=Function,Lo=function(a){try{return ld('"use strict"; return ('+a+").constructor;")()}catch{}},_a=Co(),S2=Cp(),Mo=function(){throw new Gr},T2=_a?function(){try{return arguments.callee,Mo}catch{try{return _a(arguments,"callee").get}catch{return Mo}}}():Mo,Br=Ip()(),lt=ad(),E2=Oo(),P2=$o(),ud=qo(),Ca=Cn(),zr={},_2=typeof Uint8Array>"u"||!lt?Ie:lt(Uint8Array),xr={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Ie:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ie:ArrayBuffer,"%ArrayIteratorPrototype%":Br&&lt?lt([][Symbol.iterator]()):Ie,"%AsyncFromSyncIteratorPrototype%":Ie,"%AsyncFunction%":zr,"%AsyncGenerator%":zr,"%AsyncGeneratorFunction%":zr,"%AsyncIteratorPrototype%":zr,"%Atomics%":typeof Atomics>"u"?Ie:Atomics,"%BigInt%":typeof BigInt>"u"?Ie:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ie:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ie:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ie:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":f2,"%eval%":eval,"%EvalError%":p2,"%Float16Array%":typeof Float16Array>"u"?Ie:Float16Array,"%Float32Array%":typeof Float32Array>"u"?Ie:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ie:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ie:FinalizationRegistry,"%Function%":ld,"%GeneratorFunction%":zr,"%Int8Array%":typeof Int8Array>"u"?Ie:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ie:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ie:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Br&&lt?lt(lt([][Symbol.iterator]())):Ie,"%JSON%":typeof JSON=="object"?JSON:Ie,"%Map%":typeof Map>"u"?Ie:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Br||!lt?Ie:lt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":u2,"%Object.getOwnPropertyDescriptor%":_a,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ie:Promise,"%Proxy%":typeof Proxy>"u"?Ie:Proxy,"%RangeError%":d2,"%ReferenceError%":h2,"%Reflect%":typeof Reflect>"u"?Ie:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ie:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Br||!lt?Ie:lt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ie:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Br&&lt?lt(""[Symbol.iterator]()):Ie,"%Symbol%":Br?Symbol:Ie,"%SyntaxError%":Wr,"%ThrowTypeError%":T2,"%TypedArray%":_2,"%TypeError%":Gr,"%Uint8Array%":typeof Uint8Array>"u"?Ie:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ie:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ie:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ie:Uint32Array,"%URIError%":m2,"%WeakMap%":typeof WeakMap>"u"?Ie:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ie:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ie:WeakSet,"%Function.prototype.call%":Ca,"%Function.prototype.apply%":ud,"%Object.defineProperty%":S2,"%Object.getPrototypeOf%":E2,"%Math.abs%":g2,"%Math.floor%":b2,"%Math.max%":y2,"%Math.min%":x2,"%Math.pow%":v2,"%Math.round%":w2,"%Math.sign%":A2,"%Reflect.getPrototypeOf%":P2};if(lt)try{null.error}catch(a){od=lt(lt(a)),xr["%Error.prototype%"]=od}var od,C2=function a(t){var e;if(t==="%AsyncFunction%")e=Lo("async function () {}");else if(t==="%GeneratorFunction%")e=Lo("function* () {}");else if(t==="%AsyncGeneratorFunction%")e=Lo("async function* () {}");else if(t==="%AsyncGenerator%"){var o=a("%AsyncGeneratorFunction%");o&&(e=o.prototype)}else if(t==="%AsyncIteratorPrototype%"){var r=a("%AsyncGenerator%");r&&lt&&(e=lt(r.prototype))}return xr[t]=e,e},id={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},$a=Pa(),$n=sd(),$2=$a.call(Ca,Array.prototype.concat),O2=$a.call(ud,Array.prototype.splice),cd=$a.call(Ca,String.prototype.replace),On=$a.call(Ca,String.prototype.slice),q2=$a.call(Ca,RegExp.prototype.exec),R2=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,I2=/\\(\\)?/g,L2=function(t){var e=On(t,0,1),o=On(t,-1);if(e==="%"&&o!=="%")throw new Wr("invalid intrinsic syntax, expected closing `%`");if(o==="%"&&e!=="%")throw new Wr("invalid intrinsic syntax, expected opening `%`");var r=[];return cd(t,R2,function(s,n,c,l){r[r.length]=c?cd(l,I2,"$1"):n||s}),r},M2=function(t,e){var o=t,r;if($n(id,o)&&(r=id[o],o="%"+r[0]+"%"),$n(xr,o)){var s=xr[o];if(s===zr&&(s=C2(o)),typeof s>"u"&&!e)throw new Gr("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:o,value:s}}throw new Wr("intrinsic "+t+" does not exist!")};fd.exports=function(t,e){if(typeof t!="string"||t.length===0)throw new Gr("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new Gr('"allowMissing" argument must be a boolean');if(q2(/^%?[^%]*%?$/,t)===null)throw new Wr("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var o=L2(t),r=o.length>0?o[0]:"",s=M2("%"+r+"%",e),n=s.name,c=s.value,l=!1,h=s.alias;h&&(r=h[0],O2(o,$2([0,1],h)));for(var b=1,T=!0;b<o.length;b+=1){var A=o[b],P=On(A,0,1),H=On(A,-1);if((P==='"'||P==="'"||P==="`"||H==='"'||H==="'"||H==="`")&&P!==H)throw new Wr("property names with quotes must have matching quotes");if((A==="constructor"||!T)&&(l=!0),r+="."+A,n="%"+r+"%",$n(xr,n))c=xr[n];else if(c!=null){if(!(A in c)){if(!e)throw new Gr("base intrinsic for "+t+" exists, but the property is not available.");return}if(_a&&b+1>=o.length){var me=_a(c,A);T=!!me,T&&"get"in me&&!("originalValue"in me.get)?c=me.get:c=c[A]}else T=$n(c,A),c=c[A];T&&!l&&(xr[n]=c)}}return c}});var Fo=F((_S,hd)=>{"use strict";var pd=qn(),dd=Ro(),F2=dd([pd("%String.prototype.indexOf%")]);hd.exports=function(t,e){var o=pd(t,!!e);return typeof o=="function"&&F2(t,".prototype.")>-1?dd([o]):o}});var No=F((CS,gd)=>{"use strict";var N2=qn(),Oa=Fo(),j2=Ea(),k2=br(),md=N2("%Map%",!0),D2=Oa("Map.prototype.get",!0),U2=Oa("Map.prototype.set",!0),B2=Oa("Map.prototype.has",!0),z2=Oa("Map.prototype.delete",!0),G2=Oa("Map.prototype.size",!0);gd.exports=!!md&&function(){var t,e={assert:function(o){if(!e.has(o))throw new k2("Side channel does not contain "+j2(o))},delete:function(o){if(t){var r=z2(t,o);return G2(t)===0&&(t=void 0),r}return!1},get:function(o){if(t)return D2(t,o)},has:function(o){return t?B2(t,o):!1},set:function(o,r){t||(t=new md),U2(t,o,r)}};return e}});var yd=F(($S,bd)=>{"use strict";var W2=qn(),In=Fo(),V2=Ea(),Rn=No(),K2=br(),Vr=W2("%WeakMap%",!0),H2=In("WeakMap.prototype.get",!0),J2=In("WeakMap.prototype.set",!0),Y2=In("WeakMap.prototype.has",!0),Q2=In("WeakMap.prototype.delete",!0);bd.exports=Vr?function(){var t,e,o={assert:function(r){if(!o.has(r))throw new K2("Side channel does not contain "+V2(r))},delete:function(r){if(Vr&&r&&(typeof r=="object"||typeof r=="function")){if(t)return Q2(t,r)}else if(Rn&&e)return e.delete(r);return!1},get:function(r){return Vr&&r&&(typeof r=="object"||typeof r=="function")&&t?H2(t,r):e&&e.get(r)},has:function(r){return Vr&&r&&(typeof r=="object"||typeof r=="function")&&t?Y2(t,r):!!e&&e.has(r)},set:function(r,s){Vr&&r&&(typeof r=="object"||typeof r=="function")?(t||(t=new Vr),J2(t,r,s)):Rn&&(e||(e=Rn()),e.set(r,s))}};return o}:Rn});var vd=F((OS,xd)=>{"use strict";var Z2=br(),X2=Ea(),ex=Hf(),tx=No(),rx=yd(),ax=rx||tx||ex;xd.exports=function(){var t,e={assert:function(o){if(!e.has(o))throw new Z2("Side channel does not contain "+X2(o))},delete:function(o){return!!t&&t.delete(o)},get:function(o){return t&&t.get(o)},has:function(o){return!!t&&t.has(o)},set:function(o,r){t||(t=ax()),t.set(o,r)}};return e}});var Ln=F((qS,wd)=>{"use strict";var nx=String.prototype.replace,sx=/%20/g,jo={RFC1738:"RFC1738",RFC3986:"RFC3986"};wd.exports={default:jo.RFC3986,formatters:{RFC1738:function(a){return nx.call(a,sx,"+")},RFC3986:function(a){return String(a)}},RFC1738:jo.RFC1738,RFC3986:jo.RFC3986}});var Uo=F((RS,Sd)=>{"use strict";var ox=Ln(),ko=Object.prototype.hasOwnProperty,vr=Array.isArray,Ot=function(){for(var a=[],t=0;t<256;++t)a.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return a}(),ix=function(t){for(;t.length>1;){var e=t.pop(),o=e.obj[e.prop];if(vr(o)){for(var r=[],s=0;s<o.length;++s)typeof o[s]<"u"&&r.push(o[s]);e.obj[e.prop]=r}}},Ad=function(t,e){for(var o=e&&e.plainObjects?{__proto__:null}:{},r=0;r<t.length;++r)typeof t[r]<"u"&&(o[r]=t[r]);return o},cx=function a(t,e,o){if(!e)return t;if(typeof e!="object"&&typeof e!="function"){if(vr(t))t.push(e);else if(t&&typeof t=="object")(o&&(o.plainObjects||o.allowPrototypes)||!ko.call(Object.prototype,e))&&(t[e]=!0);else return[t,e];return t}if(!t||typeof t!="object")return[t].concat(e);var r=t;return vr(t)&&!vr(e)&&(r=Ad(t,o)),vr(t)&&vr(e)?(e.forEach(function(s,n){if(ko.call(t,n)){var c=t[n];c&&typeof c=="object"&&s&&typeof s=="object"?t[n]=a(c,s,o):t.push(s)}else t[n]=s}),t):Object.keys(e).reduce(function(s,n){var c=e[n];return ko.call(s,n)?s[n]=a(s[n],c,o):s[n]=c,s},r)},lx=function(t,e){return Object.keys(e).reduce(function(o,r){return o[r]=e[r],o},t)},ux=function(a,t,e){var o=a.replace(/\+/g," ");if(e==="iso-8859-1")return o.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(o)}catch{return o}},Do=1024,fx=function(t,e,o,r,s){if(t.length===0)return t;var n=t;if(typeof t=="symbol"?n=Symbol.prototype.toString.call(t):typeof t!="string"&&(n=String(t)),o==="iso-8859-1")return escape(n).replace(/%u[0-9a-f]{4}/gi,function(P){return"%26%23"+parseInt(P.slice(2),16)+"%3B"});for(var c="",l=0;l<n.length;l+=Do){for(var h=n.length>=Do?n.slice(l,l+Do):n,b=[],T=0;T<h.length;++T){var A=h.charCodeAt(T);if(A===45||A===46||A===95||A===126||A>=48&&A<=57||A>=65&&A<=90||A>=97&&A<=122||s===ox.RFC1738&&(A===40||A===41)){b[b.length]=h.charAt(T);continue}if(A<128){b[b.length]=Ot[A];continue}if(A<2048){b[b.length]=Ot[192|A>>6]+Ot[128|A&63];continue}if(A<55296||A>=57344){b[b.length]=Ot[224|A>>12]+Ot[128|A>>6&63]+Ot[128|A&63];continue}T+=1,A=65536+((A&1023)<<10|h.charCodeAt(T)&1023),b[b.length]=Ot[240|A>>18]+Ot[128|A>>12&63]+Ot[128|A>>6&63]+Ot[128|A&63]}c+=b.join("")}return c},px=function(t){for(var e=[{obj:{o:t},prop:"o"}],o=[],r=0;r<e.length;++r)for(var s=e[r],n=s.obj[s.prop],c=Object.keys(n),l=0;l<c.length;++l){var h=c[l],b=n[h];typeof b=="object"&&b!==null&&o.indexOf(b)===-1&&(e.push({obj:n,prop:h}),o.push(b))}return ix(e),t},dx=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},hx=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},mx=function(t,e){return[].concat(t,e)},gx=function(t,e){if(vr(t)){for(var o=[],r=0;r<t.length;r+=1)o.push(e(t[r]));return o}return e(t)};Sd.exports={arrayToObject:Ad,assign:lx,combine:mx,compact:px,decode:ux,encode:fx,isBuffer:hx,isRegExp:dx,maybeMap:gx,merge:cx}});var $d=F((IS,Cd)=>{"use strict";var Ed=vd(),Mn=Uo(),qa=Ln(),bx=Object.prototype.hasOwnProperty,Pd={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},qt=Array.isArray,yx=Array.prototype.push,_d=function(a,t){yx.apply(a,qt(t)?t:[t])},xx=Date.prototype.toISOString,Td=qa.default,at={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Mn.encode,encodeValuesOnly:!1,filter:void 0,format:Td,formatter:qa.formatters[Td],indices:!1,serializeDate:function(t){return xx.call(t)},skipNulls:!1,strictNullHandling:!1},vx=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},Bo={},wx=function a(t,e,o,r,s,n,c,l,h,b,T,A,P,H,me,ye,_e,ie){for(var ne=t,Pe=ie,ve=0,Se=!1;(Pe=Pe.get(Bo))!==void 0&&!Se;){var je=Pe.get(t);if(ve+=1,typeof je<"u"){if(je===ve)throw new RangeError("Cyclic object value");Se=!0}typeof Pe.get(Bo)>"u"&&(ve=0)}if(typeof b=="function"?ne=b(e,ne):ne instanceof Date?ne=P(ne):o==="comma"&&qt(ne)&&(ne=Mn.maybeMap(ne,function(E){return E instanceof Date?P(E):E})),ne===null){if(n)return h&&!ye?h(e,at.encoder,_e,"key",H):e;ne=""}if(vx(ne)||Mn.isBuffer(ne)){if(h){var fe=ye?e:h(e,at.encoder,_e,"key",H);return[me(fe)+"="+me(h(ne,at.encoder,_e,"value",H))]}return[me(e)+"="+me(String(ne))]}var x=[];if(typeof ne>"u")return x;var q;if(o==="comma"&&qt(ne))ye&&h&&(ne=Mn.maybeMap(ne,h)),q=[{value:ne.length>0?ne.join(",")||null:void 0}];else if(qt(b))q=b;else{var J=Object.keys(ne);q=T?J.sort(T):J}var j=l?String(e).replace(/\./g,"%2E"):String(e),B=r&&qt(ne)&&ne.length===1?j+"[]":j;if(s&&qt(ne)&&ne.length===0)return B+"[]";for(var te=0;te<q.length;++te){var Q=q[te],U=typeof Q=="object"&&Q&&typeof Q.value<"u"?Q.value:ne[Q];if(!(c&&U===null)){var Re=A&&l?String(Q).replace(/\./g,"%2E"):String(Q),Z=qt(ne)?typeof o=="function"?o(B,Re):B:B+(A?"."+Re:"["+Re+"]");ie.set(t,ve);var y=Ed();y.set(Bo,ie),_d(x,a(U,Z,o,r,s,n,c,l,o==="comma"&&ye&&qt(ne)?null:h,b,T,A,P,H,me,ye,_e,y))}}return x},Ax=function(t){if(!t)return at;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var e=t.charset||at.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var o=qa.default;if(typeof t.format<"u"){if(!bx.call(qa.formatters,t.format))throw new TypeError("Unknown format option provided.");o=t.format}var r=qa.formatters[o],s=at.filter;(typeof t.filter=="function"||qt(t.filter))&&(s=t.filter);var n;if(t.arrayFormat in Pd?n=t.arrayFormat:"indices"in t?n=t.indices?"indices":"repeat":n=at.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var c=typeof t.allowDots>"u"?t.encodeDotInKeys===!0?!0:at.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:at.addQueryPrefix,allowDots:c,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:at.allowEmptyArrays,arrayFormat:n,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:at.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?at.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:at.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:at.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:at.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:at.encodeValuesOnly,filter:s,format:o,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:at.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:at.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:at.strictNullHandling}};Cd.exports=function(a,t){var e=a,o=Ax(t),r,s;typeof o.filter=="function"?(s=o.filter,e=s("",e)):qt(o.filter)&&(s=o.filter,r=s);var n=[];if(typeof e!="object"||e===null)return"";var c=Pd[o.arrayFormat],l=c==="comma"&&o.commaRoundTrip;r||(r=Object.keys(e)),o.sort&&r.sort(o.sort);for(var h=Ed(),b=0;b<r.length;++b){var T=r[b],A=e[T];o.skipNulls&&A===null||_d(n,wx(A,T,c,l,o.allowEmptyArrays,o.strictNullHandling,o.skipNulls,o.encodeDotInKeys,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,h))}var P=n.join(o.delimiter),H=o.addQueryPrefix===!0?"?":"";return o.charsetSentinel&&(o.charset==="iso-8859-1"?H+="utf8=%26%2310003%3B&":H+="utf8=%E2%9C%93&"),P.length>0?H+P:""}});var Id=F((LS,Rd)=>{"use strict";var wr=Uo(),zo=Object.prototype.hasOwnProperty,Od=Array.isArray,Ke={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:wr.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},Sx=function(a){return a.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},qd=function(a,t,e){if(a&&typeof a=="string"&&t.comma&&a.indexOf(",")>-1)return a.split(",");if(t.throwOnLimitExceeded&&e>=t.arrayLimit)throw new RangeError("Array limit exceeded. Only "+t.arrayLimit+" element"+(t.arrayLimit===1?"":"s")+" allowed in an array.");return a},Tx="utf8=%26%2310003%3B",Ex="utf8=%E2%9C%93",Px=function(t,e){var o={__proto__:null},r=e.ignoreQueryPrefix?t.replace(/^\?/,""):t;r=r.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var s=e.parameterLimit===1/0?void 0:e.parameterLimit,n=r.split(e.delimiter,e.throwOnLimitExceeded?s+1:s);if(e.throwOnLimitExceeded&&n.length>s)throw new RangeError("Parameter limit exceeded. Only "+s+" parameter"+(s===1?"":"s")+" allowed.");var c=-1,l,h=e.charset;if(e.charsetSentinel)for(l=0;l<n.length;++l)n[l].indexOf("utf8=")===0&&(n[l]===Ex?h="utf-8":n[l]===Tx&&(h="iso-8859-1"),c=l,l=n.length);for(l=0;l<n.length;++l)if(l!==c){var b=n[l],T=b.indexOf("]="),A=T===-1?b.indexOf("="):T+1,P,H;A===-1?(P=e.decoder(b,Ke.decoder,h,"key"),H=e.strictNullHandling?null:""):(P=e.decoder(b.slice(0,A),Ke.decoder,h,"key"),H=wr.maybeMap(qd(b.slice(A+1),e,Od(o[P])?o[P].length:0),function(ye){return e.decoder(ye,Ke.decoder,h,"value")})),H&&e.interpretNumericEntities&&h==="iso-8859-1"&&(H=Sx(String(H))),b.indexOf("[]=")>-1&&(H=Od(H)?[H]:H);var me=zo.call(o,P);me&&e.duplicates==="combine"?o[P]=wr.combine(o[P],H):(!me||e.duplicates==="last")&&(o[P]=H)}return o},_x=function(a,t,e,o){var r=0;if(a.length>0&&a[a.length-1]==="[]"){var s=a.slice(0,-1).join("");r=Array.isArray(t)&&t[s]?t[s].length:0}for(var n=o?t:qd(t,e,r),c=a.length-1;c>=0;--c){var l,h=a[c];if(h==="[]"&&e.parseArrays)l=e.allowEmptyArrays&&(n===""||e.strictNullHandling&&n===null)?[]:wr.combine([],n);else{l=e.plainObjects?{__proto__:null}:{};var b=h.charAt(0)==="["&&h.charAt(h.length-1)==="]"?h.slice(1,-1):h,T=e.decodeDotInKeys?b.replace(/%2E/g,"."):b,A=parseInt(T,10);!e.parseArrays&&T===""?l={0:n}:!isNaN(A)&&h!==T&&String(A)===T&&A>=0&&e.parseArrays&&A<=e.arrayLimit?(l=[],l[A]=n):T!=="__proto__"&&(l[T]=n)}n=l}return n},Cx=function(t,e,o,r){if(t){var s=o.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,n=/(\[[^[\]]*])/,c=/(\[[^[\]]*])/g,l=o.depth>0&&n.exec(s),h=l?s.slice(0,l.index):s,b=[];if(h){if(!o.plainObjects&&zo.call(Object.prototype,h)&&!o.allowPrototypes)return;b.push(h)}for(var T=0;o.depth>0&&(l=c.exec(s))!==null&&T<o.depth;){if(T+=1,!o.plainObjects&&zo.call(Object.prototype,l[1].slice(1,-1))&&!o.allowPrototypes)return;b.push(l[1])}if(l){if(o.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+o.depth+" and strictDepth is true");b.push("["+s.slice(l.index)+"]")}return _x(b,e,o,r)}},$x=function(t){if(!t)return Ke;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.decodeDotInKeys<"u"&&typeof t.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(t.decoder!==null&&typeof t.decoder<"u"&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof t.throwOnLimitExceeded<"u"&&typeof t.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var e=typeof t.charset>"u"?Ke.charset:t.charset,o=typeof t.duplicates>"u"?Ke.duplicates:t.duplicates;if(o!=="combine"&&o!=="first"&&o!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var r=typeof t.allowDots>"u"?t.decodeDotInKeys===!0?!0:Ke.allowDots:!!t.allowDots;return{allowDots:r,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Ke.allowEmptyArrays,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:Ke.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:Ke.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:Ke.arrayLimit,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ke.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:Ke.comma,decodeDotInKeys:typeof t.decodeDotInKeys=="boolean"?t.decodeDotInKeys:Ke.decodeDotInKeys,decoder:typeof t.decoder=="function"?t.decoder:Ke.decoder,delimiter:typeof t.delimiter=="string"||wr.isRegExp(t.delimiter)?t.delimiter:Ke.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:Ke.depth,duplicates:o,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:Ke.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:Ke.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:Ke.plainObjects,strictDepth:typeof t.strictDepth=="boolean"?!!t.strictDepth:Ke.strictDepth,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ke.strictNullHandling,throwOnLimitExceeded:typeof t.throwOnLimitExceeded=="boolean"?t.throwOnLimitExceeded:!1}};Rd.exports=function(a,t){var e=$x(t);if(a===""||a===null||typeof a>"u")return e.plainObjects?{__proto__:null}:{};for(var o=typeof a=="string"?Px(a,e):a,r=e.plainObjects?{__proto__:null}:{},s=Object.keys(o),n=0;n<s.length;++n){var c=s[n],l=Cx(c,o[c],e,typeof a=="string");r=wr.merge(r,l,e)}return e.allowSparse===!0?r:wr.compact(r)}});var Md=F((MS,Ld)=>{"use strict";var Ox=$d(),qx=Id(),Rx=Ln();Ld.exports={formats:Rx,parse:qx,stringify:Ox}});var kd=F(Hr=>{"use strict";var Ix=Tf();function At(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Lx=/^([a-z0-9.+-]+:)/i,Mx=/:[0-9]*$/,Fx=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,Nx=["<",">",'"',"`"," ","\r",`
`,"	"],jx=["{","}","|","\\","^","`"].concat(Nx),Go=["'"].concat(jx),Fd=["%","/","?",";","#"].concat(Go),Nd=["/","?","#"],kx=255,jd=/^[+a-z0-9A-Z_-]{0,63}$/,Dx=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Ux={javascript:!0,"javascript:":!0},Wo={javascript:!0,"javascript:":!0},Kr={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Vo=Md();function Ra(a,t,e){if(a&&typeof a=="object"&&a instanceof At)return a;var o=new At;return o.parse(a,t,e),o}At.prototype.parse=function(a,t,e){if(typeof a!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var o=a.indexOf("?"),r=o!==-1&&o<a.indexOf("#")?"?":"#",s=a.split(r),n=/\\/g;s[0]=s[0].replace(n,"/"),a=s.join(r);var c=a;if(c=c.trim(),!e&&a.split("#").length===1){var l=Fx.exec(c);if(l)return this.path=c,this.href=c,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=Vo.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var h=Lx.exec(c);if(h){h=h[0];var b=h.toLowerCase();this.protocol=b,c=c.substr(h.length)}if(e||h||c.match(/^\/\/[^@/]+@[^@/]+/)){var T=c.substr(0,2)==="//";T&&!(h&&Wo[h])&&(c=c.substr(2),this.slashes=!0)}if(!Wo[h]&&(T||h&&!Kr[h])){for(var A=-1,P=0;P<Nd.length;P++){var H=c.indexOf(Nd[P]);H!==-1&&(A===-1||H<A)&&(A=H)}var me,ye;A===-1?ye=c.lastIndexOf("@"):ye=c.lastIndexOf("@",A),ye!==-1&&(me=c.slice(0,ye),c=c.slice(ye+1),this.auth=decodeURIComponent(me)),A=-1;for(var P=0;P<Fd.length;P++){var H=c.indexOf(Fd[P]);H!==-1&&(A===-1||H<A)&&(A=H)}A===-1&&(A=c.length),this.host=c.slice(0,A),c=c.slice(A),this.parseHost(),this.hostname=this.hostname||"";var _e=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!_e)for(var ie=this.hostname.split(/\./),P=0,ne=ie.length;P<ne;P++){var Pe=ie[P];if(Pe&&!Pe.match(jd)){for(var ve="",Se=0,je=Pe.length;Se<je;Se++)Pe.charCodeAt(Se)>127?ve+="x":ve+=Pe[Se];if(!ve.match(jd)){var fe=ie.slice(0,P),x=ie.slice(P+1),q=Pe.match(Dx);q&&(fe.push(q[1]),x.unshift(q[2])),x.length&&(c="/"+x.join(".")+c),this.hostname=fe.join(".");break}}}this.hostname.length>kx?this.hostname="":this.hostname=this.hostname.toLowerCase(),_e||(this.hostname=Ix.toASCII(this.hostname));var J=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+J,this.href+=this.host,_e&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),c[0]!=="/"&&(c="/"+c))}if(!Ux[b])for(var P=0,ne=Go.length;P<ne;P++){var B=Go[P];if(c.indexOf(B)!==-1){var te=encodeURIComponent(B);te===B&&(te=escape(B)),c=c.split(B).join(te)}}var Q=c.indexOf("#");Q!==-1&&(this.hash=c.substr(Q),c=c.slice(0,Q));var U=c.indexOf("?");if(U!==-1?(this.search=c.substr(U),this.query=c.substr(U+1),t&&(this.query=Vo.parse(this.query)),c=c.slice(0,U)):t&&(this.search="",this.query={}),c&&(this.pathname=c),Kr[b]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var J=this.pathname||"",Re=this.search||"";this.path=J+Re}return this.href=this.format(),this};function Bx(a){return typeof a=="string"&&(a=Ra(a)),a instanceof At?a.format():At.prototype.format.call(a)}At.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var t=this.protocol||"",e=this.pathname||"",o=this.hash||"",r=!1,s="";this.host?r=a+this.host:this.hostname&&(r=a+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=Vo.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var n=this.search||s&&"?"+s||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||Kr[t])&&r!==!1?(r="//"+(r||""),e&&e.charAt(0)!=="/"&&(e="/"+e)):r||(r=""),o&&o.charAt(0)!=="#"&&(o="#"+o),n&&n.charAt(0)!=="?"&&(n="?"+n),e=e.replace(/[?#]/g,function(c){return encodeURIComponent(c)}),n=n.replace("#","%23"),t+r+e+n+o};function zx(a,t){return Ra(a,!1,!0).resolve(t)}At.prototype.resolve=function(a){return this.resolveObject(Ra(a,!1,!0)).format()};function Gx(a,t){return a?Ra(a,!1,!0).resolveObject(t):t}At.prototype.resolveObject=function(a){if(typeof a=="string"){var t=new At;t.parse(a,!1,!0),a=t}for(var e=new At,o=Object.keys(this),r=0;r<o.length;r++){var s=o[r];e[s]=this[s]}if(e.hash=a.hash,a.href==="")return e.href=e.format(),e;if(a.slashes&&!a.protocol){for(var n=Object.keys(a),c=0;c<n.length;c++){var l=n[c];l!=="protocol"&&(e[l]=a[l])}return Kr[e.protocol]&&e.hostname&&!e.pathname&&(e.pathname="/",e.path=e.pathname),e.href=e.format(),e}if(a.protocol&&a.protocol!==e.protocol){if(!Kr[a.protocol]){for(var h=Object.keys(a),b=0;b<h.length;b++){var T=h[b];e[T]=a[T]}return e.href=e.format(),e}if(e.protocol=a.protocol,!a.host&&!Wo[a.protocol]){for(var ne=(a.pathname||"").split("/");ne.length&&!(a.host=ne.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),ne[0]!==""&&ne.unshift(""),ne.length<2&&ne.unshift(""),e.pathname=ne.join("/")}else e.pathname=a.pathname;if(e.search=a.search,e.query=a.query,e.host=a.host||"",e.auth=a.auth,e.hostname=a.hostname||a.host,e.port=a.port,e.pathname||e.search){var A=e.pathname||"",P=e.search||"";e.path=A+P}return e.slashes=e.slashes||a.slashes,e.href=e.format(),e}var H=e.pathname&&e.pathname.charAt(0)==="/",me=a.host||a.pathname&&a.pathname.charAt(0)==="/",ye=me||H||e.host&&a.pathname,_e=ye,ie=e.pathname&&e.pathname.split("/")||[],ne=a.pathname&&a.pathname.split("/")||[],Pe=e.protocol&&!Kr[e.protocol];if(Pe&&(e.hostname="",e.port=null,e.host&&(ie[0]===""?ie[0]=e.host:ie.unshift(e.host)),e.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(ne[0]===""?ne[0]=a.host:ne.unshift(a.host)),a.host=null),ye=ye&&(ne[0]===""||ie[0]==="")),me)e.host=a.host||a.host===""?a.host:e.host,e.hostname=a.hostname||a.hostname===""?a.hostname:e.hostname,e.search=a.search,e.query=a.query,ie=ne;else if(ne.length)ie||(ie=[]),ie.pop(),ie=ie.concat(ne),e.search=a.search,e.query=a.query;else if(a.search!=null){if(Pe){e.host=ie.shift(),e.hostname=e.host;var ve=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;ve&&(e.auth=ve.shift(),e.hostname=ve.shift(),e.host=e.hostname)}return e.search=a.search,e.query=a.query,(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!ie.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var Se=ie.slice(-1)[0],je=(e.host||a.host||ie.length>1)&&(Se==="."||Se==="..")||Se==="",fe=0,x=ie.length;x>=0;x--)Se=ie[x],Se==="."?ie.splice(x,1):Se===".."?(ie.splice(x,1),fe++):fe&&(ie.splice(x,1),fe--);if(!ye&&!_e)for(;fe--;fe)ie.unshift("..");ye&&ie[0]!==""&&(!ie[0]||ie[0].charAt(0)!=="/")&&ie.unshift(""),je&&ie.join("/").substr(-1)!=="/"&&ie.push("");var q=ie[0]===""||ie[0]&&ie[0].charAt(0)==="/";if(Pe){e.hostname=q?"":ie.length?ie.shift():"",e.host=e.hostname;var ve=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;ve&&(e.auth=ve.shift(),e.hostname=ve.shift(),e.host=e.hostname)}return ye=ye||e.host&&ie.length,ye&&!q&&ie.unshift(""),ie.length>0?e.pathname=ie.join("/"):(e.pathname=null,e.path=null),(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=a.auth||e.auth,e.slashes=e.slashes||a.slashes,e.href=e.format(),e};At.prototype.parseHost=function(){var a=this.host,t=Mx.exec(a);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),a=a.substr(0,a.length-t.length)),a&&(this.hostname=a)};Hr.parse=Ra;Hr.resolve=zx;Hr.resolveObject=Gx;Hr.format=Bx;Hr.Url=At});var Ud=F((NS,Dd)=>{"use strict";Dd.exports=typeof URL=="function"?URL:kd().URL});var Ma=F(Rt=>{var tr=Ud();function Wx(a,t,e){if(t in a)return a[t];if(arguments.length===3)return e;throw new Error('"'+t+'" is a required argument.')}Rt.getArg=Wx;var zd=function(){return!("__proto__"in Object.create(null))}();function Gd(a){return a}function Vx(a){return Wd(a)?"$"+a:a}Rt.toSetString=zd?Gd:Vx;function Kx(a){return Wd(a)?a.slice(1):a}Rt.fromSetString=zd?Gd:Kx;function Wd(a){if(!a)return!1;let t=a.length;if(t<9||a.charCodeAt(t-1)!==95||a.charCodeAt(t-2)!==95||a.charCodeAt(t-3)!==111||a.charCodeAt(t-4)!==116||a.charCodeAt(t-5)!==111||a.charCodeAt(t-6)!==114||a.charCodeAt(t-7)!==112||a.charCodeAt(t-8)!==95||a.charCodeAt(t-9)!==95)return!1;for(let e=t-10;e>=0;e--)if(a.charCodeAt(e)!==36)return!1;return!0}function Bd(a,t){return a===t?0:a===null?1:t===null?-1:a>t?1:-1}function Hx(a,t){let e=a.generatedLine-t.generatedLine;return e!==0||(e=a.generatedColumn-t.generatedColumn,e!==0)||(e=Bd(a.source,t.source),e!==0)||(e=a.originalLine-t.originalLine,e!==0)||(e=a.originalColumn-t.originalColumn,e!==0)?e:Bd(a.name,t.name)}Rt.compareByGeneratedPositionsInflated=Hx;function Jx(a){return JSON.parse(a.replace(/^\)]}'[^\n]*\n/,""))}Rt.parseSourceMapInput=Jx;var Ho="http:",Ia=`${Ho}//host`;function Jo(a){return t=>{let e=Jr(t),o=Yo(t),r=new tr(t,o);a(r);let s=r.toString();return e==="absolute"?s:e==="scheme-relative"?s.slice(Ho.length):e==="path-absolute"?s.slice(Ia.length):Qo(o,s)}}function er(a,t){return new tr(a,t).toString()}function Yx(a,t){let e=0;do{let o=a+e++;if(t.indexOf(o)===-1)return o}while(!0)}function Yo(a){let t=a.split("..").length-1,e=Yx("p",a),o=`${Ia}/`;for(let r=0;r<t;r++)o+=`${e}/`;return o}var Qx=/^[A-Za-z0-9\+\-\.]+:/;function Jr(a){return a[0]==="/"?a[1]==="/"?"scheme-relative":"path-absolute":Qx.test(a)?"absolute":"path-relative"}function Qo(a,t){typeof a=="string"&&(a=new tr(a)),typeof t=="string"&&(t=new tr(t));let e=t.pathname.split("/"),o=a.pathname.split("/");for(o.length>0&&!o[o.length-1]&&o.pop();e.length>0&&o.length>0&&e[0]===o[0];)e.shift(),o.shift();return o.map(()=>"..").concat(e).join("/")+t.search+t.hash}var Zx=Jo(a=>{a.pathname=a.pathname.replace(/\/?$/,"/")}),Xx=Jo(a=>{a.href=new tr(".",a.toString()).toString()}),La=Jo(a=>{});Rt.normalize=La;function Ko(a,t){let e=Jr(t),o=Jr(a);if(a=Zx(a),e==="absolute")return er(t,void 0);if(o==="absolute")return er(t,a);if(e==="scheme-relative")return La(t);if(o==="scheme-relative")return er(t,er(a,Ia)).slice(Ho.length);if(e==="path-absolute")return La(t);if(o==="path-absolute")return er(t,er(a,Ia)).slice(Ia.length);let r=Yo(t+a),s=er(t,er(a,r));return Qo(r,s)}Rt.join=Ko;function ev(a,t){let e=tv(a,t);return typeof e=="string"?e:La(t)}Rt.relative=ev;function tv(a,t){if(Jr(a)!==Jr(t))return null;let o=Yo(a+t),r=new tr(a,o),s=new tr(t,o);try{new tr("",s.toString())}catch{return null}return s.protocol!==r.protocol||s.user!==r.user||s.password!==r.password||s.hostname!==r.hostname||s.port!==r.port?null:Qo(r,s)}function rv(a,t,e){a&&Jr(t)==="path-absolute"&&(t=t.replace(/^\//,""));let o=La(t||"");return a&&(o=Ko(a,o)),e&&(o=Ko(Xx(e),o)),o}Rt.computeSourceURL=rv});var Xo=F(Vd=>{var Zo=class a{constructor(){this._array=[],this._set=new Map}static fromArray(t,e){let o=new a;for(let r=0,s=t.length;r<s;r++)o.add(t[r],e);return o}size(){return this._set.size}add(t,e){let o=this.has(t),r=this._array.length;(!o||e)&&this._array.push(t),o||this._set.set(t,r)}has(t){return this._set.has(t)}indexOf(t){let e=this._set.get(t);if(e>=0)return e;throw new Error('"'+t+'" is not in the set.')}at(t){if(t>=0&&t<this._array.length)return this._array[t];throw new Error("No element indexed by "+t)}toArray(){return this._array.slice()}};Vd.ArraySet=Zo});var Jd=F(Hd=>{var Kd=Ma();function av(a,t){let e=a.generatedLine,o=t.generatedLine,r=a.generatedColumn,s=t.generatedColumn;return o>e||o==e&&s>=r||Kd.compareByGeneratedPositionsInflated(a,t)<=0}var ei=class{constructor(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}unsortedForEach(t,e){this._array.forEach(t,e)}add(t){av(this._last,t)?(this._last=t,this._array.push(t)):(this._sorted=!1,this._array.push(t))}toArray(){return this._sorted||(this._array.sort(Kd.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}};Hd.MappingList=ei});var ti=F(Yd=>{var Fa=ho(),et=Ma(),Fn=Xo().ArraySet,nv=Jd().MappingList,Nn=class a{constructor(t){t||(t={}),this._file=et.getArg(t,"file",null),this._sourceRoot=et.getArg(t,"sourceRoot",null),this._skipValidation=et.getArg(t,"skipValidation",!1),this._sources=new Fn,this._names=new Fn,this._mappings=new nv,this._sourcesContents=null}static fromSourceMap(t){let e=t.sourceRoot,o=new a({file:t.file,sourceRoot:e});return t.eachMapping(function(r){let s={generated:{line:r.generatedLine,column:r.generatedColumn}};r.source!=null&&(s.source=r.source,e!=null&&(s.source=et.relative(e,s.source)),s.original={line:r.originalLine,column:r.originalColumn},r.name!=null&&(s.name=r.name)),o.addMapping(s)}),t.sources.forEach(function(r){let s=r;e!=null&&(s=et.relative(e,r)),o._sources.has(s)||o._sources.add(s);let n=t.sourceContentFor(r);n!=null&&o.setSourceContent(r,n)}),o}addMapping(t){let e=et.getArg(t,"generated"),o=et.getArg(t,"original",null),r=et.getArg(t,"source",null),s=et.getArg(t,"name",null);this._skipValidation||this._validateMapping(e,o,r,s),r!=null&&(r=String(r),this._sources.has(r)||this._sources.add(r)),s!=null&&(s=String(s),this._names.has(s)||this._names.add(s)),this._mappings.add({generatedLine:e.line,generatedColumn:e.column,originalLine:o&&o.line,originalColumn:o&&o.column,source:r,name:s})}setSourceContent(t,e){let o=t;this._sourceRoot!=null&&(o=et.relative(this._sourceRoot,o)),e!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[et.toSetString(o)]=e):this._sourcesContents&&(delete this._sourcesContents[et.toSetString(o)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))}applySourceMap(t,e,o){let r=e;if(e==null){if(t.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);r=t.file}let s=this._sourceRoot;s!=null&&(r=et.relative(s,r));let n=this._mappings.toArray().length>0?new Fn:this._sources,c=new Fn;this._mappings.unsortedForEach(function(l){if(l.source===r&&l.originalLine!=null){let T=t.originalPositionFor({line:l.originalLine,column:l.originalColumn});T.source!=null&&(l.source=T.source,o!=null&&(l.source=et.join(o,l.source)),s!=null&&(l.source=et.relative(s,l.source)),l.originalLine=T.line,l.originalColumn=T.column,T.name!=null&&(l.name=T.name))}let h=l.source;h!=null&&!n.has(h)&&n.add(h);let b=l.name;b!=null&&!c.has(b)&&c.add(b)},this),this._sources=n,this._names=c,t.sources.forEach(function(l){let h=t.sourceContentFor(l);h!=null&&(o!=null&&(l=et.join(o,l)),s!=null&&(l=et.relative(s,l)),this.setSourceContent(l,h))},this)}_validateMapping(t,e,o,r){if(e&&typeof e.line!="number"&&typeof e.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(t&&"line"in t&&"column"in t&&t.line>0&&t.column>=0&&!e&&!o&&!r)){if(!(t&&"line"in t&&"column"in t&&e&&"line"in e&&"column"in e&&t.line>0&&t.column>=0&&e.line>0&&e.column>=0&&o))throw new Error("Invalid mapping: "+JSON.stringify({generated:t,source:o,original:e,name:r}))}}_serializeMappings(){let t=0,e=1,o=0,r=0,s=0,n=0,c="",l,h,b,T,A=this._mappings.toArray();for(let P=0,H=A.length;P<H;P++){if(h=A[P],l="",h.generatedLine!==e)for(t=0;h.generatedLine!==e;)l+=";",e++;else if(P>0){if(!et.compareByGeneratedPositionsInflated(h,A[P-1]))continue;l+=","}l+=Fa.encode(h.generatedColumn-t),t=h.generatedColumn,h.source!=null&&(T=this._sources.indexOf(h.source),l+=Fa.encode(T-n),n=T,l+=Fa.encode(h.originalLine-1-r),r=h.originalLine-1,l+=Fa.encode(h.originalColumn-o),o=h.originalColumn,h.name!=null&&(b=this._names.indexOf(h.name),l+=Fa.encode(b-s),s=b)),c+=l}return c}_generateSourcesContent(t,e){return t.map(function(o){if(!this._sourcesContents)return null;e!=null&&(o=et.relative(e,o));let r=et.toSetString(o);return Object.prototype.hasOwnProperty.call(this._sourcesContents,r)?this._sourcesContents[r]:null},this)}toJSON(){let t={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(t.file=this._file),this._sourceRoot!=null&&(t.sourceRoot=this._sourceRoot),this._sourcesContents&&(t.sourcesContent=this._generateSourcesContent(t.sources,t.sourceRoot)),t}toString(){return JSON.stringify(this.toJSON())}};Nn.prototype._version=3;Yd.SourceMapGenerator=Nn});var Qd=F(Ar=>{Ar.GREATEST_LOWER_BOUND=1;Ar.LEAST_UPPER_BOUND=2;function ri(a,t,e,o,r,s){let n=Math.floor((t-a)/2)+a,c=r(e,o[n],!0);return c===0?n:c>0?t-n>1?ri(n,t,e,o,r,s):s===Ar.LEAST_UPPER_BOUND?t<o.length?t:-1:n:n-a>1?ri(a,n,e,o,r,s):s==Ar.LEAST_UPPER_BOUND?n:a<0?-1:a}Ar.search=function(t,e,o,r){if(e.length===0)return-1;let s=ri(-1,e.length,t,e,o,r||Ar.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&o(e[s],e[s-1],!0)===0;)--s;return s}});var ni=F((zS,ai)=>{"use strict";var Na=null;ai.exports=function(){if(typeof Na=="string")return fetch(Na).then(t=>t.arrayBuffer());if(Na instanceof ArrayBuffer)return Promise.resolve(Na);throw new Error("You must provide the string URL or ArrayBuffer contents of lib/mappings.wasm by calling SourceMapConsumer.initialize({ 'lib/mappings.wasm': ... }) before using SourceMapConsumer")};ai.exports.initialize=a=>{Na=a}});var Xd=F((GS,Zd)=>{var sv=ni();function ov(){this.generatedLine=0,this.generatedColumn=0,this.lastGeneratedColumn=null,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}var ja=null;Zd.exports=function(){if(ja)return ja;let t=[];return ja=sv().then(e=>WebAssembly.instantiate(e,{env:{mapping_callback(o,r,s,n,c,l,h,b,T,A){let P=new ov;P.generatedLine=o+1,P.generatedColumn=r,s&&(P.lastGeneratedColumn=n-1),c&&(P.source=l,P.originalLine=h+1,P.originalColumn=b,T&&(P.name=A)),t[t.length-1](P)},start_all_generated_locations_for(){console.time("all_generated_locations_for")},end_all_generated_locations_for(){console.timeEnd("all_generated_locations_for")},start_compute_column_spans(){console.time("compute_column_spans")},end_compute_column_spans(){console.timeEnd("compute_column_spans")},start_generated_location_for(){console.time("generated_location_for")},end_generated_location_for(){console.timeEnd("generated_location_for")},start_original_location_for(){console.time("original_location_for")},end_original_location_for(){console.timeEnd("original_location_for")},start_parse_mappings(){console.time("parse_mappings")},end_parse_mappings(){console.timeEnd("parse_mappings")},start_sort_by_generated_location(){console.time("sort_by_generated_location")},end_sort_by_generated_location(){console.timeEnd("sort_by_generated_location")},start_sort_by_original_location(){console.time("sort_by_original_location")},end_sort_by_original_location(){console.timeEnd("sort_by_original_location")}}})).then(e=>({exports:e.instance.exports,withMappingCallback:(o,r)=>{t.push(o);try{r()}finally{t.pop()}}})).then(null,e=>{throw ja=null,e}),ja}});var eh=F(kn=>{var qe=Ma(),iv=Qd(),si=Xo().ArraySet,WS=ho(),cv=ni(),lv=Xd(),oi=Symbol("smcInternal"),nt=class a{constructor(t,e){return t==oi?Promise.resolve(this):uv(t,e)}static initialize(t){cv.initialize(t["lib/mappings.wasm"])}static fromSourceMap(t,e){return fv(t,e)}static async with(t,e,o){let r=await new a(t,e);try{return await o(r)}finally{r.destroy()}}eachMapping(t,e,o){throw new Error("Subclasses must implement eachMapping")}allGeneratedPositionsFor(t){throw new Error("Subclasses must implement allGeneratedPositionsFor")}destroy(){throw new Error("Subclasses must implement destroy")}};nt.prototype._version=3;nt.GENERATED_ORDER=1;nt.ORIGINAL_ORDER=2;nt.GREATEST_LOWER_BOUND=1;nt.LEAST_UPPER_BOUND=2;kn.SourceMapConsumer=nt;var Yr=class a extends nt{constructor(t,e){return super(oi).then(o=>{let r=t;typeof t=="string"&&(r=qe.parseSourceMapInput(t));let s=qe.getArg(r,"version"),n=qe.getArg(r,"sources").map(String),c=qe.getArg(r,"names",[]),l=qe.getArg(r,"sourceRoot",null),h=qe.getArg(r,"sourcesContent",null),b=qe.getArg(r,"mappings"),T=qe.getArg(r,"file",null),A=qe.getArg(r,"x_google_ignoreList",null);if(s!=o._version)throw new Error("Unsupported version: "+s);return o._sourceLookupCache=new Map,o._names=si.fromArray(c.map(String),!0),o._sources=si.fromArray(n,!0),o._absoluteSources=si.fromArray(o._sources.toArray().map(function(P){return qe.computeSourceURL(l,P,e)}),!0),o.sourceRoot=l,o.sourcesContent=h,o._mappings=b,o._sourceMapURL=e,o.file=T,o.x_google_ignoreList=A,o._computedColumnSpans=!1,o._mappingsPtr=0,o._wasm=null,lv().then(P=>(o._wasm=P,o))})}_findSourceIndex(t){let e=this._sourceLookupCache.get(t);if(typeof e=="number")return e;let o=qe.computeSourceURL(null,t,this._sourceMapURL);if(this._absoluteSources.has(o)){let s=this._absoluteSources.indexOf(o);return this._sourceLookupCache.set(t,s),s}let r=qe.computeSourceURL(this.sourceRoot,t,this._sourceMapURL);if(this._absoluteSources.has(r)){let s=this._absoluteSources.indexOf(r);return this._sourceLookupCache.set(t,s),s}return-1}static fromSourceMap(t,e){return new a(t.toString())}get sources(){return this._absoluteSources.toArray()}_getMappingsPtr(){return this._mappingsPtr===0&&this._parseMappings(),this._mappingsPtr}_parseMappings(){let t=this._mappings,e=t.length,o=this._wasm.exports.allocate_mappings(e)>>>0,r=new Uint8Array(this._wasm.exports.memory.buffer,o,e);for(let n=0;n<e;n++)r[n]=t.charCodeAt(n);let s=this._wasm.exports.parse_mappings(o);if(!s){let n=this._wasm.exports.get_last_error(),c=`Error parsing mappings (code ${n}): `;switch(n){case 1:c+="the mappings contained a negative line, column, source index, or name index";break;case 2:c+="the mappings contained a number larger than 2**32";break;case 3:c+="reached EOF while in the middle of parsing a VLQ";break;case 4:c+="invalid base 64 character while parsing a VLQ";break;default:c+="unknown error code";break}throw new Error(c)}this._mappingsPtr=s}eachMapping(t,e,o){let r=e||null,s=o||nt.GENERATED_ORDER;this._wasm.withMappingCallback(n=>{n.source!==null&&(n.source=this._absoluteSources.at(n.source),n.name!==null&&(n.name=this._names.at(n.name))),this._computedColumnSpans&&n.lastGeneratedColumn===null&&(n.lastGeneratedColumn=1/0),t.call(r,n)},()=>{switch(s){case nt.GENERATED_ORDER:this._wasm.exports.by_generated_location(this._getMappingsPtr());break;case nt.ORIGINAL_ORDER:this._wasm.exports.by_original_location(this._getMappingsPtr());break;default:throw new Error("Unknown order of iteration.")}})}allGeneratedPositionsFor(t){let e=qe.getArg(t,"source"),o=qe.getArg(t,"line"),r=t.column||0;if(e=this._findSourceIndex(e),e<0)return[];if(o<1)throw new Error("Line numbers must be >= 1");if(r<0)throw new Error("Column numbers must be >= 0");let s=[];return this._wasm.withMappingCallback(n=>{let c=n.lastGeneratedColumn;this._computedColumnSpans&&c===null&&(c=1/0),s.push({line:n.generatedLine,column:n.generatedColumn,lastColumn:c})},()=>{this._wasm.exports.all_generated_locations_for(this._getMappingsPtr(),e,o-1,"column"in t,r)}),s}destroy(){this._mappingsPtr!==0&&(this._wasm.exports.free_mappings(this._mappingsPtr),this._mappingsPtr=0)}computeColumnSpans(){this._computedColumnSpans||(this._wasm.exports.compute_column_spans(this._getMappingsPtr()),this._computedColumnSpans=!0)}originalPositionFor(t){let e={generatedLine:qe.getArg(t,"line"),generatedColumn:qe.getArg(t,"column")};if(e.generatedLine<1)throw new Error("Line numbers must be >= 1");if(e.generatedColumn<0)throw new Error("Column numbers must be >= 0");let o=qe.getArg(t,"bias",nt.GREATEST_LOWER_BOUND);o==null&&(o=nt.GREATEST_LOWER_BOUND);let r;if(this._wasm.withMappingCallback(s=>r=s,()=>{this._wasm.exports.original_location_for(this._getMappingsPtr(),e.generatedLine-1,e.generatedColumn,o)}),r&&r.generatedLine===e.generatedLine){let s=qe.getArg(r,"source",null);s!==null&&(s=this._absoluteSources.at(s));let n=qe.getArg(r,"name",null);return n!==null&&(n=this._names.at(n)),{source:s,line:qe.getArg(r,"originalLine",null),column:qe.getArg(r,"originalColumn",null),name:n}}return{source:null,line:null,column:null,name:null}}hasContentsOfAllSources(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(t){return t==null}):!1}sourceContentFor(t,e){if(!this.sourcesContent)return null;let o=this._findSourceIndex(t);if(o>=0)return this.sourcesContent[o];if(e)return null;throw new Error('"'+t+'" is not in the SourceMap.')}generatedPositionFor(t){let e=qe.getArg(t,"source");if(e=this._findSourceIndex(e),e<0)return{line:null,column:null,lastColumn:null};let o={source:e,originalLine:qe.getArg(t,"line"),originalColumn:qe.getArg(t,"column")};if(o.originalLine<1)throw new Error("Line numbers must be >= 1");if(o.originalColumn<0)throw new Error("Column numbers must be >= 0");let r=qe.getArg(t,"bias",nt.GREATEST_LOWER_BOUND);r==null&&(r=nt.GREATEST_LOWER_BOUND);let s;if(this._wasm.withMappingCallback(n=>s=n,()=>{this._wasm.exports.generated_location_for(this._getMappingsPtr(),o.source,o.originalLine-1,o.originalColumn,r)}),s&&s.source===o.source){let n=s.lastGeneratedColumn;return this._computedColumnSpans&&n===null&&(n=1/0),{line:qe.getArg(s,"generatedLine",null),column:qe.getArg(s,"generatedColumn",null),lastColumn:n}}return{line:null,column:null,lastColumn:null}}};Yr.prototype.consumer=nt;kn.BasicSourceMapConsumer=Yr;var jn=class extends nt{constructor(t,e){return super(oi).then(o=>{let r=t;typeof t=="string"&&(r=qe.parseSourceMapInput(t));let s=qe.getArg(r,"version"),n=qe.getArg(r,"sections");if(s!=o._version)throw new Error("Unsupported version: "+s);let c={line:-1,column:0};return Promise.all(n.map(l=>{if(l.url)throw new Error("Support for url field in sections not implemented.");let h=qe.getArg(l,"offset"),b=qe.getArg(h,"line"),T=qe.getArg(h,"column");if(b<c.line||b===c.line&&T<c.column)throw new Error("Section offsets must be ordered and non-overlapping.");return c=h,new nt(qe.getArg(l,"map"),e).then(P=>({generatedOffset:{generatedLine:b+1,generatedColumn:T+1},consumer:P}))})).then(l=>(o._sections=l,o))})}get sources(){let t=[];for(let e=0;e<this._sections.length;e++)for(let o=0;o<this._sections[e].consumer.sources.length;o++)t.push(this._sections[e].consumer.sources[o]);return t}originalPositionFor(t){let e={generatedLine:qe.getArg(t,"line"),generatedColumn:qe.getArg(t,"column")},o=iv.search(e,this._sections,function(s,n){let c=s.generatedLine-n.generatedOffset.generatedLine;return c||s.generatedColumn-(n.generatedOffset.generatedColumn-1)}),r=this._sections[o];return r?r.consumer.originalPositionFor({line:e.generatedLine-(r.generatedOffset.generatedLine-1),column:e.generatedColumn-(r.generatedOffset.generatedLine===e.generatedLine?r.generatedOffset.generatedColumn-1:0),bias:t.bias}):{source:null,line:null,column:null,name:null}}hasContentsOfAllSources(){return this._sections.every(function(t){return t.consumer.hasContentsOfAllSources()})}sourceContentFor(t,e){for(let o=0;o<this._sections.length;o++){let s=this._sections[o].consumer.sourceContentFor(t,!0);if(s)return s}if(e)return null;throw new Error('"'+t+'" is not in the SourceMap.')}_findSectionIndex(t){for(let e=0;e<this._sections.length;e++){let{consumer:o}=this._sections[e];if(o._findSourceIndex(t)!==-1)return e}return-1}generatedPositionFor(t){let e=this._findSectionIndex(qe.getArg(t,"source")),o=e>=0?this._sections[e]:null,r=e>=0&&e+1<this._sections.length?this._sections[e+1]:null,s=o&&o.consumer.generatedPositionFor(t);if(s&&s.line!==null){let n=o.generatedOffset.generatedLine-1,c=o.generatedOffset.generatedColumn-1;return s.line===1&&(s.column+=c,typeof s.lastColumn=="number"&&(s.lastColumn+=c)),s.lastColumn===1/0&&r&&s.line===r.generatedOffset.generatedLine&&(s.lastColumn=r.generatedOffset.generatedColumn-2),s.line+=n,s}return{line:null,column:null,lastColumn:null}}allGeneratedPositionsFor(t){let e=this._findSectionIndex(qe.getArg(t,"source")),o=e>=0?this._sections[e]:null,r=e>=0&&e+1<this._sections.length?this._sections[e+1]:null;return o?o.consumer.allGeneratedPositionsFor(t).map(s=>{let n=o.generatedOffset.generatedLine-1,c=o.generatedOffset.generatedColumn-1;return s.line===1&&(s.column+=c,typeof s.lastColumn=="number"&&(s.lastColumn+=c)),s.lastColumn===1/0&&r&&s.line===r.generatedOffset.generatedLine&&(s.lastColumn=r.generatedOffset.generatedColumn-2),s.line+=n,s}):[]}eachMapping(t,e,o){this._sections.forEach((r,s)=>{let n=s+1<this._sections.length?this._sections[s+1]:null,{generatedOffset:c}=r,l=c.generatedLine-1,h=c.generatedColumn-1;r.consumer.eachMapping(function(b){b.generatedLine===1&&(b.generatedColumn+=h,typeof b.lastGeneratedColumn=="number"&&(b.lastGeneratedColumn+=h)),b.lastGeneratedColumn===1/0&&n&&b.generatedLine===n.generatedOffset.generatedLine&&(b.lastGeneratedColumn=n.generatedOffset.generatedColumn-2),b.generatedLine+=l,t.call(this,b)},e,o)})}computeColumnSpans(){for(let t=0;t<this._sections.length;t++)this._sections[t].consumer.computeColumnSpans()}destroy(){for(let t=0;t<this._sections.length;t++)this._sections[t].consumer.destroy()}};kn.IndexedSourceMapConsumer=jn;function uv(a,t){let e=a;typeof a=="string"&&(e=qe.parseSourceMapInput(a));let o=e.sections!=null?new jn(e,t):new Yr(e,t);return Promise.resolve(o)}function fv(a,t){return Yr.fromSourceMap(a,t)}});var rh=F(th=>{var pv=ti().SourceMapGenerator,Dn=Ma(),dv=/(\r?\n)/,hv=10,Qr="$$$isSourceNode$$$",ii=class a{constructor(t,e,o,r,s){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=o??null,this.name=s??null,this[Qr]=!0,r!=null&&this.add(r)}static fromStringWithSourceMap(t,e,o){let r=new a,s=t.split(dv),n=0,c=function(){let P=me(),H=me()||"";return P+H;function me(){return n<s.length?s[n++]:void 0}},l=1,h=0,b=null,T;return e.eachMapping(function(P){if(b!==null)if(l<P.generatedLine)A(b,c()),l++,h=0;else{T=s[n]||"";let H=T.substr(0,P.generatedColumn-h);s[n]=T.substr(P.generatedColumn-h),h=P.generatedColumn,A(b,H),b=P;return}for(;l<P.generatedLine;)r.add(c()),l++;h<P.generatedColumn&&(T=s[n]||"",r.add(T.substr(0,P.generatedColumn)),s[n]=T.substr(P.generatedColumn),h=P.generatedColumn),b=P},this),n<s.length&&(b&&A(b,c()),r.add(s.splice(n).join(""))),e.sources.forEach(function(P){let H=e.sourceContentFor(P);H!=null&&(o!=null&&(P=Dn.join(o,P)),r.setSourceContent(P,H))}),r;function A(P,H){if(P===null||P.source===void 0)r.add(H);else{let me=o?Dn.join(o,P.source):P.source;r.add(new a(P.originalLine,P.originalColumn,me,H,P.name))}}}add(t){if(Array.isArray(t))t.forEach(function(e){this.add(e)},this);else if(t[Qr]||typeof t=="string")t&&this.children.push(t);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);return this}prepend(t){if(Array.isArray(t))for(let e=t.length-1;e>=0;e--)this.prepend(t[e]);else if(t[Qr]||typeof t=="string")this.children.unshift(t);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);return this}walk(t){let e;for(let o=0,r=this.children.length;o<r;o++)e=this.children[o],e[Qr]?e.walk(t):e!==""&&t(e,{source:this.source,line:this.line,column:this.column,name:this.name})}join(t){let e,o,r=this.children.length;if(r>0){for(e=[],o=0;o<r-1;o++)e.push(this.children[o]),e.push(t);e.push(this.children[o]),this.children=e}return this}replaceRight(t,e){let o=this.children[this.children.length-1];return o[Qr]?o.replaceRight(t,e):typeof o=="string"?this.children[this.children.length-1]=o.replace(t,e):this.children.push("".replace(t,e)),this}setSourceContent(t,e){this.sourceContents[Dn.toSetString(t)]=e}walkSourceContents(t){for(let o=0,r=this.children.length;o<r;o++)this.children[o][Qr]&&this.children[o].walkSourceContents(t);let e=Object.keys(this.sourceContents);for(let o=0,r=e.length;o<r;o++)t(Dn.fromSetString(e[o]),this.sourceContents[e[o]])}toString(){let t="";return this.walk(function(e){t+=e}),t}toStringWithSourceMap(t){let e={code:"",line:1,column:0},o=new pv(t),r=!1,s=null,n=null,c=null,l=null;return this.walk(function(h,b){e.code+=h,b.source!==null&&b.line!==null&&b.column!==null?((s!==b.source||n!==b.line||c!==b.column||l!==b.name)&&o.addMapping({source:b.source,original:{line:b.line,column:b.column},generated:{line:e.line,column:e.column},name:b.name}),s=b.source,n=b.line,c=b.column,l=b.name,r=!0):r&&(o.addMapping({generated:{line:e.line,column:e.column}}),s=null,r=!1);for(let T=0,A=h.length;T<A;T++)h.charCodeAt(T)===hv?(e.line++,e.column=0,T+1===A?(s=null,r=!1):r&&o.addMapping({source:b.source,original:{line:b.line,column:b.column},generated:{line:e.line,column:e.column},name:b.name})):e.column++}),this.walkSourceContents(function(h,b){o.setSourceContent(h,b)}),{code:e.code,map:o}}};th.SourceNode=ii});var ci=F(Un=>{Un.SourceMapGenerator=ti().SourceMapGenerator;Un.SourceMapConsumer=eh().SourceMapConsumer;Un.SourceNode=rh().SourceNode});var ah=F(()=>{"use strict";var mv=Ge(),{SourceNode:gv}=ci(),_t=Jt(),Zr=on(),Be=mv.expect;describe("plugin API",()=>{describe("use",()=>{let a="start = 'a'";it("is called for each plugin",()=>{let t=[!1,!1,!1],e=[{use(){t[0]=!0}},{use(){t[1]=!0}},{use(){t[2]=!0}}];_t.generate(a,{plugins:e}),Be(t).to.deep.equal([!0,!0,!0])}),it("receives configuration",()=>{let t={use(e){Be(e).to.be.an("object"),Be(e.parser).to.be.an("object"),Be(e.parser.parse("start = 'a'")).to.be.an("object"),Be(e.passes).to.be.an("object"),Be(e.passes.check).to.be.an("array"),e.passes.check.forEach(o=>{Be(o).to.be.a("function")}),Be(e.passes.transform).to.be.an("array"),e.passes.transform.forEach(o=>{Be(o).to.be.a("function")}),Be(e.passes.generate).to.be.an("array"),e.passes.generate.forEach(o=>{Be(o).to.be.a("function")}),Be(e.reservedWords).to.be.an("array"),e.reservedWords.forEach(o=>{Be(o).to.be.a("string")})}};_t.generate(a,{plugins:[t]})}),it("receives options",()=>{let e={plugins:[{use(o,r){Be(r).to.equal(e)}}],foo:42};_t.generate(a,e)}),it("can replace parser",()=>{let t={use(o){let r=_t.generate(["start = .* {","  return {","    type: 'grammar',","    imports: [],","    initializer: {","      type: 'initializer',","      code: ['/* included for cover ast2SourceNode in the generate-js pass */'],","    },","    rules: [","      {","        type: 'rule',","        name: 'start',","        expression: { type: 'literal',  value: text(), ignoreCase: false }","      }","    ]","  };","}"].join(`
`));o.parser=r}},e=_t.generate("a",{plugins:[t]});Be(e.parse("a")).to.equal("a")}),it("can change compiler passes",()=>{let t={use(o){function r(s){s.code=new gv(1,0,"plugin","({ parse: function() { return 42; } })")}o.passes.generate=[r]}},e=_t.generate(a,{plugins:[t]});Be(e.parse("a")).to.equal(42)}),it("can change list of reserved words",()=>{let t={use(e){e.reservedWords=[]}};Be(()=>{_t.generate("start = "+_t.RESERVED_WORDS[0]+":'a'",{plugins:[t],output:"source"})}).to.not.throw()}),it("can change options",()=>{let t=["a = 'x'","b = 'x'","c = 'x'"].join(`
`),e={use(r,s){s.allowedStartRules=["b","c"]}},o=_t.generate(t,{allowedStartRules:["a"],plugins:[e]});Be(()=>{o.parse("x",{startRule:"a"})}).to.throw(),Be(o.parse("x",{startRule:"b"})).to.equal("x"),Be(o.parse("x",{startRule:"c"})).to.equal("x")}),it("can use star for start rules",()=>{let t=["a = 'x'","b = 'x'","c = 'x'"].join(`
`),e=_t.generate(t,{allowedStartRules:["*"]});Be(e.parse("x",{startRule:"a"})).to.equal("x"),Be(e.parse("x",{startRule:"b"})).to.equal("x"),Be(e.parse("x",{startRule:"c"})).to.equal("x")}),it("can munge the bytecode",()=>{let t={use(r){function s(n){Be(n.rules.length).to.equal(2);let c=n.rules[0].bytecode;Be(c[0]).to.equal(Zr.MATCH_STRING_IC),c.splice(4,0,Zr.PUSH_CURR_POS,Zr.POP),c[2]+=2,c=n.rules[1].bytecode,Be(c[0]).to.equal(Zr.MATCH_STRING),Be(c[4]).to.equal(Zr.ACCEPT_STRING),c[4]=Zr.ACCEPT_N,c[5]=1}r.passes.generate.splice(1,0,s)}},e=_t.generate("one = 'abc'i; two = 'a'",{plugins:[t],output:"source",allowedStartRules:["*"]}),o=new RegExp([/if \(input\.substr\(peg\$currPos, 3\)/,/.toLowerCase\(\) === peg\$c0\) \{/,/\s*s0 = peg\$currPos;/,/\s*s0 = input\.substr/].map(r=>r.source).join(""));Be(e.search(o)).to.be.greaterThan(0)})})})});var nh=F((QS,bv)=>{bv.exports={name:"peggy",version:"5.0.6",description:"Parser generator for JavaScript",files:["AUTHORS","bin/*.js","bin/*.d.ts","lib","browser"],keywords:["grammar","parser generator","PEG","PEG.js"],homepage:"https://peggyjs.org/",repository:{type:"git",url:"git+https://github.com/peggyjs/peggy.git"},bugs:"https://github.com/peggyjs/peggy/issues",license:"MIT",author:"David Majda <david@majda.cz> (https://majda.cz/)",main:"lib/peg.js",browser:"browser/peggy.min.js",unpkg:"browser/peggy.min.js",jsdelivr:"browser/peggy.min.js",types:"lib/peg.d.ts",bin:{peggy:"bin/peggy.js"},scripts:{clean:"rimraf -g build browser bin/*.map docs/js/*.min.js",parser:"node bin/peggy.js -c src/opts.mjs",examples:"node bin/peggy.js -c docs/js/options.js docs/js/examples.peggy",set_version:"package-extract -o lib/version.js -dcs && package-extract -u -o docs/index.html -r '(?<=https:\\/\\/unpkg.com\\/peggy@)(?<version>\\d+\\.\\d+\\.\\d+)(?=\\/browser\\/peggy\\.min\\.js)'",lint:"eslint .",docs:"cd docs && npm run build",test:"node --experimental-vm-modules node_modules/jest/bin/jest.js","test:web":"cd web-test && npm test","test:all":"npm run test && npm run test:web",benchmark:"node ./benchmark/run_bench.js",headers:"node ./tools/header.js browser/peggy.min.js docs/js/benchmark-bundle.min.js docs/js/test-bundle.min.js",deploy:"copyfiles -f browser/peggy.min.js docs/vendor/peggy/",coverage:"npm run rollup && npm run parser -- -m inline && npm test",ts:"tsup",build:"npm run clean && npm run make && npm run lint && npm run audit",make:"npm run parser && npm run ts && npm run examples && npm run docs && npm run headers && npm run deploy",audit:"npm run test && npm run benchmark",tidy:"rimraf build",start:"cd docs && npm start",version:"npm run set_version && npm run parser && npm run parser && npm run test && npm run examples && git add lib/version.js lib/parser.js docs/index.html test/cli/fixtures/imports_peggy.js test/cli/fixtures/lib.js docs/js/examples.js"},devDependencies:{"@peggyjs/eslint-config":"^6.0.6","@swc/core":"1.13.3","@types/chai":"^4.3.20","@types/jest":"^30.0.0","@types/node":"^24.2.0",chai:"4.5.0","chai-like":"^1.1.3",copyfiles:"^2.4.1","esbuild-plugin-umd-wrapper":"3.0.0",eslint:"^9.32.0","eslint-plugin-compat":"6.0.2","eslint-plugin-mocha":"11.1.0",glob:"^11.0.3",jest:"^30.0.5","package-extract":"3.1.3",rimraf:"^6.0.1","source-map":"0.7.6","ts-jest":"^29.4.1",tsup:"8.5.0",typescript:"5.9.2","typescript-eslint":"8.39.0",url:"0.11.4"},dependencies:{"@peggyjs/from-mem":"3.1.1",commander:"^14.0.0","source-map-generator":"2.0.2"},browserslist:["defaults, maintained node versions, not op_mini all"],packageManager:"pnpm@10.14.0",engines:{node:">=20"}}});var sh=F((exports,module)=>{"use strict";var chai=Ge(),peg=Jt(),pkg=nh(),{SourceMapConsumer}=ci(),{spy}=wn();chai.use(so());beforeEach(()=>typeof window<"u"?SourceMapConsumer.initialize({"lib/mappings.wasm":"https://raw.githubusercontent.com/mozilla/source-map/0.7.6/lib/mappings.wasm"}):null);var expect=chai.expect;describe("Peggy API",()=>{it("has the correct VERSION",()=>{expect(peg.VERSION).to.equal(pkg.version),globalThis.peggyVersion=peg.VERSION}),describe("generate",()=>{it("generates a parser",()=>{let a=peg.generate("start = 'a'");expect(a).to.be.an("object"),expect(a.parse("a")).to.equal("a")}),it("throws an exception on syntax error",()=>{expect(()=>{peg.generate("start = @")}).to.throw(),expect(()=>{peg.generate(`start = 'a'
`)}).to.throw(),expect(()=>{peg.generate(`start = 'a'
\x9F`)}).to.throw()}),it("throws an exception on semantic error",()=>{expect(()=>{peg.generate("start = undefined")}).to.throw()}),it("throws an exception on bad startRule",()=>{expect(()=>{peg.parser.parse("start = 'a'",{startRule:"BAD_START_RULE"})}).to.throw()}),describe("allowed start rules",()=>{let a=["a = 'x'","b = 'x'","c = 'x'"].join(`
`);describe("when |allowedStartRules| is not set",()=>{it("generated parser can start only from the first rule",()=>{let t=peg.generate(a);expect(t.parse("x",{startRule:"a"})).to.equal("x"),expect(()=>{t.parse("x",{startRule:"b"})}).to.throw(),expect(()=>{t.parse("x",{startRule:"c"})}).to.throw()})}),describe("when |allowedStartRules| is set",()=>{it("generated parser can start only from specified rules",()=>{let t=peg.generate(a,{allowedStartRules:["b","c"]});expect(()=>{t.parse("x",{startRule:"a"})}).to.throw(),expect(t.parse("x",{startRule:"b"})).to.equal("x"),expect(t.parse("x",{startRule:"c"})).to.equal("x")})})}),describe("intermediate results caching",()=>{let a=["{ var n = 0; }","start = (a 'b') / (a 'c') { return n; }","a = 'a' { n++; }"].join(`
`);describe("when |cache| is not set",()=>{it("generated parser doesn't cache intermediate parse results",()=>{let t=peg.generate(a);expect(t.parse("ac")).to.equal(2)})}),describe("when |cache| is set to |false|",()=>{it("generated parser doesn't cache intermediate parse results",()=>{let t=peg.generate(a,{cache:!1});expect(t.parse("ac")).to.equal(2)})}),describe("when |cache| is set to |true|",()=>{it("generated parser caches intermediate parse results",()=>{let t=peg.generate(a,{cache:!0});expect(t.parse("ac")).to.equal(1)})})}),describe("tracing",()=>{let a="start = 'a'";describe("when |trace| is not set",()=>{it("generated parser doesn't trace",()=>{let t=peg.generate(a),e={trace:spy()};t.parse("a",{tracer:e}),expect(e.trace.called).to.equal(!1)})}),describe("when |trace| is set to |false|",()=>{it("generated parser doesn't trace",()=>{let t=peg.generate(a,{trace:!1}),e={trace:spy()};t.parse("a",{tracer:e}),expect(e.trace.called).to.equal(!1)})}),describe("when |trace| is set to |true|",()=>{it("generated parser traces",()=>{let t=peg.generate(a,{trace:!0}),e={trace:spy()};t.parse("a",{tracer:e}),expect(e.trace.called).to.equal(!0)})})}),describe("output",()=>{let grammar="start = 'a'";describe("when |output| is not set",()=>{it("returns generated parser object",()=>{let a=peg.generate(grammar);expect(a).to.be.an("object"),expect(a.parse("a")).to.equal("a")})}),describe('when |output| is set to |"parser"|',()=>{it("returns generated parser object",()=>{let a=peg.generate(grammar,{output:"parser"});expect(a).to.be.an("object"),expect(a.parse("a")).to.equal("a")})}),describe('when |output| is set to |"source"|',()=>{it("returns generated parser source code",()=>{let source=peg.generate(grammar,{output:"source"});expect(source).to.be.a("string"),expect(eval(source).parse("a")).to.equal("a")})}),describe('when |output| is set to |"ast"|',()=>{it("returns generated parser AST",()=>{let a=peg.generate(grammar,{output:"ast"});expect(a).to.be.an("object"),expect(a).to.be.like(peg.parser.parse(grammar))})})}),describe("reserved words",()=>{describe("throws an exception on reserved JS words used as a label",()=>{for(let a of peg.RESERVED_WORDS)it(a,()=>{expect(()=>{peg.generate(["start = "+a+":end","end = 'a'"].join(`
`),{output:"source"})}).to.throw(peg.parser.SyntaxError)})}),describe("does not throw an exception on special non-reserved JS words used as a label",()=>{let nonReserved=["abstract","boolean","byte","char","double","final","float","goto","int","long","native","short","synchronized","throws","transient","volatile","as","async","from","get","of","set"];for(let label of nonReserved)it(label,()=>{let source=peg.generate(["start = "+label+":end { return "+label+"; }","end = 'a'"].join(`
`),{output:"source"});expect(eval(source).parse("a")).to.equal("a")})}),describe("does not throw an exception on reserved JS words used as a rule name",()=>{for(let rule of peg.RESERVED_WORDS)it(rule,()=>{let source=peg.generate(["start = "+rule,rule+" = 'a'"].join(`
`),{output:"source"});expect(eval(source).parse("a")).to.equal("a")})})}),it("accepts custom options",()=>{peg.generate("start = 'a'",{grammarSource:42})}),describe("generates source map",()=>{function a(A,P,H){let me=P instanceof RegExp?A.search(P):A.indexOf(P),ye=1,_e=0;for(let ie=0;ie<me;++ie)A.charCodeAt(ie)===10?(++ye,_e=0):++_e;if(H&&H.offset){let ie=H.offset({line:ye,column:_e,offset:me});return delete ie.offset,ie}return{line:ye,column:_e}}let t=`GLOBAL
INITIALIZER`,e=`PER-PARSE
INITIALIZER`,o=`NOT
BLOCK`,r=`AND
BLOCK`,s=`ACTION
BLOCK`,n=`MIN
BLOCK`,c=`MAX
BLOCK`,l=`EXACT
BLOCK`,h=`
        {{${t}}}
        {${e}}
        RULE_1 = !{${o}} 'a' rule:RULE_2 {${s}};
        RULE_2 'named' = &{${r}} @'b' [abc] 'def';
        RULE_3 = RULE_1 / RULE_2;
        RULE_4 = RULE_1|{${n}} .. {${c}}, RULE_2|{${l}}| |;
      `;function b(A,P,H,me=A){let ye=peg.generate(h,{grammarSource:P,output:"source-and-map",allowedStartRules:["*"]}),{code:_e,map:ie}=ye.toStringWithSourceMap(),ne=a(h,A,P),Pe=a(_e,me);return delete ne.offset,delete Pe.offset,SourceMapConsumer.fromSourceMap(ie).then(ve=>{expect(ve.originalPositionFor(Pe)).to.be.deep.equal(Object.assign(ne,{source:String(P),name:H}))})}let T=new peg.GrammarLocation("-",{offset:51,line:13,column:7});for(let A of["-",T])describe(`with source = ${chai.util.inspect(A)}`,()=>{it("global initializer",()=>b(t,A,"$top_level_initializer")),it("per-parse initializer",()=>b(e,A,"$initializer")),it("action block",()=>b(s,A,null)),it("semantic and predicate",()=>b(r,A,null)),it("semantic not predicate",()=>b(o,A,null)),it("min function boundary",()=>b(n,A,null)),it("max function boundary",()=>b(c,A,null)),it("exact function boundary",()=>b(l,A,null)),it("rule name",()=>b("RULE_1",A,"RULE_1","peg$parseRULE_1() {")),it("labelled rule name",()=>b("RULE_2 'named'",A,"RULE_2","peg$parseRULE_2() {")),it("literal expression",()=>b("'a'",A,null,"input.charCodeAt(peg$currPos) === 97")),it("multichar literal",()=>b("'def'",A,null,"input.substr(peg$currPos, 3) === peg$c3")),it("chars expression",()=>b("[abc]",A,null,/s\d = input\.charAt\(peg\$currPos\);\s*if \(peg\$r0\.test\(s\d\)\)/)),it("rule expression",()=>b("RULE_2",A,null,"peg$parseRULE_2();")),it("choice expression",()=>b("RULE_1 / RULE_2",A,null,new RegExp([/peg\$parseRULE_1\(\);\s*/,/if \(s. === peg\$FAILED\) \{\s*/,/s. = peg\$parseRULE_2/].map(P=>P.source).join(""))))})})})})});var oh=F(()=>{"use strict";var yv=Ge(),rr=Jt(),{spy:xv,stub:vv}=wn(),ft=yv.expect;describe("generated parser API",()=>{describe("parse",()=>{it("parses input",()=>{let a=rr.generate("start = 'a'");ft(a.parse("a")).to.equal("a")}),it("parses input in library mode",()=>{let t=rr.generate("start = 'a'").parse("a",{peg$library:!0});ft(t.peg$result).to.equal("a"),ft(t.peg$success).to.equal(!0),ft(t.peg$throw).to.equal(void 0)}),it("throws an exception on syntax error",()=>{let a=rr.generate("start = 'a'");ft(()=>{a.parse("b")}).to.throw()}),it("gives partial result on syntax error in library mode",()=>{let t=rr.generate("start = 'a'+").parse("aab",{peg$library:!0});ft(t.peg$result).to.deep.equal(["a","a"]),ft(t.peg$success).to.equal(!1),ft(t.peg$throw).to.throw('Expected "a" or end of input but "b" found.')}),it("correctly describe character class in syntax error",()=>{let a=rr.generate("start = [123-5]");ft(()=>{a.parse("0")}).to.throw("[123-5]")}),describe("start rule",()=>{let a=rr.generate(["a = 'x' { return 'a'; }","b = 'x' { return 'b'; }","c = 'x' { return 'c'; }"].join(`
`),{allowedStartRules:["b","c"]});describe("when |startRule| is not set",()=>{it("starts parsing from the first allowed rule",()=>{ft(a.parse("x")).to.equal("b")})}),describe("when |startRule| is set to an allowed rule",()=>{it("starts parsing from specified rule",()=>{ft(a.parse("x",{startRule:"b"})).to.equal("b"),ft(a.parse("x",{startRule:"c"})).to.equal("c")})}),describe("when |startRule| is set to a disallowed start rule",()=>{it("throws an exception",()=>{ft(()=>{a.parse("x",{startRule:"a"})}).to.throw()})})}),describe("tracing",()=>{let a=rr.generate(["start = a / b","a = 'a'i","b = 'b'"].join(`
`),{trace:!0});describe("default tracer",()=>{it("traces using console.log (if console is defined)",()=>{let t=["1:1-1:1 rule.enter start","1:1-1:1 rule.enter   a","1:1-1:1 rule.fail    a","1:1-1:1 rule.enter   b","1:1-1:2 rule.match   b","1:1-1:2 rule.match start"];typeof console=="object"&&vv(console,"log");try{a.parse("b"),typeof console=="object"&&(ft(console.log.callCount).to.equal(t.length),t.forEach((e,o)=>{let r=console.log.getCall(o);ft(r.calledWithExactly(e)).to.equal(!0)}))}finally{typeof console=="object"&&console.log.restore()}})}),describe("custom tracers",()=>{describe("trace",()=>{it("receives tracing events",()=>{let t=[{type:"rule.enter",rule:"start",location:{source:void 0,start:{offset:0,line:1,column:1},end:{offset:0,line:1,column:1}}},{type:"rule.enter",rule:"a",location:{source:void 0,start:{offset:0,line:1,column:1},end:{offset:0,line:1,column:1}}},{type:"rule.fail",rule:"a",location:{source:void 0,start:{offset:0,line:1,column:1},end:{offset:0,line:1,column:1}}},{type:"rule.enter",rule:"b",location:{source:void 0,start:{offset:0,line:1,column:1},end:{offset:0,line:1,column:1}}},{type:"rule.match",rule:"b",result:"b",location:{source:void 0,start:{offset:0,line:1,column:1},end:{offset:1,line:1,column:2}}},{type:"rule.match",rule:"start",result:"b",location:{source:void 0,start:{offset:0,line:1,column:1},end:{offset:1,line:1,column:2}}}],e={trace:xv()};a.parse("b",{tracer:e}),ft(e.trace.callCount).to.equal(t.length),t.forEach((o,r)=>{let s=e.trace.getCall(r);ft(s.calledWithExactly(o)).to.equal(!0)})})})})}),it("accepts custom options",()=>{rr.generate("start = 'a'").parse("a",{foo:42})})})})});Cu();$u();Ou();qu();Ru();Iu();ku();Uu();zu();Wu();Ku();Ju();Qu();Xu();tf();af();sf();of();lf();df();mf();bf();ah();sh();oh();})();
/*! Bundled license information:

assertion-error/index.js:
  (*!
   * assertion-error
   * Copyright(c) 2013 Jake Luer <jake@qualiancy.com>
   * MIT Licensed
   *)
  (*!
   * Return a function that will copy properties from
   * one object to another excluding any originally
   * listed. Returned function will create a new `{}`.
   *
   * @param {String} excluded properties ...
   * @return {Function}
   *)
  (*!
   * Primary Exports
   *)
  (*!
   * Inherit from Error.prototype
   *)
  (*!
   * Statically set name
   *)
  (*!
   * Ensure correct constructor
   *)

chai/lib/chai/utils/flag.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)

chai/lib/chai/utils/test.js:
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Module dependencies
   *)

chai/lib/chai/utils/expectTypes.js:
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)

chai/lib/chai/utils/getActual.js:
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)

chai/lib/chai/utils/objDisplay.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Module dependencies
   *)

chai/lib/chai/utils/getMessage.js:
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Module dependencies
   *)

chai/lib/chai/utils/transferFlags.js:
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)

deep-eql/index.js:
  (*!
   * deep-eql
   * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Check to see if the MemoizeMap has recorded a result of the two operands
   *
   * @param {Mixed} leftHandOperand
   * @param {Mixed} rightHandOperand
   * @param {MemoizeMap} memoizeMap
   * @returns {Boolean|null} result
  *)
  (*!
   * Set the result of the equality into the MemoizeMap
   *
   * @param {Mixed} leftHandOperand
   * @param {Mixed} rightHandOperand
   * @param {MemoizeMap} memoizeMap
   * @param {Boolean} result
  *)
  (*!
   * Primary Export
   *)
  (*!
   * The main logic of the `deepEqual` function.
   *
   * @param {Mixed} leftHandOperand
   * @param {Mixed} rightHandOperand
   * @param {Object} [options] (optional) Additional options
   * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
   * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
      complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
      references to blow the stack.
   * @return {Boolean} equal match
  *)
  (*!
   * Compare two Regular Expressions for equality.
   *
   * @param {RegExp} leftHandOperand
   * @param {RegExp} rightHandOperand
   * @return {Boolean} result
   *)
  (*!
   * Compare two Sets/Maps for equality. Faster than other equality functions.
   *
   * @param {Set} leftHandOperand
   * @param {Set} rightHandOperand
   * @param {Object} [options] (Optional)
   * @return {Boolean} result
   *)
  (*!
   * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
   *
   * @param {Iterable} leftHandOperand
   * @param {Iterable} rightHandOperand
   * @param {Object} [options] (Optional)
   * @return {Boolean} result
   *)
  (*!
   * Simple equality for generator objects such as those returned by generator functions.
   *
   * @param {Iterable} leftHandOperand
   * @param {Iterable} rightHandOperand
   * @param {Object} [options] (Optional)
   * @return {Boolean} result
   *)
  (*!
   * Determine if the given object has an @@iterator function.
   *
   * @param {Object} target
   * @return {Boolean} `true` if the object has an @@iterator function.
   *)
  (*!
   * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
   * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
   *
   * @param {Object} target
   * @returns {Array} an array of entries from the @@iterator function
   *)
  (*!
   * Gets all entries from a Generator. This will consume the generator - which could have side effects.
   *
   * @param {Generator} target
   * @returns {Array} an array of entries from the Generator.
   *)
  (*!
   * Gets all own and inherited enumerable keys from a target.
   *
   * @param {Object} target
   * @returns {Array} an array of own and inherited enumerable keys from the target.
   *)
  (*!
   * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
   * each key. If any value of the given key is not equal, the function will return false (early).
   *
   * @param {Mixed} leftHandOperand
   * @param {Mixed} rightHandOperand
   * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
   * @param {Object} [options] (Optional)
   * @return {Boolean} result
   *)
  (*!
   * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
   * for each enumerable key in the object.
   *
   * @param {Mixed} leftHandOperand
   * @param {Mixed} rightHandOperand
   * @param {Object} [options] (Optional)
   * @return {Boolean} result
   *)
  (*!
   * Returns true if the argument is a primitive.
   *
   * This intentionally returns true for all objects that can be compared by reference,
   * including functions and symbols.
   *
   * @param {Mixed} value
   * @return {Boolean} result
   *)

chai/lib/chai/utils/isProxyEnabled.js:
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)

chai/lib/chai/utils/addProperty.js:
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)

chai/lib/chai/utils/addLengthGuard.js:
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)

chai/lib/chai/utils/getProperties.js:
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)

chai/lib/chai/utils/proxify.js:
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)

chai/lib/chai/utils/addMethod.js:
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)

chai/lib/chai/utils/overwriteProperty.js:
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)

chai/lib/chai/utils/overwriteMethod.js:
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)

chai/lib/chai/utils/addChainableMethod.js:
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Module dependencies
   *)
  (*!
   * Module variables
   *)

chai/lib/chai/utils/overwriteChainableMethod.js:
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)

chai/lib/chai/utils/compareByInspect.js:
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Module dependencies
   *)

chai/lib/chai/utils/getOwnEnumerablePropertySymbols.js:
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)

chai/lib/chai/utils/getOwnEnumerableProperties.js:
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Module dependencies
   *)

chai/lib/chai/utils/isNaN.js:
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)

chai/lib/chai/utils/index.js:
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Dependencies that are used for multiple exports are required here only once
   *)
  (*!
   * test utility
   *)
  (*!
   * type utility
   *)
  (*!
   * expectTypes utility
   *)
  (*!
   * message utility
   *)
  (*!
   * actual utility
   *)
  (*!
   * Inspect util
   *)
  (*!
   * Object Display util
   *)
  (*!
   * Flag utility
   *)
  (*!
   * Flag transferring utility
   *)
  (*!
   * Deep equal utility
   *)
  (*!
   * Deep path info
   *)
  (*!
   * Check if a property exists
   *)
  (*!
   * Function name
   *)
  (*!
   * add Property
   *)
  (*!
   * add Method
   *)
  (*!
   * overwrite Property
   *)
  (*!
   * overwrite Method
   *)
  (*!
   * Add a chainable method
   *)
  (*!
   * Overwrite chainable method
   *)
  (*!
   * Compare by inspect method
   *)
  (*!
   * Get own enumerable property symbols method
   *)
  (*!
   * Get own enumerable properties method
   *)
  (*!
   * Checks error against a given set of criteria
   *)
  (*!
   * Proxify util
   *)
  (*!
   * addLengthGuard util
   *)
  (*!
   * isProxyEnabled helper
   *)
  (*!
   * isNaN method
   *)
  (*!
   * getOperator method
   *)

chai/lib/chai/assertion.js:
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Module dependencies.
   *)
  (*!
   * Module export.
   *)
  (*!
   * Assertion Constructor
   *
   * Creates object for chaining.
   *
   * `Assertion` objects contain metadata in the form of flags. Three flags can
   * be assigned during instantiation by passing arguments to this constructor:
   *
   * - `object`: This flag contains the target of the assertion. For example, in
   *   the assertion `expect(numKittens).to.equal(7);`, the `object` flag will
   *   contain `numKittens` so that the `equal` assertion can reference it when
   *   needed.
   *
   * - `message`: This flag contains an optional custom error message to be
   *   prepended to the error message that's generated by the assertion when it
   *   fails.
   *
   * - `ssfi`: This flag stands for "start stack function indicator". It
   *   contains a function reference that serves as the starting point for
   *   removing frames from the stack trace of the error that's created by the
   *   assertion when it fails. The goal is to provide a cleaner stack trace to
   *   end users by removing Chai's internal functions. Note that it only works
   *   in environments that support `Error.captureStackTrace`, and only when
   *   `Chai.config.includeStack` hasn't been set to `false`.
   *
   * - `lockSsfi`: This flag controls whether or not the given `ssfi` flag
   *   should retain its current value, even as assertions are chained off of
   *   this object. This is usually set to `true` when creating a new assertion
   *   from within another assertion. It's also temporarily set to `true` before
   *   an overwritten assertion gets called by the overwriting assertion.
   *
   * - `eql`: This flag contains the deepEqual function to be used by the assertion.
   *
   * @param {Mixed} obj target of the assertion
   * @param {String} msg (optional) custom error message
   * @param {Function} ssfi (optional) starting point for removing stack frames
   * @param {Boolean} lockSsfi (optional) whether or not the ssfi flag is locked
   * @api private
   *)
  (*!
   * ### ._obj
   *
   * Quick reference to stored `actual` value for plugin developers.
   *
   * @api private
   *)

chai/lib/chai/core/assertions.js:
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)

chai/lib/chai/interface/expect.js:
chai/lib/chai/interface/should.js:
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)

chai/lib/chai/interface/assert.js:
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai dependencies.
   *)
  (*!
   * Module export.
   *)
  (*!
   * ### .ifError(object)
   *
   * Asserts if value is not a false value, and throws if it is a true value.
   * This is added to allow for chai to be a drop-in replacement for Node's
   * assert class.
   *
   *     var err = new Error('I am a custom error');
   *     assert.ifError(err); // Rethrows err!
   *
   * @name ifError
   * @param {Object} object
   * @namespace Assert
   * @api public
   *)
  (*!
   * Aliases.
   *)

chai/lib/chai.js:
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai version
   *)
  (*!
   * Assertion Error
   *)
  (*!
   * Utils for plugins (not exported)
   *)
  (*!
   * Utility Functions
   *)
  (*!
   * Configuration
   *)
  (*!
   * Primary `Assertion` prototype
   *)
  (*!
   * Core Assertions
   *)
  (*!
   * Expect interface
   *)
  (*!
   * Should interface
   *)
  (*!
   * Assert interface
   *)

punycode/punycode.js:
  (*! https://mths.be/punycode v1.4.1 by @mathias *)
*/
